"use strict";(self.webpackChunkmagic=self.webpackChunkmagic||[]).push([[52],{3231:(g,p,n)=>{n.d(p,{U:()=>c});var t=n(4650),a=n(5938),_=n(3553),m=n(3885),d=n(6895),l=n(6338),h=n(316);function r(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"mat-list-option",5),t.NdJ("click",function(){const v=t.CHM(i).$implicit,E=t.oxw();return t.KtG(E.select(v))}),t._uU(1),t.qZA()}if(2&e){const i=o.$implicit,s=t.oxw();t.ekj("d-none",s.filter&&-1===i.toLowerCase().indexOf(null==s.filter?null:s.filter.toLowerCase())),t.xp6(1),t.hij(" ",s.getFilename(i)," ")}}let c=(()=>{class e{constructor(i,s,u){this.dialogRef=i,this.evaluatorService=s,this.generalService=u,this.files=[],this.filter=null}ngOnInit(){this.evaluatorService.snippets().subscribe({next:i=>{this.files=i.filter(s=>s.endsWith(".hl"))},error:i=>this.generalService.showFeedback(i?.error?.message??i,"errorMessage")})}filterList(i){this.filter=i.searchKey}getFiles(){return this.filter?this.files.filter(i=>-1!==this.getFilename(i).indexOf(this.filter)):this.files}getFilename(i){const s=i.substring(i.lastIndexOf("/")+1);return s.substring(0,s.lastIndexOf("."))}select(i){this.dialogRef.close(this.getFilename(i))}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(a.so),t.Y36(_.a),t.Y36(m.m))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-load-snippet-dialog"]],decls:6,vars:2,consts:[["mat-dialog-title","",1,"mb-3"],["mat-dialog-content",""],[3,"filterList"],["dense","",3,"multiple"],[3,"d-none","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"h3",0),t._uU(1,"Load Hyperlambda snippet"),t.qZA(),t.TgZ(2,"div",1)(3,"app-searchbox",2),t.NdJ("filterList",function(v){return s.filterList(v)}),t.qZA(),t.TgZ(4,"mat-selection-list",3),t.YNc(5,r,2,3,"mat-list-option",4),t.qZA()()),2&i&&(t.xp6(4),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",s.files))},dependencies:[d.sg,l.Ub,l.vS,a.uh,a.xY,h.E],styles:[".mat-list-option[_ngcontent-%COMP%]{height:40px}.mat-dialog-title[_ngcontent-%COMP%]{font:inherit;margin-bottom:0}.file-content[_ngcontent-%COMP%]   .mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-item-content-reverse[_ngcontent-%COMP%], .file-content[_ngcontent-%COMP%]   .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-item-content-reverse[_ngcontent-%COMP%]{word-break:break-all;height:unset;min-height:40px;font-size:14px}"]}),e})()},2168:(g,p,n)=>{n.d(p,{r:()=>l});var t=n(5938),a=n(4650),_=n(6895),m=n(4859);function d(c,e){if(1&c&&(a.TgZ(0,"div",6)(1,"p",7),a._uU(2),a.qZA(),a.TgZ(3,"span",8),a._uU(4),a.qZA()()),2&c){const o=e.$implicit;a.xp6(2),a.Oqu(o.name),a.xp6(2),a.Oqu(o.key)}}let l=(()=>{class c{constructor(o){this.data=o,this.shortkeys=h}ngOnInit(){this.prepareData()}prepareData(){this.data.type.indexOf("save")>-1&&(this.shortkeys=[...this.shortkeys,{name:"Save",key:"Alt + S"}]),this.data.type.indexOf("execute")>-1&&(this.shortkeys=[...this.shortkeys,{name:"Execute",key:"F5"}]),this.data.type.indexOf("prompt")>-1&&(this.shortkeys=[...this.shortkeys,{name:"AI based help",key:"F1"}]),this.data.type.indexOf("insertSnippet")>-1&&(this.shortkeys=[...this.shortkeys,{name:"Load snippet",key:"ALT + V"}]),this.data.type.indexOf("full")>-1&&(this.shortkeys=[...this.shortkeys,...r])}}return c.\u0275fac=function(o){return new(o||c)(a.Y36(t.WI))},c.\u0275cmp=a.Xpm({type:c,selectors:[["app-shortkeys"]],decls:8,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"row"],["class","col-xl-4 col-md-6 col-12 my-2",4,"ngFor","ngForOf"],["mat-dialog-actions","",3,"align"],["mat-button","","mat-dialog-close",""],[1,"col-xl-4","col-md-6","col-12","my-2"],[1,"mb-2","text-nowrap","text-muted"],[1,"my-0","fw-bold"]],template:function(o,i){1&o&&(a.TgZ(0,"h3",0),a._uU(1,"Shortkeys"),a.qZA(),a.TgZ(2,"div",1)(3,"div",2),a.YNc(4,d,5,2,"div",3),a.qZA()(),a.TgZ(5,"div",4)(6,"button",5),a._uU(7," Close "),a.qZA()()),2&o&&(a.xp6(4),a.Q6J("ngForOf",i.shortkeys),a.xp6(1),a.Q6J("align","end"))},dependencies:[_.sg,m.lW,t.ZT,t.uh,t.xY,t.H8],encapsulation:2}),c})();const h=[{name:"Toggle fullscreen",key:"Alt + M"},{name:"Search",key:"Ctrl + F / Cmd + F"},{name:"Find next",key:"Ctrl + G / Cmd + G"},{name:"Find previous",key:"Shift + Ctrl + G / Shift + Cmd + G"},{name:"Replace",key:"Shift + Ctrl + F / Cmd + Option + F"},{name:"Replace all",key:"Shift + Ctrl + R / Shift + Cmd + Option + F"},{name:"Jump to line",key:"Alt + G"}],r=[{name:"Save File",key:"Alt + S"},{name:"Execute File or Endpoint",key:"F5"},{name:"Preview File",key:"ALT + P"},{name:"Insert snippet",key:"ALT + V"},{name:"Close File",key:"Alt + C"},{name:"Rename File",key:"Alt + R"},{name:"Rename Folder",key:"Alt + L"},{name:"Delete File",key:"Alt + D"},{name:"Delete Folder",key:"Alt + X"},{name:"Execute macro",key:"Alt + O"},{name:"New file",key:"Alt + A"},{name:"New folder",key:"Alt + B"},{name:"Show autocomplete",key:"CTRL + SPACE"},{name:"Indent",key:"TAB"},{name:"Deindent",key:"SHIFT + TAB"}]},6808:(g,p,n)=>{n.d(p,{p:()=>h});var t=n(4650),a=n(3885),_=n(4700),m=n(5944),d=n(9627),l=n(7169);let h=(()=>{class r{constructor(e,o,i,s,u){this.generalService=e,this.recaptchaV3Service=o,this.bazarService=i,this.vocabularyService=s,this.messageService=u}prompt(e){let o="";o=this.vocabularyService.words.filter(s=>s===e).length>0?"How does ["+e+"] work?":"Explain this Hyperlambda code\r\n\r\n"+e,this.generalService.showLoading(),this.recaptchaV3Service.execute("aiAutoPrompt").subscribe({next:s=>{this.bazarService.prompt(o,s).subscribe({next:u=>{this.generalService.hideLoading(),this.messageService.sendMessage({name:"magic.show-help",content:u.result})},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Could not invoke magic API server to create completion","errorMessage")}})},error:()=>{this.generalService.hideLoading()}})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(a.m),t.LFG(_.YC),t.LFG(m.K),t.LFG(d.c),t.LFG(l.e))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},5944:(g,p,n)=>{n.d(p,{K:()=>h});var t=n(2843),a=n(3224),_=n(4650),m=n(529),d=n(9845),l=n(9214);let h=(()=>{class r{constructor(e,o,i){this.httpClient=e,this.httpService=o,this.fileService=i}localManifests(){return this.httpService.get("/magic/system/bazar/app-manifests")}listBazarItems(e,o,i){let s="?limit="+i;return o&&0!==o&&(s+="&offset="+o),e&&""!==e&&(s+="&name.like="+encodeURIComponent(e+"%")),s+="&order=created&direction=desc&type.eq=module",this.httpClient.get(a.N.bazarUrl+"/magic/modules/bazar/apps"+s)}getBazarItem(e){const o="?folder_name.eq="+encodeURIComponent(e);return this.httpClient.get(a.N.bazarUrl+"/magic/modules/bazar/apps"+o)}countBazarItems(e){let o="";return e&&""!==e&&(o+="?name.like="+encodeURIComponent(e+"%")),o+=""===o?"?type.eq=module":"&type.eq=module",this.httpClient.get(a.N.bazarUrl+"/magic/modules/bazar/apps-count"+o)}subscribeToNewsletter(e){return this.httpClient.post(a.N.bazarUrl+"/magic/modules/bazar/subscribe",e)}purchaseBazarItem(e,o,i,s,u){const v={product_id:e.id,name:o,customer_email:i,subscribe:s,redirect_url:window.location.href.split("?")[0]};return u&&""!==u&&(v.promo_code=u),this.httpClient.post(a.N.bazarUrl+"/magic/modules/bazar/purchase",v)}canDownloadBazarItem(e){return this.httpClient.get(a.N.bazarUrl+"/magic/modules/bazar/can-download?token="+encodeURIComponent(e))}downloadBazarItem(e,o){return this.httpService.post("/magic/system/bazar/download-from-bazar",{url:a.N.bazarUrl+"/magic/modules/bazar/download?token="+o,name:e.folder_name})}updateBazarItem(e){return e.token&&""!==e.token?this.httpService.post("/magic/system/bazar/download-from-bazar",{url:a.N.bazarUrl+"/magic/modules/bazar/download?token="+e.token,name:e.module_name}):(0,t._)(()=>new Error("No token found in app's manifest"))}downloadBazarItemLocally(e){setTimeout(()=>this.fileService.downloadFolder("/modules/"+e+"/"),1e3)}canInstall(e){return this.httpService.get("/magic/system/bazar/can-install?required_magic_version="+encodeURIComponent(e))}installBazarItem(e,o,i,s){return this.httpService.put("/magic/system/file-system/install",{folder:"/modules/"+e+"/",app_version:o,name:i,token:s})}prompt(e,o){const i=a.N.bazarUrl+"/magic/system/openai/prompt?prompt="+encodeURIComponent(e)+"&type=aista_com&recaptcha_response="+encodeURIComponent(o);return this.httpClient.get(i)}}return r.\u0275fac=function(e){return new(e||r)(_.LFG(m.eN),_.LFG(d.O),_.LFG(l.I))},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},3553:(g,p,n)=>{n.d(p,{a:()=>d});var t=n(2843),a=n(4650),_=n(9845),m=n(9214);let d=(()=>{class l{constructor(r,c){this.httpService=r,this.fileService=c}execute(r){return this.httpService.post("/magic/system/evaluator/evaluate",{hyperlambda:r})}snippets(){return this.fileService.listFiles("/etc/snippets/")}loadSnippet(r){return-1!==r.indexOf("/")?(0,t._)(()=>new Error("Not a valid filename")):((r="/etc/snippets/"+r).endsWith(".hl")||(r+=".hl"),this.fileService.loadFile(r))}saveSnippet(r,c){return-1!==r.indexOf("/")?(0,t._)(()=>new Error("Not a valid filename")):((r="/etc/snippets/"+r).endsWith(".hl")||(r+=".hl"),this.fileService.saveFile(r,c))}}return l.\u0275fac=function(r){return new(r||l)(a.LFG(_.O),a.LFG(m.I))},l.\u0275prov=a.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},9627:(g,p,n)=>{n.d(p,{c:()=>d});var t=n(9646),a=n(9751),_=n(4650),m=n(9845);let d=(()=>{class l{constructor(r){this.httpService=r,this._vocabulary=[]}get words(){return this._vocabulary}vocabulary(){return this._vocabulary.length>0&&(0,t.of)(this._vocabulary),new a.y(r=>{this.httpService.get("/magic/system/evaluator/vocabulary").subscribe({next:c=>{this._vocabulary=c,r.next(c),r.complete()},error:c=>{r.error(c),r.complete()}})})}}return l.\u0275fac=function(r){return new(r||l)(_.LFG(m.O))},l.\u0275prov=_.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},1717:(g,p,n)=>{n.d(p,{h:()=>d});var t=n(6895),a=n(4006),_=n(1103),m=n(4650);let d=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=m.oAB({type:l}),l.\u0275inj=m.cJS({imports:[t.ez,_.k,a.u5]}),l})()}}]);