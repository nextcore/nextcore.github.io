"use strict";(self.webpackChunkmagic=self.webpackChunkmagic||[]).push([[902],{9554:(b,p,n)=>{n.d(p,{v:()=>t});const t={name:"Name must be minimum 2 characters long",backendname:"Alphanumeric characters between 2 to 20 (no space).",username:"Alphanumeric between 2 and 20 characters (no space)",email:"Email must be a valid email address",confirmEmail:"Email addresses must match",confirmPassword:"Passwords must match",currentPassword:"Your password is incorrect",cloudletName:"Minimum of 5 characters, only lowercase and numbers",phone:"e.g. 1111111111",subject:"2 to 30 letters, without special characters",message:"Message cannot be less than 3 characters",appNames:"Only lowercase alphanumeric characters, dot (.), - or _ please",appNamesWithUppercaseDot:"Only alphanumeric characters, dot (.), - or _ please",appNamesWithDot:"Only lowercase alphanumeric characters, and - or _ please",appNameWithUppercase:"Accepts alphanumeric characters and _",appNameWithUppercaseHyphen:"Accepts alphanumeric characters, - and _",domain:"Domain is not valid",backend:"Backend URL must contain http://",password:"Minimum 12 characters",recaptcha:"Not valid reCAPTCHA secret or key"}},8194:(b,p,n)=>{n.d(p,{g:()=>t});const t={phone:/^[0-9 ]*$/,name:/^[a-z0-9]{2,20}$/,subject:/^.{4,1000}$/,appNames:/^[a-z0-9_.-]+$/,appNamesWithDot:/^[a-z0-9_.-]+$/,appNamesWithUppercaseDot:/^[a-zA-Z0-9_.-]+$/,appNameWithUppercase:/^[a-zA-Z0-9_]+$/,appNameWithUppercaseHyphen:/^[a-zA-Z0-9_-]+$/,domain:/(^https?:\/\/)([\w\-])+\.{1}([a-zA-Z]{2,63})([\/\w-]*)*\/?\??([^#\n\r]*)?#?([^\n\r]*)/,backend:/^https?:\/\/([\w\-.])+(:[0-9]*)?(\.\w+)?$/,email:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,password:/^.{12,}$/,recaptcha:/^([a-zA-Z-_0-9]{20,100})$/}},7832:(b,p,n)=>{n.d(p,{K:()=>E});var t=n(6895),e=n(2278),M=n(4006),C=n(1103),c=n(4650);let E=(()=>{class a{}return a.\u0275fac=function(_){return new(_||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[t.ez,e.q,M.u5,M.UX,C.k]}),a})()},8670:(b,p,n)=>{n.d(p,{n:()=>u});var t=n(4650),e=n(5938),M=n(6147),C=n(3885),c=n(7392),E=n(4859),a=n(9549),h=n(4144),_=n(266),m=n(4006);const d=function(){return{configured:!1}};let u=(()=>{class A{constructor(s,v,f){this.dialogRef=s,this.openAiService=v,this.generalService=f,this.openApiKey=""}ngOnInit(){this.generalService.showLoading(),this.openAiService.key().subscribe({next:s=>{this.openApiKey=s.result||"",this.generalService.hideLoading()},error:s=>{this.generalService.showFeedback(s?.error?.message??s,"errorMessage"),this.generalService.hideLoading()}})}save(){this.openApiKey.length<20?this.generalService.showFeedback("Not a valid API key","errorMessage"):(this.generalService.showLoading(),this.openAiService.setKey(this.openApiKey).subscribe({next:()=>{this.generalService.showFeedback("Your OpenAI API key was saved to your configuration","successMessage"),this.generalService.hideLoading(),this.dialogRef.close({configured:!0,key:this.openApiKey})},error:s=>{this.generalService.showFeedback(s?.error?.message??s,"errorMessage"),this.generalService.hideLoading()}}))}close(){this.dialogRef.close({configured:!1})}}return A.\u0275fac=function(s){return new(s||A)(t.Y36(e.so),t.Y36(M.A),t.Y36(C.m))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-openai-configuration-dialog"]],decls:21,vars:4,consts:[["mat-dialog-title","",1,"mb-1"],[3,"ngSubmit"],["mat-dialog-content",""],[1,"text-muted","mt-0","mb-4"],["href","https://beta.openai.com/account/api-keys","target","_blank"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","OpenAI API key",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","cdkFocusInitial","","placeholder","OpenAI API key","name","openApiKey","autocomplete","off",3,"ngModel","ngModelChange"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"mat-dialog-close"],["mat-flat-button","","type","submit"]],template:function(s,v){1&s&&(t.TgZ(0,"h3",0),t._uU(1,"Configure OpenAI"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return v.save()}),t.TgZ(3,"div",2)(4,"p",3),t._uU(5," Supply your OpenAI API key. You can get an API key "),t.TgZ(6,"a",4),t._uU(7,"here"),t.qZA(),t._uU(8,". "),t.qZA(),t.TgZ(9,"mat-form-field",5)(10,"span",6)(11,"mat-icon"),t._uU(12,"key"),t.qZA(),t.TgZ(13,"span",7),t._uU(14,"|"),t.qZA()(),t.TgZ(15,"input",8),t.NdJ("ngModelChange",function(O){return v.openApiKey=O}),t.qZA()()(),t.TgZ(16,"div",9)(17,"button",10),t._uU(18," Cancel "),t.qZA(),t.TgZ(19,"button",11),t._uU(20," Save "),t.qZA()()()),2&s&&(t.xp6(15),t.Q6J("ngModel",v.openApiKey),t.xp6(1),t.Q6J("align","end"),t.xp6(1),t.Q6J("mat-dialog-close",t.DdM(3,d)))},dependencies:[c.Hw,E.lW,a.KE,a.qo,h.Nt,e.ZT,e.uh,e.xY,e.H8,_.gM,m._Y,m.Fj,m.JJ,m.JL,m.On,m.F],styles:["a[_ngcontent-%COMP%]{text-decoration:none}"]}),A})()},6147:(b,p,n)=>{n.d(p,{A:()=>C});var t=n(4650),e=n(9845);let C=(()=>{class c{constructor(a){this.httpService=a}query(a,h,_=!1,m=null,d=null){let u=`/magic/system/openai/${d?.startsWith("gpt-")?"chat":"prompt"}?prompt=`+encodeURIComponent(a)+"&references="+(_?"true":"false")+"&type="+encodeURIComponent(h);return m&&(u+="&session="+encodeURIComponent(m)),this.httpService.get(u)}isConfigured(){return this.httpService.get("/magic/system/openai/is-configured")}key(){return this.httpService.get("/magic/system/openai/key")}setKey(a){return this.httpService.post("/magic/system/openai/key",{key:a})}models(){return this.httpService.get("/magic/system/openai/models")}themes(){return this.httpService.get("/magic/system/openai/themes")}themesSearch(){return this.httpService.get("/magic/system/openai/themes-search")}uploadTrainingFile(a){return this.httpService.post("/magic/system/openai/upload-training-data",a)}start_training(a){return this.httpService.post("/magic/system/openai/train",a)}importUrl(a,h,_,m,d,u){return this.httpService.post("/magic/system/openai/import-url",{url:a,type:h,delay:_,max:m,threshold:d,summarize:u})}importPage(a,h,_){return this.httpService.post("/magic/system/openai/import-page",{url:a,type:h,threshold:_})}vectorise(a){return this.httpService.post("/magic/system/openai/vectorise",{type:a})}vectoriseSnippet(a){return this.httpService.post("/magic/system/openai/vectorise-snippet",{id:a})}createBot(a,h=null){return this.httpService.post("/magic/system/openai/create-bot",{url:a,flavor:h})}}return c.\u0275fac=function(a){return new(a||c)(t.LFG(e.O))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},6620:(b,p,n)=>{n.d(p,{A:()=>Z});var t=n(5938),e=n(4650),M=n(4425),C=n(8710),c=n(6147),E=n(3885),a=n(6895),h=n(7392),_=n(4859),m=n(3848),d=n(9549),u=n(4144),A=n(6709),U=n(266),s=n(4385),v=n(3238),f=n(4006);function O(g,T){if(1&g&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&g){const r=T.$implicit;e.Q6J("value",r),e.xp6(1),e.hij(" ",r," ")}}function P(g,T){if(1&g&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&g){const r=T.$implicit;e.Q6J("value",r),e.xp6(1),e.hij(" ",r," ")}}let Z=(()=>{class g{constructor(r,o,l,i,I,y){this.data=r,this.clipboard=o,this.backendService=l,this.openAiService=i,this.dialogRef=I,this.generalService=y,this.theme="chess",this.themes=[],this.themeSearch="default",this.themesSearch=[],this.type=null,this.header="Ask about our services or products",this.buttonTxt="",this.search=!1,this.chat=!0,this.markdown=!0,this.speech=!1,this.rtl=!1,this.placeholder="Search ...",this.buttonTxtSearch="",this.maxSearch=5,this.currentTabIndex=0,this.type=this.data.type}ngOnInit(){!0===this.data.search&&(this.search=!0),this.openAiService.themes().subscribe({next:r=>{this.themes=r},error:()=>{this.generalService.showFeedback("Something went wrong as we tried to retrieve themes","errorMessage"),this.generalService.hideLoading()}}),this.openAiService.themesSearch().subscribe({next:r=>{this.themesSearch=r},error:()=>{this.generalService.showFeedback("Something went wrong as we tried to retrieve themes","errorMessage"),this.generalService.hideLoading()}})}selectedIndexChange(r){this.currentTabIndex=r}getChatbotEmbed(){return`<script src="${this.backendService.active.url}/magic/system/openai/include-javascript?markdown=${this.markdown?"true":"false"}&speech=${this.speech?"true":"false"}&rtl=${this.rtl?"true":"false"}&search=${this.search?"true":"false"}&chat=${this.chat?"true":"false"}&css=${encodeURIComponent(this.theme)}&file=default&type=${encodeURIComponent(this.type)}&header=${encodeURIComponent(this.header)}&button=${encodeURIComponent(this.buttonTxt)}" defer><\/script>`}getSearchEmbed(){return`<script src="${this.backendService.active.url}/magic/system/openai/include-search?css=${encodeURIComponent(this.themeSearch)}&type=${encodeURIComponent(this.type)}&placeholder=${encodeURIComponent(this.placeholder)}&button=${encodeURIComponent(this.buttonTxtSearch)}&max=${this.maxSearch}" defer><\/script>`}embed(){switch(this.currentTabIndex){case 0:this.embedChatbot();break;case 1:this.embedSearch()}}embedChatbot(){!1!==this.search||!1!==this.chat?(this.clipboard.copy(this.getChatbotEmbed()),this.generalService.showFeedback("HTML to include chatbot can be found on your clipboard","successMessage"),!0!==this.data.noClose&&this.dialogRef.close()):this.generalService.showFeedback("You have to choose at least one of chat or search","errorMessage")}embedSearch(){this.clipboard.copy(this.getSearchEmbed()),this.generalService.showFeedback("HTML to include search widget can be found on your clipboard","successMessage"),!0!==this.data.noClose&&this.dialogRef.close()}}return g.\u0275fac=function(r){return new(r||g)(e.Y36(t.WI),e.Y36(M.TU),e.Y36(C.v),e.Y36(c.A),e.Y36(t.so),e.Y36(E.m))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-machine-learning-embed-ui"]],decls:77,vars:17,consts:[["mat-dialog-title","",1,"mb-3"],["mat-dialog-content","",1,"content"],["mat-stretch-tabs","","dynamicHeight","","animationDuration","0ms",3,"selectedIndexChange"],["label","Chatbot"],[1,"w-100","standalone-field","pt-4"],["matPrefix","","matTooltip","Header of chat window",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","placeholder","Header ...","spellcheck","false","autocomplete","off",3,"ngModel","ngModelChange"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Button text, defaults to chat icon",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Button text ...","spellcheck","false","autocomplete","off",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Theme to use",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Theme ...",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-3"],["labelPosition","before","color","primary",1,"me-3",3,"ngModel","ngModelChange"],[1,"text-muted","mt-3",2,"word-wrap","break-word"],["label","AI Search"],["matPrefix","","matTooltip","Placeholder of search field",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Placeholder","spellcheck","false","autocomplete","off",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Button text",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Button text","spellcheck","false","autocomplete","off",3,"ngModel","ngModelChange"],["placeholder","Theme",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Max number of results",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Max results","type","number","step","1","autocomplete","off",3,"ngModel","ngModelChange"],["mat-dialog-actions","",3,"align"],["mat-flat-button","",3,"click"],["mat-button","","mat-dialog-close",""],[3,"value"]],template:function(r,o){1&r&&(e.TgZ(0,"h3",0),e._uU(1,"Embed Chatbot or AI Search on your website"),e.qZA(),e.TgZ(2,"div",1)(3,"mat-tab-group",2),e.NdJ("selectedIndexChange",function(i){return o.selectedIndexChange(i)}),e.TgZ(4,"mat-tab",3)(5,"mat-form-field",4)(6,"span",5)(7,"mat-icon"),e._uU(8,"edit"),e.qZA(),e.TgZ(9,"span",6),e._uU(10,"|"),e.qZA()(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(i){return o.header=i}),e.qZA()(),e.TgZ(12,"mat-form-field",8)(13,"span",9)(14,"mat-icon"),e._uU(15,"touch_app"),e.qZA(),e.TgZ(16,"span",6),e._uU(17,"|"),e.qZA()(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(i){return o.buttonTxt=i}),e.qZA()(),e.TgZ(19,"mat-form-field",8)(20,"span",11)(21,"mat-icon"),e._uU(22,"palette"),e.qZA(),e.TgZ(23,"span",6),e._uU(24,"|"),e.qZA()(),e.TgZ(25,"mat-select",12),e.NdJ("ngModelChange",function(i){return o.theme=i}),e.YNc(26,O,2,2,"mat-option",13),e.qZA()(),e.TgZ(27,"div",14)(28,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){return o.search=i}),e._uU(29,"References"),e.qZA(),e.TgZ(30,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){return o.chat=i}),e._uU(31,"Chat"),e.qZA(),e.TgZ(32,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){return o.markdown=i}),e._uU(33,"Markdown"),e.qZA(),e.TgZ(34,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){return o.speech=i}),e._uU(35,"Speech"),e.qZA(),e.TgZ(36,"mat-checkbox",15),e.NdJ("ngModelChange",function(i){return o.rtl=i}),e._uU(37,"RTL"),e.qZA()(),e.TgZ(38,"p",16),e._uU(39),e.qZA()(),e.TgZ(40,"mat-tab",17)(41,"mat-form-field",4)(42,"span",18)(43,"mat-icon"),e._uU(44,"edit"),e.qZA(),e.TgZ(45,"span",6),e._uU(46,"|"),e.qZA()(),e.TgZ(47,"input",19),e.NdJ("ngModelChange",function(i){return o.placeholder=i}),e.qZA()(),e.TgZ(48,"mat-form-field",8)(49,"span",20)(50,"mat-icon"),e._uU(51,"touch_app"),e.qZA(),e.TgZ(52,"span",6),e._uU(53,"|"),e.qZA()(),e.TgZ(54,"input",21),e.NdJ("ngModelChange",function(i){return o.buttonTxtSearch=i}),e.qZA()(),e.TgZ(55,"mat-form-field",8)(56,"span",11)(57,"mat-icon"),e._uU(58,"palette"),e.qZA(),e.TgZ(59,"span",6),e._uU(60,"|"),e.qZA()(),e.TgZ(61,"mat-select",22),e.NdJ("ngModelChange",function(i){return o.themeSearch=i}),e.YNc(62,P,2,2,"mat-option",13),e.qZA()(),e.TgZ(63,"mat-form-field",8)(64,"span",23)(65,"mat-icon"),e._uU(66,"timeline"),e.qZA(),e.TgZ(67,"span",6),e._uU(68,"|"),e.qZA()(),e.TgZ(69,"input",24),e.NdJ("ngModelChange",function(i){return o.maxSearch=i}),e.qZA()(),e.TgZ(70,"p",16),e._uU(71),e.qZA()()()(),e.TgZ(72,"div",25)(73,"button",26),e.NdJ("click",function(){return o.embed()}),e._uU(74," Copy "),e.qZA(),e.TgZ(75,"button",27),e._uU(76," Close "),e.qZA()()),2&r&&(e.xp6(11),e.Q6J("ngModel",o.header),e.xp6(7),e.Q6J("ngModel",o.buttonTxt),e.xp6(7),e.Q6J("ngModel",o.theme),e.xp6(1),e.Q6J("ngForOf",o.themes),e.xp6(2),e.Q6J("ngModel",o.search),e.xp6(2),e.Q6J("ngModel",o.chat),e.xp6(2),e.Q6J("ngModel",o.markdown),e.xp6(2),e.Q6J("ngModel",o.speech),e.xp6(2),e.Q6J("ngModel",o.rtl),e.xp6(3),e.hij(" ",o.getChatbotEmbed()," "),e.xp6(8),e.Q6J("ngModel",o.placeholder),e.xp6(7),e.Q6J("ngModel",o.buttonTxtSearch),e.xp6(7),e.Q6J("ngModel",o.themeSearch),e.xp6(1),e.Q6J("ngForOf",o.themesSearch),e.xp6(7),e.Q6J("ngModel",o.maxSearch),e.xp6(2),e.hij(" ",o.getSearchEmbed()," "),e.xp6(1),e.Q6J("align","end"))},dependencies:[a.sg,h.Hw,_.lW,m.SP,m.uX,d.KE,d.qo,u.Nt,A.oG,t.ZT,t.uh,t.xY,t.H8,U.gM,s.gD,v.ey,f.Fj,f.wV,f.JJ,f.On],encapsulation:2}),g})()}}]);