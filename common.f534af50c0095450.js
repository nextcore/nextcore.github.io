"use strict";(self.webpackChunkmagic=self.webpackChunkmagic||[]).push([[592],{5424:(f,u,o)=>{o.d(u,{K:()=>g});var a=o(5938),t=o(4650),p=o(6895),e=o(4859);function m(i,n){1&i&&(t.TgZ(0,"p",5),t._uU(1,"Meta"),t.qZA())}function r(i,n){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const s=n.$implicit;t.xp6(1),t.AsE("",s.key,": ",s.value,"")}}function c(i,n){1&i&&(t.TgZ(0,"p",5),t._uU(1,"Exception"),t.qZA())}let g=(()=>{class i{constructor(s){this.data=s}}return i.\u0275fac=function(s){return new(s||i)(t.Y36(a.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-log-item-details"]],decls:23,vars:16,consts:[[1,"d-flex","justify-content-between","align-items-center"],["mat-dialog-title","",1,"my-0"],[1,"mat-h3"],["mat-dialog-content",""],[1,"fw-bold","mt-2"],[1,"fw-bold","mt-4"],[1,"pre-formatted"],["class","fw-bold mt-4",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"pre-formatted",3,"innerHTML"],["mat-dialog-actions","",3,"align"],["mat-flat-button","","color","primary","mat-dialog-close",""]],template:function(s,_){1&s&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.qZA(),t.TgZ(3,"p",2),t._uU(4),t.qZA()(),t.TgZ(5,"div",3)(6,"p",4),t._uU(7,"Date & time"),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"p",5),t._uU(12,"Content"),t.qZA(),t.TgZ(13,"p",6),t._uU(14),t.qZA(),t.YNc(15,m,2,0,"p",7),t.YNc(16,r,2,2,"p",8),t.ALo(17,"keyvalue"),t.YNc(18,c,2,0,"p",7),t._UZ(19,"p",9),t.qZA(),t.TgZ(20,"div",10)(21,"button",11),t._uU(22," Close "),t.qZA()()),2&s&&(t.xp6(2),t.hij("Log ID ",_.data.id,""),t.xp6(1),t.ekj("text-danger","error"===(null==_.data?null:_.data.type)),t.xp6(1),t.hij(" ",null==_.data?null:_.data.type," "),t.xp6(5),t.Oqu(t.xi3(10,11,_.data.created,"dd-MM-YYYY HH:mm")),t.xp6(5),t.Oqu(_.data.content),t.xp6(1),t.Q6J("ngIf",_.data.meta),t.xp6(1),t.Q6J("ngForOf",t.lcZ(17,14,_.data.meta)),t.xp6(2),t.Q6J("ngIf",_.data.exception),t.xp6(1),t.Q6J("innerHTML",_.data.exception,t.oJD),t.xp6(1),t.Q6J("align","end"))},dependencies:[p.sg,p.O5,e.lW,a.ZT,a.uh,a.xY,a.H8,p.uU,p.Nd],styles:[".pre-formatted[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-all;line-height:2}"]}),i})()},7292:(f,u,o)=>{o.d(u,{$:()=>t});var a=o(4650);let t=(()=>{class p{transform(m){m.indexOf&&-1===m.indexOf("+")&&!m.endsWith("Z")&&(m+="+00:00");const r=new Date(m).getTime(),c=(new Date).getTime(),g=Math.round((c-r)/1e3);if(g<180)return`${g} seconds ago`;const i=Math.round(g/60);if(i<60)return`${i} minutes ago`;const n=Math.round(i/60);if(n<24)return`${n} hours ago`;const s=Math.round(n/24);if(s<60)return`${s} days ago`;const _=Math.round(s/7);return _<20?`${_} weeks ago`:`${Math.round(_/4.2)} months ago`}}return p.\u0275fac=function(m){return new(m||p)},p.\u0275pipe=a.Yjl({name:"since",type:p,pure:!0}),p})()},2729:(f,u,o)=>{o.d(u,{E:()=>r});var a=o(9751),t=o(6015),p=o(4650),e=o(9845),m=o(8710);let r=(()=>{class c{constructor(i,n){this.httpService=i,this.backendService=n}rootUserEmailAddress(){return this.httpService.get("/magic/system/emails/email")}loadConfig(){return this.httpService.get("/magic/system/config/load")}saveConfig(i){return this.httpService.post("/magic/system/config/save",i)}setup(i){return new a.y(n=>this.httpService.post("/magic/system/config/setup",i).subscribe({next:s=>{const _=new t.z(this.backendService.active.url,"root",null,s.ticket);this.backendService.upsert(_),this.backendService.activate(_),n.next(s),n.complete()},error:s=>{n.error(s),n.complete()}}))}installModules(){return this.httpService.post("/magic/system/config/install-modules",{})}getGibberish(i,n){return this.httpService.get("/magic/system/misc/gibberish?min="+i+"&max="+n)}versionCompare(i,n){const s=i.substring(1).split("."),_=n.substring(1).split(".");for(let l=0;l<3;l++){if(s[l]<_[l])return-1;if(s[l]>_[l])return 1}return 0}getDatabases(){return this.httpService.get("/magic/system/sql/default-database-type")}testConnectionString(i,n){return this.httpService.post("/magic/system/sql/test-connection-string",{databaseType:i,connectionString:n})}}return c.\u0275fac=function(i){return new(i||c)(p.LFG(e.O),p.LFG(m.v))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},6271:(f,u,o)=>{o.d(u,{A:()=>c});var a=o(9646),t=o(4650),p=o(4327),m=o(9845),r=o(3885);let c=(()=>{class g{constructor(n,s,_){this.httpService=n,this.generalService=s,this.locale=_}crudify(n){let s=!0;return"post"===n.verb&&0===n.args.columns.length&&0===n.args.primary.length&&(s=!1),"put"===n.verb&&0===n.args.columns.length&&(s=!1),"delete"===n.verb&&0===n.args.primary.length&&(s=!1),s?this.httpService.post("/magic/system/crudifier/crudify",n):(0,a.of)({loc:0,result:"Endpoint not created"})}generateSqlEndpoint(n){return this.httpService.post("/magic/system/crudifier/custom-sql",n)}templates(){return this.httpService.get("/magic/system/crudifier/templates")}template(n){return this.httpService.get("/magic/system/crudifier/template?name="+encodeURIComponent(n))}templateCustomArgs(n){return this.httpService.get("/magic/system/crudifier/template-args?name="+encodeURIComponent(n))}generate(n,s,_,l,v,d,h,E=null,y=null){this.httpService.downloadPost("/magic/system/crudifier/generate-frontend",{templateName:n,apiUrl:s,name:_,copyright:l,endpoints:v,deployLocally:d,args:h}).subscribe({next:C=>{const M=C.headers.get("Content-Disposition");if(M){let O=M.split(";")[1].trim().split("=")[1].replace(/"/g,"");const P=new Blob([C.body]);(0,p.saveAs)(P,O)}E&&E()},error:()=>{y&&y()}})}}return g.\u0275fac=function(n){return new(n||g)(t.LFG(m.O),t.LFG(r.m),t.LFG(t.soG))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},2910:(f,u,o)=>{o.d(u,{w:()=>p});var a=o(4650),t=o(9845);let p=(()=>{class e{constructor(r){this.httpService=r}getSystemReport(){return this.httpService.get("/magic/system/diagnostics/system-information")}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(t.O))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6949:(f,u,o)=>{o.d(u,{$:()=>p});var a=o(4650),t=o(9845);let p=(()=>{class e{constructor(r){this.httpService=r}list(r,c,g=null){let i="/magic/system/log/list?max="+c;return r&&(i+="&from="+encodeURIComponent(r)),g&&g.length>0&&(g.includes("%")||(g+="%"),i+="&query="+encodeURIComponent(g)),this.httpService.get(i)}get(r){return this.httpService.get("/magic/system/log/get?id="+r)}count(r){let c="";return r&&(c.includes("%")||(r+="%"),c+="?query="+encodeURIComponent(r)),this.httpService.get("/magic/system/log/count"+c)}createLocItem(r,c,g){return this.httpService.post("/magic/system/log/log-loc",{loc:r,type:c,name:g})}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(t.O))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3436:(f,u,o)=>{o.d(u,{N:()=>p});var a=o(4650),t=o(9845);let p=(()=>{class e{constructor(r){this.httpService=r}list(r){return this.httpService.get("/magic/system/magic/roles"+(r??""))}count(r){return this.httpService.get("/magic/system/magic/roles-count"+r)}create(r,c){return this.httpService.post("/magic/system/magic/roles",{name:r,description:c})}update(r,c){return this.httpService.put("/magic/system/magic/roles",{name:r,description:c})}delete(r){return this.httpService.delete("/magic/system/magic/roles?name="+encodeURIComponent(r))}countUsers(r){return this.httpService.get("/magic/system/magic/users_roles-count?role.eq="+encodeURIComponent(r))}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(t.O))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3278:(f,u,o)=>{o.d(u,{K:()=>p});var a=o(4650),t=o(9845);let p=(()=>{class e{constructor(r){this.httpService=r}list(r){return this.httpService.get("/magic/system/magic/users"+r)}count(r){return this.httpService.get("/magic/system/magic/users-count"+r)}create(r,c){return this.httpService.post("/magic/system/magic/users",{username:r,password:c})}update(r){return this.httpService.put("/magic/system/magic/users",{username:r.username,password:r.password,locked:r.locked})}imprison(r,c){return this.httpService.put("/magic/system/auth/imprison",{username:r,releaseDate:c})}delete(r){return this.httpService.delete("/magic/system/magic/users?username="+encodeURIComponent(r))}getRoles(r){return this.httpService.get("/magic/system/magic/users_roles?user.eq="+encodeURIComponent(r))}addRole(r,c){return this.httpService.post("/magic/system/magic/users_roles",{user:r,role:c})}removeRole(r,c){return this.httpService.delete("/magic/system/magic/users_roles?user="+encodeURIComponent(r)+"&role="+encodeURIComponent(c))}generateLoginLink(r){return this.httpService.get("/magic/system/auth/impersonate?username="+encodeURIComponent(r))}generateResetPasswordLink(r){return this.httpService.get("/magic/system/auth/reset-password?username="+encodeURIComponent(r))}getUserExtra(r){return this.httpService.get("/magic/system/magic/users_extra?user.eq="+encodeURIComponent(r))}deleteExtra(r,c){return this.httpService.delete("/magic/system/magic/users_extra?type="+encodeURIComponent(r)+"&user="+encodeURIComponent(c))}editExtra(r){return this.httpService.put("/magic/system/magic/users_extra",r)}addExtra(r){return this.httpService.post("/magic/system/magic/users_extra",r)}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(t.O))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},923:(f,u,o)=>{o.d(u,{L:()=>_});var a=o(5938),t=o(8194),p=o(9554),e=o(4650),m=o(4006),r=o(3885),c=o(7392),g=o(4859),i=o(9549),n=o(4144),s=o(266);let _=(()=>{class l{constructor(d,h,E,y){this.formBuilder=d,this.generalService=h,this.data=E,this.dialogRef=y,this.captchaForm=this.formBuilder.group({key:[""],secret:[""]}),this.CommonRegEx=t.g,this.CommonErrorMessages=p.v}ngOnInit(){this.data&&this.captchaForm.setValue({key:this.data.key,secret:this.data.secret})}submit(){this.CommonRegEx.recaptcha.test(this.captchaForm.value.key)&&this.CommonRegEx.recaptcha.test(this.captchaForm.value.secret)?this.dialogRef.close({key:this.captchaForm.value.key,secret:this.captchaForm.value.secret}):this.generalService.showFeedback("Not valid values for reCAPTCHA","errorMessage")}}return l.\u0275fac=function(d){return new(d||l)(e.Y36(m.QS),e.Y36(r.m),e.Y36(a.WI),e.Y36(a.so))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-recaptcha-dialog"]],decls:35,vars:6,consts:[["mat-dialog-title","",1,"mb-1"],[1,"text-muted","mb-4"],["target","_blank","href","https://www.google.com/recaptcha"],[3,"formGroup"],["mat-dialog-content",""],[1,"row"],[1,"col-12"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Site key",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","type","text","placeholder","Site key","formControlName","key","cdkFocusInitial","","spellcheck","false","autocomplete","off","name","key",3,"pattern"],["matPrefix","","matTooltip","Secret",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","type","text","placeholder","Secret","autocomplete","off","formControlName","secret","name","secret",3,"pattern"],["mat-dialog-actions","",3,"align"],["mat-button","","mat-dialog-close","","type","button","color","primary"],["mat-flat-button","","type","submit","color","primary",1,"px-3",3,"click"]],template:function(d,h){1&d&&(e.TgZ(0,"h3",0),e._uU(1,"reCAPTCHA settings"),e.qZA(),e.TgZ(2,"p",1),e._uU(3," Supply your reCAPTCHA settings. You can get a reCAPTCHA account "),e.TgZ(4,"a",2),e._uU(5,"here"),e.qZA(),e._uU(6,". "),e.qZA(),e.TgZ(7,"form",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"span",8)(13,"mat-icon"),e._uU(14,"key"),e.qZA(),e.TgZ(15,"span",9),e._uU(16,"|"),e.qZA()(),e._UZ(17,"input",10),e.TgZ(18,"mat-error"),e._uU(19),e.qZA()()(),e.TgZ(20,"div",6)(21,"mat-form-field",7)(22,"span",11)(23,"mat-icon"),e._uU(24,"shield"),e.qZA(),e.TgZ(25,"span",9),e._uU(26,"|"),e.qZA()(),e._UZ(27,"input",12),e.TgZ(28,"mat-error"),e._uU(29),e.qZA()()()()(),e.TgZ(30,"div",13)(31,"button",14),e._uU(32," Cancel "),e.qZA(),e.TgZ(33,"button",15),e.NdJ("click",function(){return h.submit()}),e._uU(34," Save "),e.qZA()()()),2&d&&(e.xp6(7),e.Q6J("formGroup",h.captchaForm),e.xp6(10),e.Q6J("pattern",h.CommonRegEx.recaptcha),e.xp6(2),e.Oqu(h.CommonErrorMessages.recaptcha),e.xp6(8),e.Q6J("pattern",h.CommonRegEx.recaptcha),e.xp6(2),e.Oqu(h.CommonErrorMessages.recaptcha),e.xp6(1),e.Q6J("align","end"))},dependencies:[c.Hw,g.lW,i.TO,i.KE,i.qo,n.Nt,a.ZT,a.uh,a.xY,a.H8,s.gM,m._Y,m.Fj,m.JJ,m.JL,m.c5,m.sg,m.u],styles:["a[_ngcontent-%COMP%]{text-decoration:none}"]}),l})()},2677:(f,u,o)=>{o.d(u,{u:()=>n});var a=o(4650),t=o(9627),p=o(3885),e=o(6895),m=o(1103),r=o(4006);const c=["codeeditor"];function g(s,_){if(1&s){const l=a.EpF();a.TgZ(0,"ngx-codemirror",1,2),a.NdJ("ngModelChange",function(d){a.CHM(l);const h=a.oxw();return a.KtG(h.model.hyperlambda=d)}),a.qZA()}if(2&s){const l=a.oxw();a.Q6J("ngModel",l.model.hyperlambda)("options",l.model.options)}}let n=(()=>{class s{constructor(l,v){this.vocabularyService=l,this.generalService=v,this.vocabularyLoaded=!1}ngOnInit(){window._vocabulary?this.init():this.vocabularyService.vocabulary().subscribe({next:l=>{window._vocabulary=l,this.init()},error:l=>this.generalService.showFeedback(l.error.message??l,"errorMessage")})}init(){this.vocabularyLoaded=!0,setTimeout(()=>{this.model.editor=this._editor.codeMirror,this.model.editor.doc.markClean(),this.model.editor.doc.clearHistory()},250)}}return s.\u0275fac=function(l){return new(l||s)(a.Y36(t.c),a.Y36(p.m))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-codemirror-hyperlambda"]],viewQuery:function(l,v){if(1&l&&a.Gf(c,5),2&l){let d;a.iGM(d=a.CRH())&&(v._editor=d.first)}},inputs:{model:"model"},decls:1,vars:1,consts:[["class","h-100 d-block",3,"ngModel","options","ngModelChange",4,"ngIf"],[1,"h-100","d-block",3,"ngModel","options","ngModelChange"],["codeeditor",""]],template:function(l,v){1&l&&a.YNc(0,g,2,2,"ngx-codemirror",0),2&l&&a.Q6J("ngIf",v.vocabularyLoaded)},dependencies:[e.O5,m.C,r.JJ,r.On],encapsulation:2}),s})()}}]);