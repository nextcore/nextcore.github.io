"use strict";(self.webpackChunkmagic=self.webpackChunkmagic||[]).push([[539],{9554:(S,C,r)=>{r.d(C,{v:()=>l});const l={name:"Name must be minimum 2 characters long",backendname:"Alphanumeric characters between 2 to 20 (no space).",username:"Alphanumeric between 2 and 20 characters (no space)",email:"Email must be a valid email address",confirmEmail:"Email addresses must match",confirmPassword:"Passwords must match",currentPassword:"Your password is incorrect",cloudletName:"Minimum of 5 characters, only lowercase and numbers",phone:"e.g. 1111111111",subject:"2 to 30 letters, without special characters",message:"Message cannot be less than 3 characters",appNames:"Only lowercase alphanumeric characters, dot (.), - or _ please",appNamesWithUppercaseDot:"Only alphanumeric characters, dot (.), - or _ please",appNamesWithDot:"Only lowercase alphanumeric characters, and - or _ please",appNameWithUppercase:"Accepts alphanumeric characters and _",appNameWithUppercaseHyphen:"Accepts alphanumeric characters, - and _",domain:"Domain is not valid",backend:"Backend URL must contain http://",password:"Minimum 12 characters",recaptcha:"Not valid reCAPTCHA secret or key"}},8194:(S,C,r)=>{r.d(C,{g:()=>l});const l={phone:/^[0-9 ]*$/,name:/^[a-z0-9]{2,20}$/,subject:/^.{4,1000}$/,appNames:/^[a-z0-9_.-]+$/,appNamesWithDot:/^[a-z0-9_.-]+$/,appNamesWithUppercaseDot:/^[a-zA-Z0-9_.-]+$/,appNameWithUppercase:/^[a-zA-Z0-9_]+$/,appNameWithUppercaseHyphen:/^[a-zA-Z0-9_-]+$/,domain:/(^https?:\/\/)([\w\-])+\.{1}([a-zA-Z]{2,63})([\/\w-]*)*\/?\??([^#\n\r]*)?#?([^\n\r]*)/,backend:/^https?:\/\/([\w\-.])+(:[0-9]*)?(\.\w+)?$/,email:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,password:/^.{12,}$/,recaptcha:/^([a-zA-Z-_0-9]{20,100})$/}},9311:(S,C,r)=>{r.d(C,{J:()=>u});var l=r(4650),t=r(6895);const h=function(p){return{height:p}};function s(p,g){if(1&p&&(l.TgZ(0,"div"),l._UZ(1,"div",2),l.qZA()),2&p){const m=l.oxw();l.Tol(m.colClass),l.xp6(1),l.ekj("mat-elevation-z1",m.hasShadow),l.Q6J("ngStyle",l.VKq(5,h,m.blockHeight))}}let u=(()=>{class p{constructor(){this.amount=2,this.colClass="col-12",this.blockHeight="375px",this.hasShadow=!0,this.itemsArray=[]}ngOnInit(){for(let m=0;m<this.amount;m++)this.itemsArray.push("item"+m)}}return p.\u0275fac=function(m){return new(m||p)},p.\u0275cmp=l.Xpm({type:p,selectors:[["app-loading-skeleton"]],inputs:{amount:"amount",colClass:"colClass",blockHeight:"blockHeight",hasShadow:"hasShadow"},decls:2,vars:1,consts:[[1,"row"],[3,"class",4,"ngFor","ngForOf"],[1,"block","mb-3",3,"ngStyle"]],template:function(m,_){1&m&&(l.TgZ(0,"div",0),l.YNc(1,s,2,7,"div",1),l.qZA()),2&m&&(l.xp6(1),l.Q6J("ngForOf",_.itemsArray))},dependencies:[t.sg,t.PC],styles:[".block[_ngcontent-%COMP%]{background:#eee;background:linear-gradient(90deg,#ffffff 8%,#f2f2f2 18%,#fafafa 33%);background-size:200% 100%;animation:1s shine linear infinite;border-radius:5px;border:1px solid rgba(217,217,217,.05)}@keyframes shine{to{background-position-x:-200%}}"]}),p})()},2168:(S,C,r)=>{r.d(C,{r:()=>p});var l=r(5938),t=r(4650),h=r(6895),s=r(4859);function u(_,e){if(1&_&&(t.TgZ(0,"div",6)(1,"p",7),t._uU(2),t.qZA(),t.TgZ(3,"span",8),t._uU(4),t.qZA()()),2&_){const n=e.$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.key)}}let p=(()=>{class _{constructor(n){this.data=n,this.shortkeys=g}ngOnInit(){this.prepareData()}prepareData(){this.data.type.indexOf("save")>-1&&(this.shortkeys=[...this.shortkeys,{name:"Save",key:"Alt + S"}]),this.data.type.indexOf("execute")>-1&&(this.shortkeys=[...this.shortkeys,{name:"Execute",key:"F5"}]),this.data.type.indexOf("prompt")>-1&&(this.shortkeys=[...this.shortkeys,{name:"AI based help",key:"F1"}]),this.data.type.indexOf("insertSnippet")>-1&&(this.shortkeys=[...this.shortkeys,{name:"Load snippet",key:"ALT + V"}]),this.data.type.indexOf("full")>-1&&(this.shortkeys=[...this.shortkeys,...m])}}return _.\u0275fac=function(n){return new(n||_)(t.Y36(l.WI))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-shortkeys"]],decls:8,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"row"],["class","col-xl-4 col-md-6 col-12 my-2",4,"ngFor","ngForOf"],["mat-dialog-actions","",3,"align"],["mat-button","","mat-dialog-close",""],[1,"col-xl-4","col-md-6","col-12","my-2"],[1,"mb-2","text-nowrap","text-muted"],[1,"my-0","fw-bold"]],template:function(n,o){1&n&&(t.TgZ(0,"h3",0),t._uU(1,"Shortkeys"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t.YNc(4,u,5,2,"div",3),t.qZA()(),t.TgZ(5,"div",4)(6,"button",5),t._uU(7," Close "),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",o.shortkeys),t.xp6(1),t.Q6J("align","end"))},dependencies:[h.sg,s.lW,l.ZT,l.uh,l.xY,l.H8],encapsulation:2}),_})();const g=[{name:"Toggle fullscreen",key:"Alt + M"},{name:"Search",key:"Ctrl + F / Cmd + F"},{name:"Find next",key:"Ctrl + G / Cmd + G"},{name:"Find previous",key:"Shift + Ctrl + G / Shift + Cmd + G"},{name:"Replace",key:"Shift + Ctrl + F / Cmd + Option + F"},{name:"Replace all",key:"Shift + Ctrl + R / Shift + Cmd + Option + F"},{name:"Jump to line",key:"Alt + G"}],m=[{name:"Save File",key:"Alt + S"},{name:"Execute File or Endpoint",key:"F5"},{name:"Preview File",key:"ALT + P"},{name:"Insert snippet",key:"ALT + V"},{name:"Close File",key:"Alt + C"},{name:"Rename File",key:"Alt + R"},{name:"Rename Folder",key:"Alt + L"},{name:"Delete File",key:"Alt + D"},{name:"Delete Folder",key:"Alt + X"},{name:"Execute macro",key:"Alt + O"},{name:"New file",key:"Alt + A"},{name:"New folder",key:"Alt + B"},{name:"Show autocomplete",key:"CTRL + SPACE"},{name:"Indent",key:"TAB"},{name:"Deindent",key:"SHIFT + TAB"}]},5746:(S,C,r)=>{r.d(C,{t:()=>o});var l=r(5938),t=r(9554),h=r(8194),s=r(4650),u=r(3885),p=r(7392),g=r(4859),m=r(9549),_=r(4144),e=r(4006);const n=function(){return{standalone:!0}};let o=(()=>{class a{constructor(c,d,f){this.generalService=c,this.dialogRef=d,this.data=f,this.CommonRegEx=h.g,this.CommonErrorMessages=t.v}save(){this.validateName()&&""!==this.data?this.dialogRef.close(this.data):this.generalService.showFeedback("Invalid input.","errorMessage")}validateName(){return this.CommonRegEx.appNames.test(this.data)}}return a.\u0275fac=function(c){return new(c||a)(s.Y36(u.m),s.Y36(l.so),s.Y36(l.WI))},a.\u0275cmp=s.Xpm({type:a,selectors:[["app-snippet-name-dialog"]],decls:18,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"w-100","standaloone-field"],["matPrefix","",1,"d-flex","flex-nowrap","align-items-center","justify-content-between"],[1,"text-muted"],["matInput","","type","text","placeholder","Snippet name",3,"ngModel","ngModelOptions","pattern","ngModelChange"],["mat-dialog-actions","",3,"align"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","color","primary","type","submit",1,"px-4",3,"click"]],template:function(c,d){1&c&&(s.TgZ(0,"h3",0),s._uU(1,"Save snippet"),s.qZA(),s.TgZ(2,"form")(3,"div",1)(4,"mat-form-field",2)(5,"span",3)(6,"mat-icon"),s._uU(7,"edit"),s.qZA(),s.TgZ(8,"span",4),s._uU(9,"|"),s.qZA()(),s.TgZ(10,"input",5),s.NdJ("ngModelChange",function(v){return d.data=v}),s.qZA(),s.TgZ(11,"mat-error"),s._uU(12),s.qZA()()(),s.TgZ(13,"div",6)(14,"button",7),s._uU(15," Cancel "),s.qZA(),s.TgZ(16,"button",8),s.NdJ("click",function(){return d.save()}),s._uU(17," Create "),s.qZA()()()),2&c&&(s.xp6(10),s.Q6J("ngModel",d.data)("ngModelOptions",s.DdM(5,n))("pattern",d.CommonRegEx.appNames),s.xp6(2),s.Oqu(d.CommonErrorMessages.appNames),s.xp6(1),s.Q6J("align","end"))},dependencies:[p.Hw,g.lW,m.TO,m.KE,m.qo,_.Nt,l.ZT,l.uh,l.xY,l.H8,e._Y,e.Fj,e.JJ,e.JL,e.c5,e.On,e.F],encapsulation:2}),a})()},4428:(S,C,r)=>{r.d(C,{W:()=>t});var l=r(4650);let t=(()=>{class h{transform(u,p){if(Array.isArray(u))return u.sort(p&&""!==p?(g,m)=>{if("string"==typeof g[p]&&"string"==typeof m[p]){const _=(g[p]||"").toLowerCase(),e=(m[p]||"").toLowerCase();return _<e?-1:_>e?1:0}return 0}:(g,m)=>g<m?-1:g>m?1:0),u}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275pipe=l.Yjl({name:"sortBy",type:h,pure:!1}),h})()},3280:(S,C,r)=>{r.d(C,{a:()=>g});var l=r(2843),t=r(9751),h=r(4650),s=r(9845),u=r(9214),p=r(1565);let g=(()=>{class m{constructor(e,n,o){this.httpService=e,this.fileService=n,this.cacheService=o}executeSql(e,n,o,a,i){return this.httpService.post("/magic/system/sql/evaluate",{databaseType:e,database:n,sql:o,safeMode:a,batch:i})}defaultDatabaseType(){return this.httpService.get("/magic/system/sql/default-database-type")}connectionStrings(e){return this.httpService.get("/magic/system/sql/connection-strings?databaseType="+encodeURIComponent(e))}getDatabaseMetaInfo(e,n){return this.httpService.get("/magic/system/sql/databases?databaseType="+encodeURIComponent(e)+"&connectionString="+n)}addConnectionString(e,n,o,a=!1){return this.httpService.post("/magic/system/sql/connection-string",{databaseType:e,name:n,connectionString:o,useAsDefault:a})}deleteConnectionString(e,n){return this.httpService.delete("/magic/system/sql/connection-string?databaseType="+encodeURIComponent(e)+"&name="+encodeURIComponent(n))}listSnippets(e){return this.fileService.listFiles(`/etc/${e}/templates/`)}loadSnippet(e,n){return-1!==n.indexOf("/")?(0,l._)(()=>new Error("Not a valid filename")):((n=`/etc/${e}/templates/`+n).endsWith(".sql")||(n+=".sql"),this.fileService.loadFile(n))}saveSnippet(e,n,o){return-1!==n.indexOf("/")?(0,l._)(()=>new Error("Not a valid filename")):((n=`/etc/${e}/templates/`+n).endsWith(".sql")||(n+=".sql"),this.fileService.saveFile(n,o))}createDatabase(e,n,o){return new t.y(a=>{this.httpService.post("/magic/system/sql/ddl/database",{databaseType:e,connectionString:n,databaseName:o}).subscribe({next:i=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{a.next(i),a.complete()},error:c=>{a.error(c),a.complete()}})},error:i=>{a.error(i),a.complete()}})})}dropDatabase(e,n,o){return new t.y(a=>{this.httpService.delete("/magic/system/sql/ddl/database?databaseType="+encodeURIComponent(e)+"&connectionString="+encodeURIComponent(n)+"&databaseName="+encodeURIComponent(o)).subscribe({next:i=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{a.next(i),a.complete()},error:c=>{a.error(c),a.complete()}})},error:i=>{a.error(i),a.complete()}})})}exportDdl(e,n,o,a,i){return this.httpService.post("/magic/system/sql/ddl/export-tables",{databaseType:e,connectionString:n,databaseName:o,tables:a,full:i})}addTable(e,n,o,a,i,c,d,f){return new t.y(v=>{this.httpService.post("/magic/system/sql/ddl/table",{databaseType:e,connectionString:n,databaseName:o,tableName:a,pkName:i,pkType:c,pkLength:d,pkDefault:f}).subscribe({next:O=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{v.next(O),v.complete()},error:E=>{v.error(E),v.complete()}})},error:O=>{v.error(O),v.complete()}})})}addLinkTable(e,n,o,a){return new t.y(i=>{this.httpService.post("/magic/system/sql/ddl/link-table",{databaseType:e,connectionString:n,databaseName:o,args:a}).subscribe({next:c=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{i.next(c),i.complete()},error:d=>{i.error(d),i.complete()}})},error:c=>{i.error(c),i.complete()}})})}dropTable(e,n,o,a){return new t.y(i=>{this.httpService.delete("/magic/system/sql/ddl/table?databaseType="+encodeURIComponent(e)+"&connectionString="+encodeURIComponent(n)+"&databaseName="+encodeURIComponent(o)+"&tableName="+encodeURIComponent(a)).subscribe({next:c=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{i.next(c),i.complete()},error:d=>{i.error(d),i.complete()}})},error:c=>{i.error(c),i.complete()}})})}addColumn(e,n,o,a,i,c,d,f,v,O){return new t.y(E=>this.httpService.post("/magic/system/sql/ddl/column",{databaseType:e,connectionString:n,databaseName:o,tableName:a,columnName:i,columnType:c,defaultValue:d,nullable:f,indexed:v,columnLength:O}).subscribe({next:y=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{E.next(y),E.complete()},error:M=>{E.error(M),E.complete()}})},error:y=>{E.error(y),E.complete()}}))}addReferencedColumn(e,n,o,a,i,c,d,f,v,O,E){return new t.y(y=>{this.httpService.post("/magic/system/sql/ddl/column",{databaseType:e,connectionString:n,databaseName:o,tableName:a,columnName:i,columnType:c,foreignTable:d,foreignField:f,nullable:v,columnLength:O,cascading:E}).subscribe({next:M=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{y.next(M),y.complete()},error:D=>{y.error(D),y.complete()}})},error:M=>{y.error(M),y.complete()}})})}deleteColumn(e,n,o,a,i){return new t.y(c=>{this.httpService.delete("/magic/system/sql/ddl/column?databaseType="+encodeURIComponent(e)+"&connectionString="+encodeURIComponent(n)+"&databaseName="+encodeURIComponent(o)+"&tableName="+encodeURIComponent(a)+"&columnName="+encodeURIComponent(i)).subscribe({next:d=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{c.next(d),c.complete()},error:f=>{c.error(f),c.complete()}})},error:d=>{c.error(d),c.complete()}})})}deleteFk(e,n,o,a,i){return this.httpService.delete("/magic/system/sql/ddl/foreign-key?databaseType="+encodeURIComponent(e)+"&connectionString="+encodeURIComponent(n)+"&databaseName="+encodeURIComponent(o)+"&tableName="+encodeURIComponent(a)+"&fkName="+encodeURIComponent(i))}deleteIndex(e,n,o,a,i){return new t.y(c=>{this.httpService.delete("/magic/system/sql/ddl/index?databaseType="+encodeURIComponent(e)+"&connectionString="+encodeURIComponent(n)+"&databaseName="+encodeURIComponent(o)+"&tableName="+encodeURIComponent(a)+"&indexName="+encodeURIComponent(i)).subscribe({next:d=>{this.cacheService.delete("magic.sql.databases."+e+"."+n+".*").subscribe({next:()=>{c.next(d),c.complete()},error:f=>{c.error(f),c.complete()}})},error:d=>{c.error(d),c.complete()}})})}exportToModule(e,n,o){return this.httpService.post("/magic/system/sql/ddl/export-to-module",{databaseType:e,module:n,sql:o})}createMigrationScript(e,n,o){return this.httpService.post("/magic/system/sql/ddl/create-migration-script",{databaseType:e,module:n,sql:o})}}return m.\u0275fac=function(e){return new(e||m)(h.LFG(s.O),h.LFG(u.I),h.LFG(p.Q))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},1172:(S,C,r)=>{r.d(C,{$:()=>_});var l=r(5938),t=r(4650),h=r(3885),s=r(3280),u=r(6895),p=r(316),g=r(6338);function m(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"mat-list-option",5),t.NdJ("click",function(){const c=t.CHM(o).$implicit,d=t.oxw();return t.KtG(d.select(c))}),t._uU(1),t.qZA()}if(2&e){const o=n.$implicit,a=t.oxw();t.ekj("d-none",a.filter&&-1===o.toLowerCase().indexOf(a.filter.toLowerCase())),t.xp6(1),t.hij(" ",a.getFilename(o)," ")}}let _=(()=>{class e{constructor(o,a,i,c){this.dialogRef=o,this.generalService=a,this.sqlService=i,this.data=c,this.files=[],this.filter=null}ngOnInit(){this.sqlService.listSnippets(this.data).subscribe(o=>{this.files=o.filter(a=>a.endsWith(".sql"))},o=>this.generalService.showFeedback(o?.error?.message??o,"errorMessage"))}filterList(o){this.filter=o.searchKey}getFilename(o){const a=o.substring(o.lastIndexOf("/")+1);return a.substring(0,a.lastIndexOf("."))}select(o){this.dialogRef.close(this.getFilename(o))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.so),t.Y36(h.m),t.Y36(s.a),t.Y36(l.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-load-sql-snippet-dialog"]],decls:6,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"filterList"],["dense","",3,"multiple"],[3,"d-none","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(o,a){1&o&&(t.TgZ(0,"h3",0),t._uU(1,"Load SQL snippet"),t.qZA(),t.TgZ(2,"div",1)(3,"app-searchbox",2),t.NdJ("filterList",function(c){return a.filterList(c)}),t.qZA(),t.TgZ(4,"mat-selection-list",3),t.YNc(5,m,2,3,"mat-list-option",4),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",a.files))},dependencies:[u.sg,p.E,g.Ub,g.vS,l.uh,l.xY],encapsulation:2}),e})()},1717:(S,C,r)=>{r.d(C,{h:()=>u});var l=r(6895),t=r(4006),h=r(1103),s=r(4650);let u=(()=>{class p{}return p.\u0275fac=function(m){return new(m||p)},p.\u0275mod=s.oAB({type:p}),p.\u0275inj=s.cJS({imports:[l.ez,h.k,t.u5]}),p})()},59:(S,C,r)=>{r.d(C,{O:()=>g});var l=r(5861),t=r(4650),h=r(1103),s=r(4006);const u=["codeeditor"];let g=(()=>{class m{ngAfterViewInit(){var e=this;(0,l.Z)(function*(){for(;!e._editor||!e._editor.codeMirror;)yield new Promise(n=>setTimeout(n,100));e._editor&&e._editor.codeMirror&&(e.model.editor=e._editor.codeMirror,e.model.editor.doc.markClean(),e.model.editor.doc.clearHistory())})()}}return m.\u0275fac=function(e){return new(e||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-codemirror-sql"]],viewQuery:function(e,n){if(1&e&&t.Gf(u,5),2&e){let o;t.iGM(o=t.CRH())&&(n._editor=o.first)}},inputs:{model:"model"},decls:2,vars:2,consts:[[3,"ngModel","options","ngModelChange"],["codeeditor",""]],template:function(e,n){1&e&&(t.TgZ(0,"ngx-codemirror",0,1),t.NdJ("ngModelChange",function(a){return n.model.sql=a}),t.qZA()),2&e&&t.Q6J("ngModel",n.model.sql)("options",n.model.options)},dependencies:[h.C,s.JJ,s.On],encapsulation:2}),m})()}}]);