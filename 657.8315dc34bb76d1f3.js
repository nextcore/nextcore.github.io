"use strict";(self.webpackChunkmagic=self.webpackChunkmagic||[]).push([[657],{3231:(S,v,r)=>{r.d(v,{U:()=>_});var d=r(4650),g=r(5938),y=r(3553),M=r(3885),T=r(6895),e=r(6338),b=r(316);function p(h,x){if(1&h){const m=d.EpF();d.TgZ(0,"mat-list-option",5),d.NdJ("click",function(){const C=d.CHM(m).$implicit,F=d.oxw();return d.KtG(F.select(C))}),d._uU(1),d.qZA()}if(2&h){const m=x.$implicit,f=d.oxw();d.ekj("d-none",f.filter&&-1===m.toLowerCase().indexOf(null==f.filter?null:f.filter.toLowerCase())),d.xp6(1),d.hij(" ",f.getFilename(m)," ")}}let _=(()=>{class h{constructor(m,f,w){this.dialogRef=m,this.evaluatorService=f,this.generalService=w,this.files=[],this.filter=null}ngOnInit(){this.evaluatorService.snippets().subscribe({next:m=>{this.files=m.filter(f=>f.endsWith(".hl"))},error:m=>this.generalService.showFeedback(m?.error?.message??m,"errorMessage")})}filterList(m){this.filter=m.searchKey}getFiles(){return this.filter?this.files.filter(m=>-1!==this.getFilename(m).indexOf(this.filter)):this.files}getFilename(m){const f=m.substring(m.lastIndexOf("/")+1);return f.substring(0,f.lastIndexOf("."))}select(m){this.dialogRef.close(this.getFilename(m))}}return h.\u0275fac=function(m){return new(m||h)(d.Y36(g.so),d.Y36(y.a),d.Y36(M.m))},h.\u0275cmp=d.Xpm({type:h,selectors:[["app-load-snippet-dialog"]],decls:6,vars:2,consts:[["mat-dialog-title","",1,"mb-3"],["mat-dialog-content",""],[3,"filterList"],["dense","",3,"multiple"],[3,"d-none","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(m,f){1&m&&(d.TgZ(0,"h3",0),d._uU(1,"Load Hyperlambda snippet"),d.qZA(),d.TgZ(2,"div",1)(3,"app-searchbox",2),d.NdJ("filterList",function(C){return f.filterList(C)}),d.qZA(),d.TgZ(4,"mat-selection-list",3),d.YNc(5,p,2,3,"mat-list-option",4),d.qZA()()),2&m&&(d.xp6(4),d.Q6J("multiple",!1),d.xp6(1),d.Q6J("ngForOf",f.files))},dependencies:[T.sg,e.Ub,e.vS,g.uh,g.xY,b.E],styles:[".mat-list-option[_ngcontent-%COMP%]{height:40px}.mat-dialog-title[_ngcontent-%COMP%]{font:inherit;margin-bottom:0}.file-content[_ngcontent-%COMP%]   .mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-item-content-reverse[_ngcontent-%COMP%], .file-content[_ngcontent-%COMP%]   .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-item-content-reverse[_ngcontent-%COMP%]{word-break:break-all;height:unset;min-height:40px;font-size:14px}"]}),h})()},8588:(S,v,r)=>{r.d(v,{C:()=>e});var d=r(8266),g=r.n(d),y=r(7579);const M=JSON.parse('[{"extensions":["sql"],"options":{"mode":"text/x-mysql","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["md","txt","log","key"],"options":{"mode":"markdown","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["yml","yaml"],"options":{"mode":"text/x-yaml","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["xml","html","htm"],"options":{"mode":"application/xml","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["css"],"options":{"mode":"text/css","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["scss"],"options":{"mode":"text/x-scss","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["less"],"options":{"mode":"text/x-less","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["sass"],"options":{"mode":"text/x-sass","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["js","ts"],"options":{"mode":"text/javascript","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["json"],"options":{"mode":"application/ld+json","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["py"],"options":{"mode":"text/x-python","lineNumbers":true,"readOnly":false,"tabSize":4,"indentUnit":4,"indentAuto":true,"matchBrackets":true,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{"Shift-Tab":"indentLess","Tab":"indentMore"}}},{"extensions":["rb"],"options":{"mode":"text/x-ruby","lineNumbers":true,"readOnly":false,"tabSize":4,"indentUnit":4,"indentAuto":true,"matchBrackets":true,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{"Shift-Tab":"indentLess","Tab":"indentMore"}}},{"extensions":["sh"],"options":{"mode":"application/x-sh","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["hl","config"],"options":{"mode":"hyperlambda","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"tabSize":3,"indentUnit":3,"indentAuto":true,"extraKeys":{"Shift-Tab":"indentLess","Tab":"indentMore","Ctrl-Space":"autocomplete"}}}]');var T=r(4650);let e=(()=>{class b{constructor(_){this.ngZone=_,this.extensions=M,this.action=new y.x}getActions(_,h){let x=[];if(_){const m=_.substring(_.lastIndexOf(".")+1).toLowerCase();x=this.extensions.filter(f=>-1!==f.extensions.indexOf(m))}else h&&(x=this.extensions.filter(m=>-1!==m.extensions.indexOf(h)));if(0===x.length)return null;{const m=this.clone(x[0]);return m.options.extraKeys&&(m.options.extraKeys["Alt-M"]=f=>{f.setOption("fullScreen",!f.getOption("fullScreen"))},m.options.extraKeys["Alt-S"]=()=>{this.ngZone.run(()=>{this.action.next("save")})},m.options.extraKeys["Alt-D"]=()=>{this.ngZone.run(()=>{this.action.next("deleteFile")})},m.options.extraKeys["Alt-C"]=()=>{this.ngZone.run(()=>{this.action.next("close")})},m.options.extraKeys["Alt-R"]=()=>{this.ngZone.run(()=>{this.action.next("renameFile")})},m.options.extraKeys["Alt-L"]=()=>{this.ngZone.run(()=>{this.action.next("renameFolder")})},m.options.extraKeys["Alt-V"]=()=>{this.ngZone.run(()=>{this.action.next("insertSnippet")})},m.options.extraKeys["Alt-O"]=()=>{this.ngZone.run(()=>{this.action.next("macro")})},m.options.extraKeys["Alt-A"]=()=>{this.ngZone.run(()=>{this.action.next("newFile")})},m.options.extraKeys["Alt-B"]=()=>{this.ngZone.run(()=>{this.action.next("newFolder")})},m.options.extraKeys["Alt-X"]=()=>{this.ngZone.run(()=>{this.action.next("deleteFolder")})},m.options.extraKeys["Alt-P"]=()=>{this.ngZone.run(()=>{this.action.next("preview")})},m.options.extraKeys.F5=()=>{this.ngZone.run(()=>{this.action.next("execute")})},m.options.extraKeys.F1=()=>{this.ngZone.run(()=>{this.action.next("prompt")})},"sql"===h&&(m.options.extraKeys["Ctrl-Space"]=f=>{this.ngZone.run(()=>{f.showHint({hint:g().hint.sql,completeSingle:!1})})})),m.options}}clone(_){var h={};for(var x in _)h[x]="object"==typeof _[x]?this.clone(_[x]):_[x];return h}}return b.\u0275fac=function(_){return new(_||b)(T.LFG(T.R0b))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},3553:(S,v,r)=>{r.d(v,{a:()=>T});var d=r(2843),g=r(4650),y=r(9845),M=r(9214);let T=(()=>{class e{constructor(p,_){this.httpService=p,this.fileService=_}execute(p){return this.httpService.post("/magic/system/evaluator/evaluate",{hyperlambda:p})}snippets(){return this.fileService.listFiles("/etc/snippets/")}loadSnippet(p){return-1!==p.indexOf("/")?(0,d._)(()=>new Error("Not a valid filename")):((p="/etc/snippets/"+p).endsWith(".hl")||(p+=".hl"),this.fileService.loadFile(p))}saveSnippet(p,_){return-1!==p.indexOf("/")?(0,d._)(()=>new Error("Not a valid filename")):((p="/etc/snippets/"+p).endsWith(".hl")||(p+=".hl"),this.fileService.saveFile(p,_))}}return e.\u0275fac=function(p){return new(p||e)(g.LFG(y.O),g.LFG(M.I))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9627:(S,v,r)=>{r.d(v,{c:()=>T});var d=r(9646),g=r(9751),y=r(4650),M=r(9845);let T=(()=>{class e{constructor(p){this.httpService=p,this._vocabulary=[]}get words(){return this._vocabulary}vocabulary(){return this._vocabulary.length>0&&(0,d.of)(this._vocabulary),new g.y(p=>{this.httpService.get("/magic/system/evaluator/vocabulary").subscribe({next:_=>{this._vocabulary=_,p.next(_),p.complete()},error:_=>{p.error(_),p.complete()}})})}}return e.\u0275fac=function(p){return new(p||e)(y.LFG(M.O))},e.\u0275prov=y.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9628:(S,v,r)=>{r.r(v),r.d(v,{EndpointModule:()=>dn});var d=r(6895),g=r(4006),y=r(2278),M=r(1075),T=r(7832),e=r(4650),b=r(3848),p=r(3546),_=r(4128),h=r(9554),x=r(8194),m=r(1794),f=r(3231);class w{constructor(s,t,o,a){this.generalService=s,this.roleService=t,this.activatedRoute=o,this.sqlService=a,this.roles=[],this.isLoading=!1,this.databaseTypes=[],this.connectionStrings=[],this.databases=[],this.selectedDbType=null,this.selectedConnectionString=null,this.selectedDatabase=null}getConnectionString(s=!1){this.isLoading=!0,this.generalService.showLoading(),this.sqlService.connectionStrings(this.selectedDbType).subscribe({next:t=>{this.connectionStrings=Object.keys(t||{}),s||(this.selectedConnectionString=this.connectionStrings[0]),this.getDatabases(s)},error:t=>{this.isLoading=!1,this.generalService.hideLoading(),this.generalService.showFeedback(t?.error?.message??t,"errorMessage")}})}getDatabases(s=!1){this.isLoading=!0,this.generalService.showLoading(),this.sqlService.getDatabaseMetaInfo(this.selectedDbType,this.selectedConnectionString).subscribe({next:t=>{this.isLoading=!1,this.generalService.hideLoading(),this.databases=t.databases||[],this.databases.length>0&&(s||(this.selectedDatabase=this.databases[0].name),this.databaseLoaded())},error:t=>{this.isLoading=!1,this.generalService.hideLoading(),this.generalService.showFeedback(t?.error?.message,"errorMessage")}})}init(){this.isLoading=!0,this.activatedRoute.queryParams.subscribe(s=>{s&&s.dbName&&s.dbType&&s.dbCString&&(this.selectedDbType=s.dbType,this.selectedConnectionString=s.dbCString,this.selectedDatabase=s.dbName),this.generalService.showLoading(),this.sqlService.defaultDatabaseType().subscribe({next:t=>{this.databaseTypes=t.options.map(o=>({name:this.getDatabaseName(o),type:o})),this.selectedDbType?this.getConnectionString(!0):(this.selectedDbType=t.default,this.getConnectionString(!1))},error:t=>{this.generalService.showFeedback(t?.error?.message??t,"errorMessage")}})}),this.roleService.list().subscribe({next:s=>{this.roles=s||[]},error:s=>{this.generalService.showFeedback(s?.error?.message,"errorMessage","Ok",5e3)}})}getDatabaseName(s){switch(s){case"mssql":return"SQL Server";case"mysql":return"MySQL";case"pgsql":return"PostgreSQL";case"sqlite":return"SQLite"}}}var C=r(5938),F=r(6949),H=r(3280),B=r(7169),O=r(3885),U=r(9132),$=r(6271),ee=r(3553),V=r(3436);class te{}let W=(()=>{class n{constructor(){this.overwrite=!1,this.verbose=!1,this.join=!0}transform(t,o,a,i){const l=new te;switch(l.databaseType=t,l.database=o,l.moduleName=a.moduleName,l.moduleUrl=a.moduleUrl,l.table=a.name,l.verb=i,l.returnId=0===(a.columns||[]).filter(c=>c.primary&&!c.automatic).length,l.overwrite=this.overwrite,l.verbose=this.verbose,l.join=this.join,l.validators=a.validators,l.cqrs=a.cqrs,l.cqrsAuthorisation=a.cqrsAuthorisation,("roles"===a.cqrsAuthorisation||"groups"===a.cqrsAuthorisation||"users"===a.cqrsAuthorisation)&&(l.cqrsAuthorisationValues=a.cqrsAuthorisationValues),a.cache&&a.cache>0&&(l.cache=a.cache,l.publicCache=a.publicCache),"delete"===i&&a.logDelete&&(l.log=`${a.moduleName}.${a.name} entry deleted`),"put"===i&&a.logPut&&(l.log=`${a.moduleName}.${a.name} entry updated`),"post"===i&&a.logPost&&(l.log=`${a.moduleName}.${a.name} entry created`),"post"===i&&a.authPost&&(l.auth=a.authPost),"get"===i&&a.authGet&&(l.auth=a.authGet,l.paging=a.paging,l.sorting=a.sorting),"put"===i&&a.authPut&&(l.auth=a.authPut),"delete"===i&&a.authDelete&&(l.auth=a.authDelete),"post"===i&&a.captchaPost&&0!==a.captchaPost&&(l.captcha=a.captchaPost),"get"===i&&a.captchaGet&&0!==a.captchaGet&&(l.captcha=a.captchaGet),"put"===i&&a.captchaPut&&0!==a.captchaPut&&(l.captcha=a.captchaPut),"delete"===i&&a.captchaDelete&&0!==a.captchaDelete&&(l.captcha=a.captchaDelete),i){case"post":l.template="/system/crudifier/templates/crud.template.post.hl";break;case"get":l.template=this.verbose?"/system/crudifier/templates/crud.template.get.hl":"/system/crudifier/templates/crud.template-no-operator.get.hl";break;case"put":l.template="/system/crudifier/templates/crud.template.put.hl";break;case"delete":l.template="/system/crudifier/templates/crud.template.delete.hl";break;default:throw new Error("Oops, unknown verb")}l.args={columns:[],primary:[]};for(const c of a.columns||[])switch(i){case"post":if(c.post){const u={name:c.name,type:c.hl};c.locked&&(u.locked=c.locked),c.handling&&(u.handling=c.handling),c.foreign_key&&null!==c.foreign_key.foreign_name&&(u.foreign_key={table:c.foreign_key.foreign_table,column:c.foreign_key.foreign_column,name:c.foreign_key.foreign_name,long:c.foreign_key.long_data}),l.args.columns.push(u)}break;case"get":if(c.get){const u={name:c.name,type:c.hl};c.locked&&(u.locked=c.locked),c.handling&&(u.handling=c.handling),c.foreign_key&&null!==c.foreign_key.foreign_name&&(u.foreign_key={table:c.foreign_key.foreign_table,column:c.foreign_key.foreign_column,name:c.foreign_key.foreign_name,long:c.foreign_key.long_data}),l.args.columns.push(u)}break;case"put":if(c.put){const u={name:c.name,type:c.hl};c.locked&&(u.locked=c.locked),c.handling&&(u.handling=c.handling),c.foreign_key&&null!==c.foreign_key.foreign_name&&(u.foreign_key={table:c.foreign_key.foreign_table,column:c.foreign_key.foreign_column,name:c.foreign_key.foreign_name,long:c.foreign_key.long_data}),c.primary?l.args.primary.push(u):l.args.columns.push(u)}break;case"delete":c.delete?c.primary&&l.args.primary.push({[c.name]:c.hl}):c.locked&&l.args.columns.push({name:c.name,locked:c.locked})}return l}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var z=r(8588),X=r(9311),L=r(7392),N=r(4859),k=r(9549),P=r(4144),J=r(6709),K=r(266),q=r(4385),Y=r(3238),ne=r(2677),Z=r(671),D=r(8255),Q=r(6338);function oe(n,s){if(1&n&&(e.TgZ(0,"mat-list-option",7),e._uU(1),e.qZA()),2&n){const t=s.$implicit,o=e.oxw();e.ekj("selected",t.name===o.data.currentForeignKey.column)("d-none","string"!==t.hl),e.Q6J("value",t.name),e.xp6(1),e.AsE(" ",o.data.currentForeignKey.foreign_table,".",t.name," ")}}function ae(n,s){if(1&n&&(e.TgZ(0,"mat-list-item",8),e.NdJ("click",function(o){return o.stopPropagation()}),e._uU(1),e.qZA()),2&n){const t=s.$implicit,o=e.oxw();e.ekj("d-none","string"===t.hl),e.xp6(1),e.AsE(" ",o.data.currentForeignKey.foreign_table,".",t.name," ")}}let ie=(()=>{class n{constructor(){this.changeForeignKey=new e.vpe,this.fkList=[],this.foreignKey=[]}ngAfterViewInit(){const t=this.data.databases.find(a=>a.name===this.data.selectedDatabase),o=t.tables.find(a=>a.name===this.data.selectedTable.toString());this.data.currentForeignKey=o.foreign_keys.find(a=>a.column===this.data.columnName),t.tables.map(a=>{a.name===this.data.currentForeignKey.foreign_table&&(this.fkList=a.columns)}),this.fkList&&this.fkList.length>0&&(this.foreignKey=[this.fkList.find(a=>this.data.currentForeignKey?.name?.indexOf(`${a.name}_fky`))?.name])}save(){const t={foreign_table:this.data.currentForeignKey.foreign_table,foreign_name:""!==this.foreignKey.toString()?this.foreignKey.toString():this.data.columnName,foreign_column:this.data.currentForeignKey.column,long_data:this.data.long_data};this.changeForeignKey.emit({selectedForeignKey:t,columnName:this.data.columnName})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-foreign-key-list"]],inputs:{data:"data"},outputs:{changeForeignKey:"changeForeignKey"},decls:8,vars:5,consts:[[1,"foreign-keys"],["dense","",3,"multiple","ngModel","ngModelChange","selectionChange"],[3,"selected","d-none","value",4,"ngFor","ngForOf"],["role","list","dense",""],["role","listitem","class","text-muted",3,"d-none","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","pe-3",3,"click"],["labelPosition","before","color","primary",3,"ngModel","ngModelChange"],[3,"value"],["role","listitem",1,"text-muted",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"mat-selection-list",1),e.NdJ("ngModelChange",function(i){return o.foreignKey=i})("selectionChange",function(){return o.save()}),e.YNc(2,oe,2,7,"mat-list-option",2),e.qZA(),e.TgZ(3,"mat-list",3),e.YNc(4,ae,2,4,"mat-list-item",4),e.qZA()(),e.TgZ(5,"p",5),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(6,"mat-checkbox",6),e.NdJ("ngModelChange",function(i){return o.data.long_data=i})("ngModelChange",function(){return o.save()}),e._uU(7,"Long data"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("multiple",!1)("ngModel",o.foreignKey),e.xp6(1),e.Q6J("ngForOf",o.fkList),e.xp6(2),e.Q6J("ngForOf",o.fkList),e.xp6(2),e.Q6J("ngModel",o.data.long_data))},dependencies:[d.sg,Q.i$,Q.Tg,Q.Ub,Q.vS,J.oG,g.JJ,g.On],styles:[".foreign-keys[_ngcontent-%COMP%]{max-height:400px;min-height:80px;min-width:200px;overflow:hidden auto}.foreign-keys[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px #f5f5f5;-webkit-box-shadow:inset 0 0 6px #f5f5f5;background-color:#f5f5f5}.foreign-keys[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;background-color:#f5f5f5}.foreign-keys[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#bdbdbd;border-radius:10px}.foreign-keys[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{opacity:.5}.foreign-keys[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{font-weight:700}"]}),n})();function se(n,s){1&n&&(e.TgZ(0,"th",17),e._uU(1," Name "),e.qZA())}function le(n,s){1&n&&(e.TgZ(0,"mat-icon",22),e._uU(1,"key"),e.qZA())}function re(n,s){1&n&&(e.TgZ(0,"mat-icon",23),e._uU(1,"motion_photos_off"),e.qZA())}function ce(n,s){if(1&n&&(e.TgZ(0,"td",18),e.YNc(1,le,2,0,"mat-icon",19),e.YNc(2,re,2,0,"mat-icon",20),e.TgZ(3,"span",21),e._uU(4),e.qZA()()),2&n){const t=s.$implicit;let o;e.xp6(1),e.Q6J("ngIf",!0===t.primary),e.xp6(1),e.Q6J("ngIf",!0===t.nullable&&!t.primary),e.xp6(2),e.Oqu(null!==(o=null==t?null:t.name)&&void 0!==o?o:"-")}}function me(n,s){1&n&&(e.TgZ(0,"th",17),e._uU(1," Type "),e.qZA())}function de(n,s){if(1&n&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.db+" / "+t.hl," ")}}function ge(n,s){1&n&&(e.TgZ(0,"th",24),e._uU(1," Display as "),e.qZA())}function pe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"app-foreign-key-list",32),e.NdJ("changeForeignKey",function(a){e.CHM(t);const i=e.oxw(3);return e.KtG(i.changeForeignKey(a))}),e.qZA()()}if(2&n){const t=s.data;e.xp6(1),e.Q6J("data",t)}}const ue=function(n,s,t,o,a,i){return{databases:n,selectedDatabase:s,selectedTable:t,columnName:o,foreign_keys:a,long_data:i}},_e=function(n){return{data:n}};function fe(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"button",27)(2,"div",28),e._uU(3),e.qZA()(),e.TgZ(4,"mat-menu",null,29),e.YNc(6,pe,2,1,"ng-template",30),e.qZA(),e.BQk()),2&n){const t=e.MAs(5),o=e.oxw().$implicit,a=e.oxw();let i;e.xp6(1),e.Q6J("disableRipple",!0)("matMenuTriggerFor",t)("matMenuTriggerData",e.VKq(11,_e,e.HTZ(4,ue,a.databases,a.selectedDatabase,a.selectedTable,null==o?null:o.name,a.foreign_keys,null===(i=a.fkLong[null==o?null:o.name])||void 0===i||i))),e.xp6(2),e.hij(" ",a.getForeignKeyName(o)," ")}}function he(n,s){if(1&n&&(e.TgZ(0,"td",25),e.YNc(1,fe,7,13,"ng-container",26),e.qZA()),2&n){const t=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.hasForeignKey(t))}}function xe(n,s){if(1&n&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&n){const t=s.$implicit;let o;e.xp6(1),e.AsE(" ",null!==(o=null==t?null:t.db)&&void 0!==o?o:"-"," / ",null==t?null:t.hl,"")}}function be(n,s){1&n&&(e.TgZ(0,"th",24),e._uU(1," Default "),e.qZA())}function Ce(n,s){if(1&n&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",!0===(null==t?null:t.automatic)?"Yes":"No"," ")}}function Te(n,s){1&n&&(e.TgZ(0,"th",24),e._uU(1," Template "),e.qZA())}function ve(n,s){1&n&&(e.TgZ(0,"mat-icon"),e._uU(1,"keyboard_arrow_down"),e.qZA())}function ye(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw().element,c=e.oxw(2);return e.KtG(c.changeTemplate(l,i))}),e._uU(1),e.qZA()}if(2&n){const t=s.$implicit,o=e.oxw(3);e.Q6J("matTooltip",o.getTemplateTooltip(t.key)),e.xp6(1),e.hij(" ",t.value," ")}}function Ze(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){const i=e.CHM(t).element;return i.handling="",e.KtG(i.locked=!1)}),e._uU(1," None "),e.qZA(),e.YNc(2,ye,2,2,"button",36),e.ALo(3,"keyvalue")}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,t.templateList))}}const Ae=function(n){return{element:n}};function Me(n,s){if(1&n&&(e.TgZ(0,"td",25)(1,"button",33)(2,"div",28),e._uU(3),e.YNc(4,ve,2,0,"mat-icon",26),e.qZA()(),e.TgZ(5,"mat-menu",null,34),e.YNc(7,Ze,4,3,"ng-template",30),e.qZA()()),2&n){const t=s.$implicit,o=e.MAs(6),a=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",o)("matMenuTriggerData",e.VKq(5,Ae,t))("disabled",null==t?null:t.primary),e.xp6(2),e.hij(" ",t.locked?"Locked":a.templateList[t.handling]," "),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.primary))}}function ke(n,s){1&n&&(e.TgZ(0,"th",24),e._uU(1," Create "),e.qZA())}function we(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"td",25)(1,"mat-checkbox",38),e.NdJ("ngModelChange",function(a){const l=e.CHM(t).$implicit;return e.KtG(l.post=a)}),e._uU(2," Create "),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("disabled",o.verbForColumnIsDisabled("post",t))("ngModel",t.post)}}function Se(n,s){1&n&&(e.TgZ(0,"th",24),e._uU(1," Read "),e.qZA())}function Ue(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"td",25)(1,"mat-checkbox",38),e.NdJ("ngModelChange",function(a){const l=e.CHM(t).$implicit;return e.KtG(l.get=a)}),e._uU(2," Read "),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("disabled",o.verbForColumnIsDisabled("get",t))("ngModel",t.get)}}function Le(n,s){1&n&&(e.TgZ(0,"th",24),e._uU(1," Update "),e.qZA())}function Ne(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"td",25)(1,"mat-checkbox",38),e.NdJ("ngModelChange",function(a){const l=e.CHM(t).$implicit;return e.KtG(l.put=a)}),e._uU(2," Update "),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("disabled",o.verbForColumnIsDisabled("put",t))("ngModel",t.put)}}function Je(n,s){1&n&&(e.TgZ(0,"th",24),e._uU(1," Delete "),e.qZA())}function qe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"td",25)(1,"mat-checkbox",38),e.NdJ("ngModelChange",function(a){const l=e.CHM(t).$implicit;return e.KtG(l.delete=a)}),e._uU(2," Delete "),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("disabled",o.verbForColumnIsDisabled("delete",t))("ngModel",t.delete)}}function De(n,s){1&n&&e._UZ(0,"tr",39)}function Qe(n,s){1&n&&e._UZ(0,"tr",40)}let Ge=(()=>{class n{constructor(){this.selectedTable="",this.selectedDatabase="",this.databases=[],this.displayedColumns=["name","type","key","default","template","create","read","update","delete"],this.dataSource=[],this.foreign_keys=[],this.templateList=Fe,this.fkLong={}}ngOnInit(){this.watchDbLoading()}hasForeignKey(t){return 0!==this.foreign_keys.filter(a=>a.column===t.name).length}watchDbLoading(){this.dataSource=[];const o=this.databases.find(i=>i.name===this.selectedDatabase).tables.find(i=>i.name===this.selectedTable.toString());this.foreign_keys=o.foreign_keys||[];const a=o.columns||[];this.dataSource=o.columns;for(const i of a)i.post=!(i.automatic&&i.primary),i.automatic&&"created"===i.name?.toLowerCase()&&(i.post=!1),i.get=!0,i.put=!i.automatic||i.primary,i.delete=i.primary,i.postDisabled=!1,i.getDisabled=!1,i.putDisabled=i.primary,i.deleteDisabled=!0,("user"===i.name||"username"===i.name)&&"string"===i.hl&&(i.locked=!0),("picture"===i.name?.toLowerCase()||"image"===i.name?.toLowerCase()||"photo"===i.name?.toLowerCase())&&(i.handling="image"),"file"===i.name?.toLowerCase()&&(i.handling="file"),("youtube"===i.name?.toLowerCase()||"video"===i.name?.toLowerCase())&&(i.handling="youtube"),("email"===i.name?.toLowerCase()||"mail"===i.name?.toLowerCase())&&(i.handling="email"),("url"===i.name?.toLowerCase()||"link"===i.name?.toLowerCase())&&(i.handling="url"),("phone"===i.name?.toLowerCase()||"tel"===i.name?.toLowerCase())&&(i.handling="phone")}getForeignKeyName(t){const i=this.databases.find(l=>l.name===this.selectedDatabase).tables.find(l=>l.name===this.selectedTable.toString()).columns.find(l=>l.name===t.name);return i.foreign_key?i.foreign_key.foreign_table+"."+i.foreign_key.foreign_name:"[none]"}changeForeignKey(t){const i=this.databases.find(l=>l.name===this.selectedDatabase).tables.find(l=>l.name===this.selectedTable.toString()).columns.find(l=>l.name===t.columnName);i.foreign_key=t.selectedForeignKey,this.fkLong[t.columnName]=i.foreign_key.long_data}verbForColumnIsDisabled(t,o){switch(t){case"post":return o.postDisabled;case"get":return o.getDisabled;case"put":return o.putDisabled;case"delete":return o.deleteDisabled}}changeTemplate(t,o){"locked"===o.key?(t.locked=!0,delete t.handling):(delete t.locked,t.handling=o.key)}getTemplateTooltip(t){return Oe[t]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-single-table-config"]],inputs:{selectedTable:"selectedTable",selectedDatabase:"selectedDatabase",databases:"databases"},decls:32,vars:3,consts:[[1,"table-responsive"],["mat-table","",1,"w-100","borderless","hoverable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","class","ps-0",4,"matHeaderCellDef"],["mat-cell","","class","ps-0",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","key"],["mat-header-cell","","class","text-nowrap",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","default"],["matColumnDef","template"],["matColumnDef","create"],["matColumnDef","read"],["matColumnDef","update"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"ps-0"],["mat-cell","",1,"ps-0"],["title","Primary key",4,"ngIf"],["class","flipped text-muted","title","Nullable",4,"ngIf"],[1,"name"],["title","Primary key"],["title","Nullable",1,"flipped","text-muted"],["mat-header-cell","",1,"text-nowrap"],["mat-cell",""],[4,"ngIf"],["mat-button","",1,"table-btn","w-100","ps-0",3,"disableRipple","matMenuTriggerFor","matMenuTriggerData"],[1,"d-flex","w-100","justify-content-between","align-items-center"],["editForeignKeyMenu","matMenu"],["matMenuContent",""],[1,"inner-menu","w-100"],[3,"data","changeForeignKey"],["mat-button","",1,"table-btn","w-100",3,"matMenuTriggerFor","matMenuTriggerData","disabled"],["templateMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","","matTooltipPosition","after",3,"matTooltip","click",4,"ngFor","ngForOf"],["mat-menu-item","","matTooltipPosition","after",3,"matTooltip","click"],["color","primary",3,"disabled","ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,se,2,0,"th",3),e.YNc(4,ce,5,3,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,me,2,0,"th",3),e.YNc(7,de,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,ge,2,0,"th",7),e.YNc(10,he,2,1,"td",8),e.YNc(11,xe,2,2,"td",4),e.BQk(),e.ynx(12,9),e.YNc(13,be,2,0,"th",7),e.YNc(14,Ce,2,1,"td",8),e.BQk(),e.ynx(15,10),e.YNc(16,Te,2,0,"th",7),e.YNc(17,Me,8,7,"td",8),e.BQk(),e.ynx(18,11),e.YNc(19,ke,2,0,"th",7),e.YNc(20,we,3,2,"td",8),e.BQk(),e.ynx(21,12),e.YNc(22,Se,2,0,"th",7),e.YNc(23,Ue,3,2,"td",8),e.BQk(),e.ynx(24,13),e.YNc(25,Le,2,0,"th",7),e.YNc(26,Ne,3,2,"td",8),e.BQk(),e.ynx(27,14),e.YNc(28,Je,2,0,"th",7),e.YNc(29,qe,3,2,"td",8),e.BQk(),e.YNc(30,De,1,0,"tr",15),e.YNc(31,Qe,1,0,"tr",16),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("dataSource",o.dataSource),e.xp6(29),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[d.sg,d.O5,L.Hw,N.lW,J.oG,K.gM,Z.BZ,Z.fO,Z.as,Z.w1,Z.Dz,Z.nj,Z.ge,Z.ev,Z.XQ,Z.Gk,D.VK,D.OP,D.p6,D.KA,g.JJ,g.On,ie,d.Nd],styles:[".table-btn[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}.table-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:14px;height:14px;line-height:14px;font-size:14px}.mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:20px}.mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:14px;height:14px;line-height:14px;font-size:14px;position:absolute;left:0}"]}),n})();const Fe={textarea:"Long text",image:"Image",file:"File",email:"Email",url:"URL",youtube:"YouTube",phone:"Phone",username_lookup:"Username lookup",locked:"Locked"},Oe={textarea:"Field will be treated as a multi line textarea when generating a frontend",image:"Field will be treated as a database stored image when generating a frontend allowing the user to upload an image to the field",file:"Field will be treated as a database stored file when generating a frontend allowing the user to upload a file to the field",email:"Field will be treated as an email address and result in an email hyperlink when generating a frontend",url:"Field will be treated as a URL and result in a hyperlink when generating a frontend",youtube:"Field will be treated as a YouTube video and embedded as a video when generating a frontend",phone:"Field will be treated as a phone number when generating a frontend and result in a phone hyperlink when generating a frontend",username_lookup:"Field will be treated as a username, and result in a username lookup component when generating a frontend",locked:"Field will be locked to the currently authenticated username, applying row level security"};var I=r(4428);function Pe(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function Ke(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.type),e.xp6(1),e.Oqu(t.name)}}function Ye(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"span",24)(2,"mat-icon"),e._uU(3,"database"),e.qZA(),e.TgZ(4,"span",25),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",26),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedDbType=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeDbType())}),e.YNc(7,Ke,2,2,"mat-option",27),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectedDbType),e.xp6(1),e.Q6J("ngForOf",t.databaseTypes)}}function Ie(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function Ee(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Re(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"span",29)(2,"mat-icon"),e._uU(3,"conversion_path"),e.qZA(),e.TgZ(4,"span",25),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",30),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedConnectionString=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeConnectionString())}),e.YNc(7,Ee,2,2,"mat-option",27),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectedConnectionString),e.xp6(1),e.Q6J("ngForOf",t.connectionStrings)}}function je(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function He(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function Be(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"span",31)(2,"mat-icon"),e._uU(3,"database"),e.qZA(),e.TgZ(4,"span",25),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",32),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedDatabase=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeDatabase())}),e.YNc(7,He,2,2,"mat-option",27),e.ALo(8,"sortBy"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectedDatabase),e.xp6(1),e.Q6J("ngForOf",e.xi3(8,2,t.databases,"name"))}}function $e(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function Ve(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.oxw();const o=e.MAs(16);e.ekj("d-none",""!==o.value&&-1===t.name.toLowerCase().indexOf(o.value.toLowerCase())),e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function We(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"span",33)(2,"mat-icon"),e._uU(3,"table"),e.qZA(),e.TgZ(4,"span",25),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",34),e.NdJ("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedTableChanged())}),e.TgZ(7,"mat-select-trigger"),e._uU(8),e.qZA(),e.TgZ(9,"div",35)(10,"span",36)(11,"mat-icon"),e._uU(12,"search"),e.qZA(),e.TgZ(13,"span",37),e._uU(14,"|"),e.qZA()(),e._UZ(15,"input",38,39),e.qZA(),e.TgZ(17,"mat-checkbox",40,41),e.NdJ("change",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleAllTables(a.checked))}),e._uU(19," All tables "),e.qZA(),e.YNc(20,Ve,2,4,"mat-option",42),e.ALo(21,"sortBy"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("formControl",t.selectedTables),e.xp6(2),e.hij(" ",null!=t.selectedTables.value&&t.selectedTables.value.length?(null==t.selectedTables.value?null:t.selectedTables.value.length)+" tables":"Nothing is selected"," "),e.xp6(9),e.Q6J("checked",t.selectedTables.value.length===t.availableTables.length)("indeterminate",t.selectedTables.value.length>0&&t.selectedTables.value.length!==t.availableTables.length),e.xp6(3),e.Q6J("ngForOf",e.xi3(21,5,t.availableTables,"name"))}}function ze(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",43)(2,"p",17),e._uU(3,"Step 2 - Configure fields"),e.qZA(),e._UZ(4,"app-single-table-config",44),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("selectedTable",t.selectedTables.value)("selectedDatabase",t.selectedDatabase)("databases",t.databases)("dbLoading",t.isLoading)}}function Xe(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function et(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function tt(n,s){if(1&n&&(e.TgZ(0,"mat-form-field",45)(1,"span",46),e._uU(2," Create "),e.qZA(),e.TgZ(3,"mat-select",47),e.YNc(4,et,2,2,"mat-option",27),e.ALo(5,"sortBy"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.createRoles),e.xp6(1),e.Q6J("ngForOf",e.xi3(5,2,t.roles,"name"))}}function nt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function ot(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function at(n,s){if(1&n&&(e.TgZ(0,"mat-form-field",45)(1,"span",48),e._uU(2," Read "),e.qZA(),e.TgZ(3,"mat-select",47),e.YNc(4,ot,2,2,"mat-option",27),e.ALo(5,"sortBy"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.readRoles),e.xp6(1),e.Q6J("ngForOf",e.xi3(5,2,t.roles,"name"))}}function it(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function st(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function lt(n,s){if(1&n&&(e.TgZ(0,"mat-form-field",45)(1,"span",49),e._uU(2," Update "),e.qZA(),e.TgZ(3,"mat-select",47),e.YNc(4,st,2,2,"mat-option",27),e.ALo(5,"sortBy"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.updateRoles),e.xp6(1),e.Q6J("ngForOf",e.xi3(5,2,t.roles,"name"))}}function rt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function ct(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function mt(n,s){if(1&n&&(e.TgZ(0,"mat-form-field",45)(1,"span",50),e._uU(2," Delete "),e.qZA(),e.TgZ(3,"mat-select",47),e.YNc(4,ct,2,2,"mat-option",27),e.ALo(5,"sortBy"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.deleteRoles),e.xp6(1),e.Q6J("ngForOf",e.xi3(5,2,t.roles,"name"))}}function dt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function gt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",51)(1,"span",52)(2,"mat-icon"),e._uU(3,"link"),e.qZA(),e.TgZ(4,"span",25),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"input",53),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.primaryURL=a)}),e.qZA(),e.TgZ(7,"mat-error"),e._uU(8),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("disabled",!(t.availableTables&&t.availableTables.length>0&&t.selectedTables.value.length>0))("name",t.selectedDatabase)("pattern",t.CommonRegEx.appNameWithUppercaseHyphen)("ngModel",t.primaryURL),e.xp6(2),e.Oqu(t.CommonErrorMessages.appNameWithUppercaseHyphen)}}function pt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",22),e.BQk())}function ut(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",51)(1,"span",55)(2,"mat-icon"),e._uU(3,"link"),e.qZA(),e.TgZ(4,"span",25),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"input",56),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw(2);return e.KtG(i.secondaryURL=a)}),e.qZA(),e.TgZ(7,"mat-error"),e._uU(8),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("pattern",t.CommonRegEx.appNameWithUppercaseHyphen)("ngModel",t.secondaryURL),e.xp6(2),e.Oqu(t.CommonErrorMessages.appNameWithUppercaseHyphen)}}function _t(n,s){if(1&n&&(e.TgZ(0,"div",54),e.YNc(1,pt,2,0,"ng-container",6),e.YNc(2,ut,9,3,"mat-form-field",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function ft(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",45)(1,"span",62),e._uU(2," reCaptcha "),e.qZA(),e.TgZ(3,"input",63),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw(2);return e.KtG(i.captchaValue=a)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.captchaValue)}}function ht(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",45)(1,"span",64),e._uU(2," Duration "),e.qZA(),e.TgZ(3,"input",65),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw(2);return e.KtG(i.cacheDuration=a)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.cacheDuration)}}function xt(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function bt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",66)(1,"span",67)(2,"mat-icon"),e._uU(3,"Message auth type"),e.qZA(),e.TgZ(4,"span",25),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",68),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw(2);return e.KtG(i.socketAuthorisationTypeValue=a)}),e.YNc(7,xt,2,2,"mat-option",27),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("ngModel",t.socketAuthorisationTypeValue),e.xp6(1),e.Q6J("ngForOf",t.socketAuthorisationTypes)}}function Ct(n,s){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function Tt(n,s){if(1&n&&(e.TgZ(0,"mat-form-field",23)(1,"span",69)(2,"mat-icon"),e._uU(3,"Message auth type"),e.qZA(),e.TgZ(4,"span",25),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",47),e.YNc(7,Ct,2,2,"mat-option",27),e.ALo(8,"sortBy"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("formControl",t.socketAuthorisationRoles),e.xp6(1),e.Q6J("ngForOf",e.xi3(8,2,t.roles,"name"))}}function vt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16)(2,"p",17),e._uU(3,"Step 4 - reCAPTCHA"),e.qZA(),e.YNc(4,ft,4,1,"mat-form-field",8),e.TgZ(5,"div",18)(6,"span",57),e._uU(7,"Apply for: "),e.qZA(),e.TgZ(8,"mat-checkbox",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.captchaCreate=a)}),e._uU(9," Create "),e.qZA(),e._UZ(10,"div",59),e.TgZ(11,"mat-checkbox",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.captchaRead=a)}),e._uU(12," Read "),e.qZA(),e._UZ(13,"div",59),e.TgZ(14,"mat-checkbox",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.captchaUpdate=a)}),e._uU(15," Update "),e.qZA(),e._UZ(16,"div",59),e.TgZ(17,"mat-checkbox",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.captchaDelete=a)}),e._uU(18," Delete "),e.qZA()()(),e.TgZ(19,"div",16)(20,"p",17),e._uU(21,"Step 5 - Caching"),e.qZA(),e.YNc(22,ht,4,1,"mat-form-field",8),e.TgZ(23,"div",18)(24,"mat-checkbox",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.cachePublic=a)}),e._uU(25," Public cache "),e.qZA()()(),e.TgZ(26,"div",60)(27,"p",17),e._uU(28,"Step 6 - Sockets (SignalR)"),e.qZA(),e.TgZ(29,"div",18)(30,"mat-checkbox",58),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.publishSocketMessages=a)}),e._uU(31," Publish socket messages "),e.qZA()(),e.YNc(32,bt,8,2,"mat-form-field",61),e.YNc(33,Tt,9,5,"mat-form-field",7),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",!t.isLoading),e.xp6(4),e.Q6J("ngModel",t.captchaCreate),e.xp6(3),e.Q6J("ngModel",t.captchaRead),e.xp6(3),e.Q6J("ngModel",t.captchaUpdate),e.xp6(3),e.Q6J("ngModel",t.captchaDelete),e.xp6(5),e.Q6J("ngIf",!t.isLoading),e.xp6(2),e.Q6J("ngModel",t.cachePublic),e.xp6(6),e.Q6J("ngModel",t.publishSocketMessages),e.xp6(2),e.Q6J("ngIf",t.publishSocketMessages),e.xp6(1),e.Q6J("ngIf",t.publishSocketMessages&&"roles"===t.socketAuthorisationTypeValue)}}function yt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",70)(2,"div",71)(3,"p",2),e._uU(4,"Step 8 - Additional POST/PUT Hyperlambda"),e.qZA(),e.TgZ(5,"div")(6,"button",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.loadSnippet())}),e._uU(7," Snippets "),e.qZA()()()(),e.TgZ(8,"div",1)(9,"app-codemirror-hyperlambda",73),e.NdJ("modelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.hlInput=a)}),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(9),e.Q6J("model",t.hlInput)}}let Zt=(()=>{class n extends w{constructor(t,o,a,i,l,c,u,A,G,R,j,gn){super(l,G,c,a),this.dialog=t,this.logService=o,this.sqlService=a,this.messageService=i,this.generalService=l,this.activatedRoute=c,this.crudifyService=u,this.evaluatorService=A,this.roleService=G,this.transformService=R,this.codemirrorActionsService=j,this.locale=gn,this.CommonRegEx=x.g,this.CommonErrorMessages=h.v,this.selectedTables=new g.NI(""),this.readRoles=new g.NI(""),this.updateRoles=new g.NI(""),this.deleteRoles=new g.NI(""),this.createRoles=new g.NI(""),this.primaryURL="",this.secondaryURL="",this.paging=!0,this.sorting=!0,this.logCreate=!1,this.logUpdate=!1,this.logDelete=!1,this.captchaCreate=!1,this.captchaRead=!1,this.captchaUpdate=!1,this.captchaDelete=!1,this.cacheDuration=!1,this.cachePublic=!1,this.publishSocketMessages=!1,this.socketAuthorisationTypes=["none","inherited","roles"],this.socketAuthorisationRoles=new g.NI(""),this.availableTables=[],this.hlInput={hyperlambda:"",options:m}}ngOnInit(){this.getOptions(),this.watchForActions(),this.init()}changeDbType(){this.getConnectionString()}changeConnectionString(){this.getDatabases()}changeDatabase(){if(this.databases.find(o=>o.name===this.selectedDatabase)?.tables?.length){this.availableTables=this.databases.find(a=>a.name===this.selectedDatabase).tables;let o=this.availableTables.map(a=>a.name);this.selectedTables=new g.NI({value:o,disabled:!1}),1===this.availableTables.length&&(this.secondaryURL=this.selectedTables.value.toString().toLowerCase())}else this.selectedTables=new g.NI({value:"",disabled:!0});this.primaryURL=this.selectedDatabase}selectedTableChanged(){1===this.selectedTables.value.length&&(this.secondaryURL=this.selectedTables.value.toString().toLowerCase())}toggleAllTables(t){if(t){let o=this.availableTables.map(a=>a.name);this.selectedTables.setValue(o)}else this.selectedTables.setValue("")}generateEndpoints(){if(0==this.selectedTables.value.length)return void this.generalService.showFeedback("Please select one or more table(s) before you generate endpoints","errorMessage");this.generalService.showLoading();const t=[],o=this.databases.find(i=>i.name===this.selectedDatabase),a=o.tables.filter(i=>this.selectedTables.value.indexOf(i.name)>-1);this.createDefaultOptions(o,a);for(const i of a){for(const l of i.verbs)switch(l.generate=i.columns.filter(c=>c[l.name]).length>0,l.name){case"delete":i.logDelete=this.logDelete;break;case"post":i.logPost=this.logCreate;break;case"put":i.logPut=this.logUpdate;break;case"get":i.paging=this.paging,i.sorting=this.sorting}this.captchaCreate?i.captchaPost=this.captchaValue:delete i.captchaPost,this.captchaRead?i.captchaGet=this.captchaValue:delete i.captchaGet,this.captchaUpdate?i.captchaPut=this.captchaValue:delete i.captchaPut,this.captchaDelete?i.captchaDelete=this.captchaValue:delete i.captchaDelete,i.cqrs=this.publishSocketMessages,this.publishSocketMessages&&(i.cqrsAuthorisation=this.socketAuthorisationTypeValue,"roles"===this.socketAuthorisationTypeValue&&this.socketAuthorisationRoles.value&&(i.cqrsAuthorisationValues=this.socketAuthorisationRoles.value.join(","))),t.push(...i.verbs.filter(l=>l.generate).map(l=>this.crudifyService.crudify(this.transformService.transform(this.selectedDbType,"["+this.selectedConnectionString+"|"+this.selectedDatabase+"]",i,l.name))))}(0,_.D)(t).subscribe({next:i=>{const l=i.reduce((c,u)=>c+u.loc,0);this.logService.createLocItem(l,"backend",`${this.selectedDatabase}`).subscribe({next:()=>{this.generalService.showFeedback(`${(0,d.uf)(l,this.locale,"1.0")} lines of code generated.`,"successMessage"),this.messageService.sendMessage({name:"magic.folders.update",content:"/modules/"}),this.generalService.hideLoading()},error:c=>{this.generalService.hideLoading(),this.generalService.showFeedback(c?.error?.message??c,"errorMessage","Ok",4e3)}})},error:i=>{this.generalService.hideLoading(),this.generalService.showFeedback(i?.error?.message??i,"errorMessage","Ok",4e3)}})}loadSnippet(){this.dialog.open(f.U,{width:"550px"}).afterClosed().subscribe(t=>{t&&(this.generalService.showLoading(),this.evaluatorService.loadSnippet(t).subscribe({next:o=>{this.generalService.hideLoading(),this.hlInput.hyperlambda=o},error:o=>{this.generalService.hideLoading(),this.generalService.showFeedback(o?.error?.message??o,"errorMessage")}}))})}ngOnDestroy(){this.codemirrorActionsSubscription?.unsubscribe()}databaseLoaded(){this.changeDatabase(),this.readRoles.setValue(["root","admin"]),this.updateRoles.setValue(["root","admin"]),this.deleteRoles.setValue(["root","admin"]),this.createRoles.setValue(["root","admin"])}watchForActions(){this.codemirrorActionsSubscription=this.codemirrorActionsService.action.subscribe(t=>{"insertSnippet"===t&&this.loadSnippet()})}getOptions(){const t=this.codemirrorActionsService.getActions("","hl");t.autofocus=!1,this.hlInput.options=t}createDefaultOptions(t,o){for(const a of o){for(const l of a.columns||[])!0===l.locked&&(l.locked="auth.ticket.get");const i=a.columns||[];if(a.verbs=[{name:"post",generate:i.length>0},{name:"get",generate:i.length>0}],i.filter(l=>!l.primary).length>0&&i.filter(l=>l.primary).length>0&&a.verbs.push({name:"put",generate:i.filter(l=>!l.primary&&!l.automatic).length>0}),i.filter(l=>l.primary).length>0&&a.verbs.push({name:"delete",generate:!0}),a.authPost=this.createRoles.value.toString(),a.authGet=this.readRoles.value.toString(),a.authPut=this.updateRoles.value.toString(),a.authDelete=this.deleteRoles.value.toString(),a.cqrsAuthorisation=!0===this.publishSocketMessages&&""!==this.socketAuthorisationTypeValue?this.socketAuthorisationTypeValue:"inherited",a.cqrsAuthorisationValues=!0===this.publishSocketMessages&&""!==this.socketAuthorisationTypeValue&&this.socketAuthorisationRoles.value.length>0?this.socketAuthorisationRoles.value.toString():null,a.cache=this.cacheDuration,a.publicCache=this.cachePublic,a.validators=this.hlInput.hyperlambda,a.moduleName=this.primaryURL,1===this.selectedTables.value.length)a.moduleUrl=this.secondaryURL;else{a.moduleUrl=a.name;for(const l of i){const c=a.foreign_keys?.filter(u=>u.column===l.name)??[];if(c.length>0){const u=t.tables.find(A=>A.name===c[0].foreign_table);u.columns.find(A=>"string"===A.hl)&&(l.foreign_key={foreign_table:c[0].foreign_table,foreign_column:c[0].foreign_column,long_data:!0,foreign_name:u.columns.filter(A=>"string"===A.hl)[0].name})}l.post=!(l.automatic&&l.primary),l.automatic&&("created"===l.name?.toLowerCase()||"last_update"===l.name?.toLowerCase())&&(l.post=!1),l.get=!0,l.put=!l.automatic||l.primary,l.delete=l.primary,l.postDisabled=!1,l.getDisabled=!1,l.putDisabled=l.primary,l.deleteDisabled=!0,("user"===l.name||"username"===l.name)&&"string"===l.hl&&(l.locked="auth.ticket.get"),("picture"===l.name?.toLowerCase()||"image"===l.name?.toLowerCase()||"photo"===l.name?.toLowerCase())&&(l.handling="image"),"file"===l.name?.toLowerCase()&&(l.handling="file"),("youtube"===l.name?.toLowerCase()||"video"===l.name?.toLowerCase())&&(l.handling="youtube"),("email"===l.name?.toLowerCase()||"mail"===l.name?.toLowerCase())&&(l.handling="email"),("url"===l.name?.toLowerCase()||"link"===l.name?.toLowerCase())&&(l.handling="url"),("phone"===l.name?.toLowerCase()||"tel"===l.name?.toLowerCase())&&(l.handling="phone")}}}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.uw),e.Y36(F.$),e.Y36(H.a),e.Y36(B.e),e.Y36(O.m),e.Y36(U.gz),e.Y36($.A),e.Y36(ee.a),e.Y36(V.N),e.Y36(W),e.Y36(z.C),e.Y36(e.soG))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-auto-endpoint-generator"]],features:[e.qOj],decls:73,vars:44,consts:[[1,"row","mt-4"],[1,"col-12"],[1,"fw-bold","mb-0"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-12"],[1,"row","align-items-stretch","mt-4"],[1,"col-md-3","col-sm-6","col-12"],[4,"ngIf"],["class","w-100",4,"ngIf"],["class","w-100 text-prefix",4,"ngIf"],[1,"col-xl-3","col-lg-4","col-md-5","col-sm-6","col-12"],["class","w-100 standalone-field",4,"ngIf"],["class","col-xl-3 col-lg-4 col-md-5 col-sm-6 col-12 mb-3",4,"ngIf"],[1,"col-auto","align-self-center"],[1,"d-flex","align-items-center","flex-wrap"],["color","primary",3,"ngModel","disabled","ngModelChange"],[1,"px-2"],[1,"col-md-6","col-12","mt-5"],[1,"fw-bold"],[1,"d-flex","align-items-center","flex-wrap","mt-1"],[1,"px-xl-5","px-lg-4","px-sm-3","px-1"],[1,"col-12","d-flex","justify-content-end","button-row","mt-4"],["mat-flat-button","","color","primary",1,"px-5",3,"disabled","click"],["amount","1","colClass","col-12","blockHeight","45px","hasShadow","false"],[1,"w-100"],["matPrefix","","matTooltip","Choose database type",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["placeholder","Database type",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matPrefix","","matTooltip","Choose connection string",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Connection string",3,"ngModel","ngModelChange","selectionChange"],["matPrefix","","matTooltip","Choose database or catalog",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Databases",3,"ngModel","ngModelChange","selectionChange"],["matPrefix","","matTooltip","Choose tables from catalog",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Tables","multiple","","disableOptionCentering","","panelClass","custom-select-option",3,"formControl","selectionChange"],[1,"d-flex","align-items-center","w-100","search-list-input"],["matPrefix","",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted","ms-2"],["matInput","","type","text","autocomplete","off"],["filterTables",""],["color","primary",1,"w-100","select-all-checkbox",3,"checked","indeterminate","change"],["allSelected",""],[3,"value","d-none",4,"ngFor","ngForOf"],[1,"col-12","mt-3"],[3,"selectedTable","selectedDatabase","databases","dbLoading"],[1,"w-100","text-prefix"],["matPrefix","","matTooltip","Roles required to invoke create endpoint(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-3"],["placeholder","Add roles","multiple","","disableOptionCentering","","panelClass","custom-select-option",3,"formControl"],["matPrefix","","matTooltip","Roles required to invoke read endpoint(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-3"],["matPrefix","","matTooltip","Roles required to invoke update endpoint(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-3"],["matPrefix","","matTooltip","Roles required to invoke delete endpoint(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-3"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Primary URL of endpoint(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","type","text","placeholder","Primary URL","autocomplete","off","required","","spellcheck","false",3,"disabled","name","pattern","ngModel","ngModelChange"],[1,"col-xl-3","col-lg-4","col-md-5","col-sm-6","col-12","mb-3"],["matPrefix","","matTooltip","Secondary URL of endpoint(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","type","text","placeholder","Secondary URL","autocomplete","off","required","","spellcheck","false",3,"pattern","ngModel","ngModelChange"],[1,"me-2"],["color","primary",3,"ngModel","ngModelChange"],[1,"px-xl-4","px-lg-3","px-sm-2","px-1"],[1,"col-md-6","col-12","mt-md-5","mt-4"],["class","w-100 mt-2",4,"ngIf"],["matPrefix","","matTooltip","reCAPTCHA value required to invoke endpoint(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-3"],["matInput","","autocomplete","off","type","number","placeholder","Value","min","0.0","max","1.0","step","0.1",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","HTTP cache duration in seconds",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-3"],["matInput","","type","number","placeholder","Value","min","0","max","300","autocomplete","off",3,"ngModel","ngModelChange"],[1,"w-100","mt-2"],["matPrefix","","matTooltip","Authorisation type for socket messages published",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Authorisation",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Roles required for user(s) to receive published socket messages",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"col-12","mt-5"],[1,"d-flex","justify-content-between","align-items-center"],["mat-button","","color","primary",3,"click"],[1,"codemirror-container",3,"model","modelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p",2),e._uU(3,"Step 1 - Choose database table(s)"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,Pe,2,0,"ng-container",6),e.YNc(8,Ye,8,2,"mat-form-field",7),e.qZA(),e.TgZ(9,"div",5),e.YNc(10,Ie,2,0,"ng-container",6),e.YNc(11,Re,8,2,"mat-form-field",7),e.qZA(),e.TgZ(12,"div",5),e.YNc(13,je,2,0,"ng-container",6),e.YNc(14,Be,9,5,"mat-form-field",7),e.qZA(),e.TgZ(15,"div",5),e.YNc(16,$e,2,0,"ng-container",6),e.YNc(17,We,22,8,"mat-form-field",7),e.qZA()()(),e.YNc(18,ze,5,4,"ng-container",6),e.TgZ(19,"div")(20,"p",2),e._uU(21),e.qZA()(),e.TgZ(22,"div",3)(23,"div",4)(24,"div",5),e.YNc(25,Xe,2,0,"ng-container",6),e.YNc(26,tt,6,5,"mat-form-field",8),e.qZA(),e.TgZ(27,"div",5),e.YNc(28,nt,2,0,"ng-container",6),e.YNc(29,at,6,5,"mat-form-field",8),e.qZA(),e.TgZ(30,"div",5),e.YNc(31,it,2,0,"ng-container",6),e.YNc(32,lt,6,5,"mat-form-field",8),e.qZA(),e.TgZ(33,"div",5),e.YNc(34,rt,2,0,"ng-container",6),e.YNc(35,mt,6,5,"mat-form-field",8),e.qZA(),e.TgZ(36,"div",9),e.YNc(37,dt,2,0,"ng-container",6),e.YNc(38,gt,9,5,"mat-form-field",10),e.qZA(),e.YNc(39,_t,3,2,"div",11),e.TgZ(40,"div",12)(41,"div",13)(42,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){return o.paging=i}),e._uU(43," Paging "),e.qZA(),e._UZ(44,"div",15),e.TgZ(45,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){return o.sorting=i}),e._uU(46," Sorting "),e.qZA(),e._UZ(47,"div",15),e.TgZ(48,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){return o.logCreate=i}),e._uU(49," Log create "),e.qZA(),e._UZ(50,"div",15),e.TgZ(51,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){return o.logUpdate=i}),e._uU(52," Log update "),e.qZA(),e._UZ(53,"div",15),e.TgZ(54,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){return o.logDelete=i}),e._uU(55," Log delete "),e.qZA()()()()(),e.YNc(56,vt,34,10,"ng-container",6),e.TgZ(57,"div",16)(58,"p",17),e._uU(59),e.qZA(),e.TgZ(60,"div",18)(61,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){return o.transformService.join=i}),e._uU(62," Left join "),e.qZA(),e._UZ(63,"div",19),e.TgZ(64,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){return o.transformService.verbose=i}),e._uU(65," Verbose filtering "),e.qZA(),e._UZ(66,"div",19),e.TgZ(67,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){return o.transformService.overwrite=i}),e._uU(68," Overwrite "),e.qZA()()(),e.YNc(69,yt,10,1,"ng-container",6),e.TgZ(70,"div",20)(71,"button",21),e.NdJ("click",function(){return o.generateEndpoints()}),e._uU(72," Generate endpoints "),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(1),e.Q6J("ngIf",1===o.selectedTables.value.length),e.xp6(1),e.Gre("col-12 mt-",1===o.selectedTables.value.length?"4":"3",""),e.xp6(2),e.hij("Step ",1===o.selectedTables.value.length?"3":"2"," - Endpoint configuration"),e.xp6(4),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(1),e.Q6J("ngIf",1===o.selectedTables.value.length),e.xp6(3),e.Q6J("ngModel",o.paging)("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)),e.xp6(3),e.Q6J("ngModel",o.sorting)("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)),e.xp6(3),e.Q6J("ngModel",o.logCreate)("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)),e.xp6(3),e.Q6J("ngModel",o.logUpdate)("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)),e.xp6(3),e.Q6J("ngModel",o.logDelete)("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)),e.xp6(2),e.Q6J("ngIf",1===o.selectedTables.value.length),e.xp6(3),e.hij("Step ",1===o.selectedTables.value.length?"7":"3"," - Settings"),e.xp6(2),e.Q6J("ngModel",o.transformService.join)("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)),e.xp6(3),e.Q6J("ngModel",o.transformService.verbose)("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)),e.xp6(3),e.Q6J("ngModel",o.transformService.overwrite)("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)),e.xp6(2),e.Q6J("ngIf",1===o.selectedTables.value.length),e.xp6(2),e.Q6J("disabled",!(o.availableTables&&o.availableTables.length>0&&o.selectedTables.value.length>0)))},dependencies:[d.sg,d.O5,X.J,L.Hw,N.lW,k.TO,k.KE,k.qo,P.Nt,J.oG,K.gM,q.gD,q.$L,Y.ey,g.Fj,g.wV,g.JJ,g.Q7,g.c5,g.qQ,g.Fd,g.On,g.oH,ne.u,Ge,I.W],encapsulation:2}),n})();var At=r(2168);function Mt(n,s){if(1&n&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let kt=(()=>{class n{constructor(t,o,a){this.generalService=t,this.dialogRef=o,this.data=a,this.types=wt,this.name="",this.selectedType="",this.CommonRegEx=x.g,this.CommonErrorMessages=h.v}ngOnInit(){this.selectedType="string"}add(){this.validateUrlName()?this.data.filter(t=>t.name===this.name).length>0?this.generalService.showFeedback("Argument already exists.","errorMessage"):this.dialogRef.close({name:this.name,type:this.selectedType}):this.generalService.showFeedback("Please give a proper name.","errorMessage")}validateUrlName(){return this.CommonRegEx.appNames.test(this.name)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.m),e.Y36(C.so),e.Y36(C.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-argument-dialog"]],decls:27,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"w-100"],["matPrefix","",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","type","text","placeholder","Name","autocomplete","off",3,"ngModel","pattern","ngModelChange"],["argName",""],["placeholder","Type",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",3,"align"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","color","primary",1,"px-4",3,"click"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"Add argument"),e.qZA(),e.TgZ(2,"div",1)(3,"mat-form-field",2)(4,"span",3)(5,"mat-icon"),e._uU(6,"edit"),e.qZA(),e.TgZ(7,"span",4),e._uU(8,"|"),e.qZA()(),e.TgZ(9,"input",5,6),e.NdJ("ngModelChange",function(i){return o.name=i}),e.qZA(),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()(),e.TgZ(13,"mat-form-field",2)(14,"span",3)(15,"mat-icon"),e._uU(16,"dehaze"),e.qZA(),e.TgZ(17,"span",4),e._uU(18,"|"),e.qZA()(),e.TgZ(19,"mat-select",7),e.NdJ("ngModelChange",function(i){return o.selectedType=i}),e.YNc(20,Mt,2,2,"mat-option",8),e.ALo(21,"sortBy"),e.qZA()()(),e.TgZ(22,"div",9)(23,"button",10),e._uU(24," Cancel "),e.qZA(),e.TgZ(25,"button",11),e.NdJ("click",function(){return o.add()}),e._uU(26," Save "),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("ngModel",o.name)("pattern",o.CommonRegEx.appNames),e.xp6(3),e.Oqu(o.CommonErrorMessages.appNames),e.xp6(7),e.Q6J("ngModel",o.selectedType),e.xp6(1),e.Q6J("ngForOf",e.xi3(21,6,o.types,"item")),e.xp6(2),e.Q6J("align","end"))},dependencies:[d.sg,L.Hw,N.lW,k.TO,k.KE,k.qo,P.Nt,C.ZT,C.uh,C.xY,C.H8,q.gD,Y.ey,g.Fj,g.JJ,g.c5,g.On,I.W],encapsulation:2}),n})();const wt=["string","long","ulong","date","bool","int","uint","short","ushort"];var St=r(1172),Ut=r(5746),E=r(7331),Lt=r(59);function Nt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",27),e.BQk())}function Jt(n,s){if(1&n&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.type),e.xp6(1),e.Oqu(t.name)}}function qt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",28)(1,"span",29)(2,"mat-icon"),e._uU(3,"database"),e.qZA(),e.TgZ(4,"span",30),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedDbType=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getConnectionString())}),e.YNc(7,Jt,2,2,"mat-option",32),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectedDbType),e.xp6(1),e.Q6J("ngForOf",t.databaseTypes)}}function Dt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",27),e.BQk())}function Qt(n,s){if(1&n&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Gt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",28)(1,"span",34)(2,"mat-icon"),e._uU(3,"conversion_path"),e.qZA(),e.TgZ(4,"span",30),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedConnectionString=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getConnectionString())}),e.YNc(7,Qt,2,2,"mat-option",32),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectedConnectionString),e.xp6(1),e.Q6J("ngForOf",t.connectionStrings)}}function Ft(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",27),e.BQk())}function Ot(n,s){if(1&n&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function Pt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",28)(1,"span",36)(2,"mat-icon"),e._uU(3,"database"),e.qZA(),e.TgZ(4,"span",30),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",37),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedDatabase=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeDatabase())}),e.YNc(7,Ot,2,2,"mat-option",32),e.ALo(8,"sortBy"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectedDatabase),e.xp6(1),e.Q6J("ngForOf",e.xi3(8,2,t.databases,"name"))}}function Kt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",27),e.BQk())}function Yt(n,s){if(1&n&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function It(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",28)(1,"span",38)(2,"mat-icon"),e._uU(3,"http"),e.qZA(),e.TgZ(4,"span",30),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",39),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedMethod=a)}),e.YNc(7,Yt,2,2,"mat-option",32),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectedMethod),e.xp6(1),e.Q6J("ngForOf",t.methods)}}function Et(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",27),e.BQk())}function Rt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",28)(1,"span",40)(2,"mat-icon"),e._uU(3,"link"),e.qZA(),e.TgZ(4,"span",30),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"input",41),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.primaryURL=a)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.primaryURL)}}function jt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",27),e.BQk())}function Ht(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",28)(1,"span",42)(2,"mat-icon"),e._uU(3,"link"),e.qZA(),e.TgZ(4,"span",30),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"input",43),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.secondaryURL=a)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.secondaryURL)}}function Bt(n,s){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",27),e.BQk())}function $t(n,s){if(1&n&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function Vt(n,s){if(1&n&&(e.TgZ(0,"mat-form-field",28)(1,"span",44)(2,"mat-icon"),e._uU(3,"shield"),e.qZA(),e.TgZ(4,"span",30),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",45),e.YNc(7,$t,2,2,"mat-option",32),e.ALo(8,"sortBy"),e.qZA()()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("formControl",t.selectedRoles),e.xp6(1),e.Q6J("ngForOf",e.xi3(8,2,t.roles,"name"))}}function Wt(n,s){1&n&&(e.ynx(0),e._uU(1," Add arguments "),e.BQk())}function zt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-chip",48),e.NdJ("removed",function(){const i=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.removeArgument(i))}),e._uU(1),e.TgZ(2,"button",49)(3,"mat-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Xt(n,s){if(1&n&&(e.TgZ(0,"mat-chip-list",46),e.YNc(1,zt,5,1,"mat-chip",47),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.arguments)}}let en=(()=>{class n extends w{constructor(t,o,a,i,l,c,u,A,G,R,j){super(l,u,A,c),this.dialog=t,this.cdr=o,this.crudifyService=a,this.messageService=i,this.generalService=l,this.sqlService=c,this.roleService=u,this.activatedRoute=A,this.transformService=G,this.codemirrorActionsService=R,this.locale=j,this.selectedRoles=new g.NI(""),this.primaryURL="",this.secondaryURL="custom-sql",this.hintTables={},this.methods=tn,this.selectedMethod="",this.overwrite=!1,this.arguments=[],this.waiting=!1,this.sql={databaseType:this.selectedDbType,connectionString:this.selectedConnectionString,database:"["+this.selectedConnectionString+"|"+this.selectedDatabase+"]",sql:"",options:[],editor:""}}ngOnInit(){this.getOptions(),this.watchForActions(),this.init()}changeDatabase(){const t=this.databases.find(o=>o.name===this.selectedDatabase);if(this.selectedDatabase&&t&&t.tables?.length){let a=this.databases.find(i=>i.name===this.selectedDatabase).tables.map(i=>[i.name,i.columns.map(l=>l.name)]);this.hintTables=Object.fromEntries(a),this.getOptions()}this.primaryURL=this.selectedDatabase.toLowerCase(),this.cdr.detectChanges()}addArgument(){this.dialog.open(kt,{width:"500px",data:this.arguments}).afterClosed().subscribe(t=>{t&&this.arguments.push(t)})}removeArgument(t){this.arguments.splice(this.arguments.indexOf(t),1)}loadSnippet(){this.dialog.open(St.$,{width:"550px",data:this.selectedDbType}).afterClosed().subscribe(t=>{t&&(this.generalService.showLoading(),this.sqlService.loadSnippet(this.selectedDbType,t).subscribe({next:o=>{this.generalService.hideLoading(),this.sql.sql=o},error:o=>{this.generalService.hideLoading(),this.generalService.showFeedback(o?.error?.message??o,"errorMessage")}}))})}generate(){if(null===this.databases.find(a=>a.name===this.selectedDatabase).tables)return void this.generalService.showFeedback("Please create tables in the selected database.","errorMessage","Ok",5e3);if(""===this.primaryURL&&""===this.secondaryURL)return void this.generalService.showFeedback("Please check URLs","errorMessage");if(""===this.selectedMethod)return void this.generalService.showFeedback("Please select an HTTP method","errorMessage");if(""===this.sql.sql.trim())return void this.generalService.showFeedback("Please add some SQL","errorMessage");this.generalService.showLoading(),this.waiting=!0;const o={databaseType:this.selectedDbType,database:this.selectedDatabase,authorization:this.selectedRoles.value.toString(),moduleName:this.primaryURL,endpointName:this.secondaryURL,verb:this.selectedMethod,sql:this.sql.sql,arguments:this.getArguments(),overwrite:this.overwrite};this.crudifyService.generateSqlEndpoint(o).subscribe({next:()=>{this.generalService.showFeedback("SQL endpoint successfully created","successMessage"),this.messageService.sendMessage({name:"magic.folders.update",content:"/modules/"}),this.generalService.hideLoading(),this.waiting=!1},error:a=>{this.generalService.hideLoading(),this.waiting=!1,this.generalService.showFeedback(a?.error?.message??a,"errorMessage","Ok",3e3)}})}viewShortkeys(){this.dialog.open(At.r,{width:"900px",data:{type:["save"]}})}ngOnDestroy(){this.codemirrorActionsSubscription&&this.codemirrorActionsSubscription.unsubscribe()}databaseLoaded(){this.changeDatabase(),this.selectedRoles.setValue(["root","admin"])}getOptions(){const t=this.codemirrorActionsService.getActions("","sql");t.autofocus=!1,t.hintOptions={tables:this.hintTables},this.sql.options=t}getArguments(){return this.arguments.map(t=>t.name+":"+t.type).join("\r\n")}saveSnippet(){this.sql?.sql&&""!==this.sql?.sql?this.dialog.open(Ut.t,{width:"550px",data:""}).afterClosed().subscribe(t=>{t&&(this.generalService.showLoading(),this.sqlService.saveSnippet(this.selectedDbType,t,this.sql.sql).subscribe({next:()=>{this.generalService.showFeedback("SQL snippet successfully saved.","successMessage"),this.generalService.hideLoading()},error:o=>{this.generalService.showFeedback(o?.error?.message??o,"errorMessage","Ok",5e3),this.generalService.hideLoading()}}))}):this.generalService.showFeedback("Write some SQL first, then save it","errorMessage")}watchForActions(){this.codemirrorActionsSubscription=this.codemirrorActionsService.action.subscribe(t=>{switch(t){case"save":this.saveSnippet();break;case"insertSnippet":this.loadSnippet()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.uw),e.Y36(e.sBO),e.Y36($.A),e.Y36(B.e),e.Y36(O.m),e.Y36(H.a),e.Y36(V.N),e.Y36(U.gz),e.Y36(W),e.Y36(z.C),e.Y36(e.soG))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sql-endpoint-generator"]],features:[e.qOj],decls:67,vars:21,consts:[[1,"row","mt-4"],[1,"col-12"],[1,"fw-bold","mb-0"],[1,"col-xxl-9","col-xl-10","col-lg-11","col-12"],[1,"row","align-items-stretch","mt-4"],[1,"col-md-4","col-sm-6","col-12"],[4,"ngIf"],["class","w-100",4,"ngIf"],[1,"col-12","mt-4"],[1,"col-md-3","col-sm-6","col-12"],[1,"row"],[1,"col-md-6","col-12"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"fw-bold","text-nowrap","my-0"],[1,"py-2"],[1,"d-flex","align-items-center","flex-wrap","mt-1"],["color","primary",3,"disabled","ngModel","ngModelChange"],["mat-button","","color","primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["hasArguments",""],[1,"col-12","mt-5"],[1,"d-flex","justify-content-between","align-items-center"],["mat-button","","color","primary",3,"click"],[1,"col-12","mt-3"],[1,"codemirror-container",3,"model","modelChange"],[1,"col-12","d-flex","justify-content-end","button-row","mt-5"],["mat-flat-button","","color","primary",1,"px-5",3,"disabled","click"],["amount","1","colClass","col-12","blockHeight","45px","hasShadow","false"],[1,"w-100"],["matPrefix","","matTooltip","Choose database type",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["placeholder","Database type",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matPrefix","","matTooltip","Choose connection string",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Connection string",3,"ngModel","ngModelChange","selectionChange"],["matPrefix","","matTooltip","Choose database or catalog",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Databases",3,"ngModel","ngModelChange","selectionChange"],["matPrefix","","matTooltip","Choose HTTP method of endpoint",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Choose method",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Primary URL of endpoint",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","type","text","placeholder","Primary URL",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Secondary URL of endpoint",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","type","text","placeholder","Secondary URL",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Role(s) required to invoke endpoint",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Role(s) required to invoke endpoint","multiple","","disableOptionCentering","","panelClass","custom-select-option",3,"formControl"],["aria-label","Arguments for endpoint"],[3,"removed",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p",2),e._uU(3,"Step 1 - Choose a database"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,Nt,2,0,"ng-container",6),e.YNc(8,qt,8,2,"mat-form-field",7),e.qZA(),e.TgZ(9,"div",5),e.YNc(10,Dt,2,0,"ng-container",6),e.YNc(11,Gt,8,2,"mat-form-field",7),e.qZA(),e.TgZ(12,"div",5),e.YNc(13,Ft,2,0,"ng-container",6),e.YNc(14,Pt,9,5,"mat-form-field",7),e.qZA()()(),e.TgZ(15,"div",8)(16,"p",2),e._uU(17,"Step 2 - Method, URL & Authorization"),e.qZA()(),e.TgZ(18,"div",3)(19,"div",4)(20,"div",9),e.YNc(21,Kt,2,0,"ng-container",6),e.YNc(22,It,8,2,"mat-form-field",7),e.qZA(),e.TgZ(23,"div",9),e.YNc(24,Et,2,0,"ng-container",6),e.YNc(25,Rt,7,1,"mat-form-field",7),e.qZA(),e.TgZ(26,"div",9),e.YNc(27,jt,2,0,"ng-container",6),e.YNc(28,Ht,7,1,"mat-form-field",7),e.qZA(),e.TgZ(29,"div",9),e.YNc(30,Bt,2,0,"ng-container",6),e.YNc(31,Vt,9,5,"mat-form-field",7),e.qZA()()(),e.TgZ(32,"div",8)(33,"div",10)(34,"div",11)(35,"div",12)(36,"p",13),e._uU(37,"Step 3 - Settings"),e.qZA(),e.TgZ(38,"div",14),e._uU(39,"\xa0"),e.qZA()(),e.TgZ(40,"div",1)(41,"div",15)(42,"mat-checkbox",16),e.NdJ("ngModelChange",function(i){return o.overwrite=i}),e._uU(43," Overwrite "),e.qZA()()()(),e.TgZ(44,"div",11)(45,"div",12)(46,"p",13),e._uU(47,"Step 4 - Arguments"),e.qZA(),e.TgZ(48,"button",17),e.NdJ("click",function(){return o.addArgument()}),e._uU(49," Add argument "),e.qZA()(),e.YNc(50,Wt,2,0,"ng-container",18),e.YNc(51,Xt,2,1,"ng-template",null,19,e.W1O),e.qZA()()(),e.TgZ(53,"div",20)(54,"div",21)(55,"p",2),e._uU(56,"Step 5 - SQL"),e.qZA(),e.TgZ(57,"div")(58,"button",22),e.NdJ("click",function(){return o.viewShortkeys()}),e._uU(59," Shortkeys "),e.qZA(),e.TgZ(60,"button",22),e.NdJ("click",function(){return o.loadSnippet()}),e._uU(61," Snippets "),e.qZA()()()(),e.TgZ(62,"div",23)(63,"app-codemirror-sql",24),e.NdJ("modelChange",function(i){return o.sql=i}),e.qZA()(),e.TgZ(64,"div",25)(65,"button",26),e.NdJ("click",function(){return o.generate()}),e._uU(66," Generate endpoints "),e.qZA()()()),2&t){const a=e.MAs(52);e.xp6(7),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(7),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(11),e.Q6J("disabled",o.isLoading)("ngModel",o.overwrite),e.xp6(6),e.Q6J("disabled",o.isLoading),e.xp6(2),e.Q6J("ngIf",o.arguments&&0===o.arguments.length)("ngIfElse",a),e.xp6(13),e.Q6J("model",o.sql),e.xp6(2),e.Q6J("disabled",o.waiting)}},dependencies:[d.sg,d.O5,X.J,L.Hw,N.lW,k.KE,k.qo,P.Nt,J.oG,K.gM,q.gD,Y.ey,E.qn,E.HS,E.qH,g.Fj,g.JJ,g.On,g.oH,Lt.O,I.W],encapsulation:2}),n})();const tn=["post","get","put","delete","patch"];function nn(n,s){1&n&&(e._uU(0," Auto "),e.TgZ(1,"span",6),e._uU(2,"endpoint"),e.qZA(),e._uU(3," generator "))}function on(n,s){if(1&n&&e._UZ(0,"app-auto-endpoint-generator",7),2&n){const t=e.oxw();e.Q6J("roles",t.roles)}}function an(n,s){1&n&&(e._uU(0," SQL "),e.TgZ(1,"span",6),e._uU(2,"endpoint "),e.qZA(),e._uU(3," generator "))}function sn(n,s){if(1&n&&e._UZ(0,"app-sql-endpoint-generator",7),2&n){const t=e.oxw();e.Q6J("roles",t.roles)}}const ln=[{path:"",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-endpoint-generator"]],decls:10,vars:0,consts:[[1,"h-100","generator"],[1,"endpoint-generator","h-100"],["mat-stretch-tabs","","dynamicHeight","","animationDuration","0ms"],["tabs",""],["mat-tab-label",""],["matTabContent",""],[1,"d-sm-inline","d-none","px-1"],[3,"roles"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-content",1)(2,"mat-tab-group",2,3)(4,"mat-tab"),e.YNc(5,nn,4,0,"ng-template",4),e.YNc(6,on,1,1,"ng-template",5),e.qZA(),e.TgZ(7,"mat-tab"),e.YNc(8,an,4,0,"ng-template",4),e.YNc(9,sn,1,1,"ng-template",5),e.qZA()()()())},dependencies:[b.SP,b.uD,b.uX,b.Vc,p.a8,p.dn,Zt,en],styles:["mat-card.generator[_ngcontent-%COMP%]{padding-bottom:.5rem!important}  .select-all-checkbox{height:3em;line-height:3em;padding:0 16px;font-weight:600}  .select-all-checkbox label{width:100%}  .select-all-checkbox .mat-checkbox-inner-container{margin-left:0}.endpoint-generator[_ngcontent-%COMP%]     .text-prefix .mat-form-field-prefix{color:#060d16}@media (max-width: 414px){  .endpoint-generator .mat-checkbox-layout .mat-checkbox-label{font-size:12px}}"]}),n})()}];let rn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[U.Bz.forChild(ln),U.Bz]}),n})();var cn=r(1103),mn=r(1717);let dn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,rn,T.K,cn.k,y.q,g.u5,g.UX,M.m,mn.h]}),n})()}}]);