(self.webpackChunkmagic=self.webpackChunkmagic||[]).push([[491],{6996:(D,E,c)=>{"use strict";c.d(E,{z:()=>k});var r=c(4006),v=c(5938),s=c(4650),w=c(3885),Z=c(6895),e=c(7392),f=c(4859),h=c(9549),_=c(4144),d=c(266);function m(L,J){if(1&L&&s._UZ(0,"p",8),2&L){const x=s.oxw();s.Q6J("innerHTML",x.data.description_extra,s.oJD)}}function g(L,J){if(1&L&&(s.TgZ(0,"mat-hint",14),s._uU(1),s.qZA()),2&L){const x=s.oxw(2);s.xp6(1),s.hij(" Inserted ",x.data.extra.fieldToBeTypedTitle," doesn't match. ")}}function u(L,J){if(1&L&&(s.ynx(0),s.TgZ(1,"mat-form-field",9)(2,"span",10)(3,"mat-icon"),s._uU(4),s.qZA(),s.TgZ(5,"span",11),s._uU(6,"|"),s.qZA()(),s._UZ(7,"input",12),s.YNc(8,g,2,1,"mat-hint",13),s.qZA(),s.BQk()),2&L){const x=s.oxw();s.xp6(2),s.MGl("matTooltip","Type in the ",x.data.extra.fieldToBeTypedTitle,""),s.xp6(2),s.Oqu(null==x.data||null==x.data.extra?null:x.data.extra.icon),s.xp6(3),s.MGl("placeholder","Type in the ",x.data.extra.fieldToBeTypedTitle,""),s.Q6J("formControl",x.inputValue),s.xp6(1),s.Q6J("ngIf",""!==x.inputValue.value&&x.data.extra.fieldToBeTypedValue!==x.inputValue.value)}}let k=(()=>{class L{constructor(x,T,A){this.generalService=x,this.dialogRef=T,this.data=A,this.inputValue=new r.NI("")}ngOnInit(){this.data.title=this.data.title??"Please confirm",this.data.description=this.data.description??"Are you sure?",this.data.action_btn_color=this.data.action_btn_color??"primary"}confirm(){!this.data.extra||!this.data.extra.details||this.inputValue.value===this.data.extra.fieldToBeTypedValue&&""!==this.inputValue.value?this.dialogRef.close("confirm"):this.generalService.showFeedback(this.data.extra.fieldToBeTypedTitle+" does not match","errorMessage",null,2e3)}}return L.\u0275fac=function(x){return new(x||L)(s.Y36(w.m),s.Y36(v.so),s.Y36(v.WI))},L.\u0275cmp=s.Xpm({type:L,selectors:[["app-confirmation-dialog"]],decls:13,vars:10,consts:[["mat-dialog-title",""],[3,"ngSubmit"],["mat-dialog-content",""],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions","",3,"align"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-flat-button","",3,"color","click"],[3,"innerHTML"],[1,"w-100"],["matPrefix","",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2",3,"matTooltip"],[1,"text-muted"],["cdkFocusInitial","","matInput","","autocomplete","off",3,"placeholder","formControl"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(x,T){1&x&&(s.TgZ(0,"h3",0),s._uU(1),s.qZA(),s.TgZ(2,"form",1),s.NdJ("ngSubmit",function(){return T.confirm()}),s.TgZ(3,"div",2)(4,"p"),s._uU(5),s.qZA(),s.YNc(6,m,1,1,"p",3),s.YNc(7,u,9,5,"ng-container",4),s.qZA(),s.TgZ(8,"div",5)(9,"button",6),s._uU(10),s.qZA(),s.TgZ(11,"button",7),s.NdJ("click",function(){return T.confirm()}),s._uU(12),s.qZA()()()),2&x&&(s.xp6(1),s.Oqu(T.data.title),s.xp6(3),s.ekj("fw-bold",T.data.bold_description),s.xp6(1),s.Oqu(T.data.description),s.xp6(1),s.Q6J("ngIf",T.data.description_extra),s.xp6(1),s.Q6J("ngIf",(null==T.data||null==T.data.extra?null:T.data.extra.details)&&"confirmInput"===(null==T.data||null==T.data.extra?null:T.data.extra.action)),s.xp6(1),s.Q6J("align","end"),s.xp6(2),s.hij(" ",T.data.close_btn||"Cancel"," "),s.xp6(1),s.s9C("color",T.data.action_btn_color),s.xp6(1),s.hij(" ",T.data.action_btn," "))},dependencies:[Z.O5,e.Hw,f.lW,h.KE,h.bx,h.qo,_.Nt,v.ZT,v.uh,v.xY,v.H8,d.gM,r._Y,r.Fj,r.JJ,r.JL,r.F,r.oH],styles:["p[_ngcontent-%COMP%]{line-height:1.8}"]}),L})()},9311:(D,E,c)=>{"use strict";c.d(E,{J:()=>Z});var r=c(4650),v=c(6895);const s=function(e){return{height:e}};function w(e,f){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"div",2),r.qZA()),2&e){const h=r.oxw();r.Tol(h.colClass),r.xp6(1),r.ekj("mat-elevation-z1",h.hasShadow),r.Q6J("ngStyle",r.VKq(5,s,h.blockHeight))}}let Z=(()=>{class e{constructor(){this.amount=2,this.colClass="col-12",this.blockHeight="375px",this.hasShadow=!0,this.itemsArray=[]}ngOnInit(){for(let h=0;h<this.amount;h++)this.itemsArray.push("item"+h)}}return e.\u0275fac=function(h){return new(h||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-loading-skeleton"]],inputs:{amount:"amount",colClass:"colClass",blockHeight:"blockHeight",hasShadow:"hasShadow"},decls:2,vars:1,consts:[[1,"row"],[3,"class",4,"ngFor","ngForOf"],[1,"block","mb-3",3,"ngStyle"]],template:function(h,_){1&h&&(r.TgZ(0,"div",0),r.YNc(1,w,2,7,"div",1),r.qZA()),2&h&&(r.xp6(1),r.Q6J("ngForOf",_.itemsArray))},dependencies:[v.sg,v.PC],styles:[".block[_ngcontent-%COMP%]{background:#eee;background:linear-gradient(90deg,#ffffff 8%,#f2f2f2 18%,#fafafa 33%);background-size:200% 100%;animation:1s shine linear infinite;border-radius:5px;border:1px solid rgba(217,217,217,.05)}@keyframes shine{to{background-position-x:-200%}}"]}),e})()},316:(D,E,c)=>{"use strict";c.d(E,{E:()=>I});var r=c(4650),v=c(4006),s=c(8372),w=c(1884),Z=c(6895),e=c(7392),f=c(4859),h=c(9549),_=c(4144),d=c(6709),m=c(266),g=c(4385),u=c(3238);function k(M,q){if(1&M){const p=r.EpF();r.TgZ(0,"mat-checkbox",10),r.NdJ("ngModelChange",function(S){r.CHM(p);const F=r.oxw();return r.KtG(F.checked=S)})("change",function(){r.CHM(p);const S=r.oxw();return r.KtG(S.filter())}),r._uU(1),r.qZA()}if(2&M){const p=r.oxw();r.Q6J("ngModel",p.checked),r.xp6(1),r.hij(" ",p.checkBoxText," ")}}function L(M,q){if(1&M&&(r.TgZ(0,"mat-option",15)(1,"span",17),r._uU(2),r.qZA()()),2&M){const p=q.$implicit;r.Q6J("value",p),r.xp6(2),r.Oqu(p)}}function J(M,q){if(1&M){const p=r.EpF();r.TgZ(0,"mat-form-field",11)(1,"span",12)(2,"mat-icon"),r._uU(3,"filter_list"),r.qZA(),r.TgZ(4,"span",13),r._uU(5,"|"),r.qZA()(),r.TgZ(6,"mat-select",14),r.NdJ("ngModelChange",function(S){r.CHM(p);const F=r.oxw();return r.KtG(F.type=S)})("selectionChange",function(){r.CHM(p);const S=r.oxw();return S.filter(),r.KtG(S.typeChanged())}),r.TgZ(7,"mat-option",15),r._uU(8," Remove filter "),r.qZA(),r.YNc(9,L,3,2,"mat-option",16),r.qZA()()}if(2&M){const p=r.oxw();r.xp6(6),r.Q6J("ngModel",p.type),r.xp6(1),r.Q6J("value",null),r.xp6(2),r.Q6J("ngForOf",p.types)}}function x(M,q){if(1&M){const p=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",function(){r.CHM(p);const S=r.oxw();return r.KtG(S.removeSearchTerm())}),r.TgZ(1,"mat-icon"),r._uU(2,"close"),r.qZA()()}}function T(M,q){if(1&M&&(r.TgZ(0,"mat-icon"),r._uU(1),r.qZA()),2&M){const p=r.oxw(2);r.xp6(1),r.Oqu(p.buttonIcon)}}function A(M,q){if(1&M){const p=r.EpF();r.TgZ(0,"button",19),r.NdJ("click",function(){r.CHM(p);const S=r.oxw();return r.KtG(S.buttonClicked())}),r.YNc(1,T,2,1,"mat-icon",20),r._uU(2),r.qZA()}if(2&M){const p=r.oxw();r.Q6J("disabled",p.buttonDisabled),r.xp6(1),r.Q6J("ngIf",p.buttonIcon),r.xp6(1),r.hij(" ",p.buttonText," ")}}function y(M,q){if(1&M){const p=r.EpF();r.TgZ(0,"button",19),r.NdJ("click",function(){r.CHM(p);const S=r.oxw();return r.KtG(S.button2Clicked())}),r._uU(1),r.qZA()}if(2&M){const p=r.oxw();r.Q6J("disabled",p.button2Disabled),r.xp6(1),r.hij(" ",p.button2Text," ")}}let I=(()=>{class M{constructor(){this.filterList=new r.vpe,this.buttonClick=new r.vpe,this.button2Click=new r.vpe,this.typeChange=new r.vpe,this.checkBoxText=null,this.buttonText=null,this.button2Text=null,this.buttonIcon=null,this.buttonDisabled=!1,this.button2Disabled=!1,this.checked=!1}ngOnInit(){this.filterControl=new v.NI(""),this.filterControl.valueChanges.pipe((0,s.b)(400),(0,w.x)()).subscribe(()=>{this.filter()})}removeSearchTerm(){this.filterControl.setValue("")}filter(){const p={};this.filterControl.value?.length>0&&(p.searchKey=this.filterControl.value),this.type&&(p.type=this.type),this.checkBoxText&&(p.checked=this.checked),this.filterList.emit(p)}typeChanged(){this.typeChange?.emit(this.type)}buttonClicked(){this.buttonClick.emit()}button2Clicked(){this.button2Click.emit()}}return M.\u0275fac=function(p){return new(p||M)},M.\u0275cmp=r.Xpm({type:M,selectors:[["app-searchbox"]],inputs:{types:"types",type:"type",checkBoxText:"checkBoxText",buttonText:"buttonText",button2Text:"button2Text",buttonIcon:"buttonIcon",buttonDisabled:"buttonDisabled",button2Disabled:"button2Disabled"},outputs:{filterList:"filterList",buttonClick:"buttonClick",button2Click:"button2Click",typeChange:"typeChange"},decls:14,vars:6,consts:[[1,"d-flex","justify-content-md-between","align-items-md-center","align-items-end","flex-md-row","w-100"],["color","primary","class","mt-md-0 mt-1 me-3",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","w-100 standalone-field me-3",4,"ngIf"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Search for item(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","placeholder","Search ...","autocomplete","off",3,"formControl"],["input",""],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","class","ms-3",3,"disabled","click",4,"ngIf"],["color","primary",1,"mt-md-0","mt-1","me-3",3,"ngModel","ngModelChange","change"],[1,"w-100","standalone-field","me-3"],["matPrefix","","matTooltip","Filter on type",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted","ms-1"],["placeholder","Type ...",3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"d-block","name-line"],["mat-icon-button","","matSuffix","",3,"click"],["mat-flat-button","","color","primary",1,"ms-3",3,"disabled","click"],[4,"ngIf"]],template:function(p,U){if(1&p&&(r.TgZ(0,"div",0),r.YNc(1,k,2,2,"mat-checkbox",1),r.YNc(2,J,10,3,"mat-form-field",2),r.TgZ(3,"mat-form-field",3)(4,"span",4)(5,"mat-icon"),r._uU(6,"search"),r.qZA(),r.TgZ(7,"span",5),r._uU(8,"|"),r.qZA()(),r._UZ(9,"input",6,7),r.YNc(11,x,3,0,"button",8),r.qZA(),r.YNc(12,A,3,3,"button",9),r.YNc(13,y,2,2,"button",9),r.qZA()),2&p){const S=r.MAs(10);r.xp6(1),r.Q6J("ngIf",U.checkBoxText),r.xp6(1),r.Q6J("ngIf",(null==U.types?null:U.types.length)>0),r.xp6(7),r.Q6J("formControl",U.filterControl),r.xp6(2),r.Q6J("ngIf",""!==S.value),r.xp6(1),r.Q6J("ngIf",U.buttonText||U.buttonIcon),r.xp6(1),r.Q6J("ngIf",U.button2Text)}},dependencies:[Z.sg,Z.O5,e.Hw,f.lW,h.KE,h.qo,h.R9,_.Nt,d.oG,m.gM,g.gD,u.ey,v.Fj,v.JJ,v.On,v.oH],encapsulation:2}),M})()},8588:(D,E,c)=>{"use strict";c.d(E,{C:()=>e});var r=c(8266),v=c.n(r),s=c(7579);const w=JSON.parse('[{"extensions":["sql"],"options":{"mode":"text/x-mysql","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["md","txt","log","key"],"options":{"mode":"markdown","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["yml","yaml"],"options":{"mode":"text/x-yaml","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["xml","html","htm"],"options":{"mode":"application/xml","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["css"],"options":{"mode":"text/css","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["scss"],"options":{"mode":"text/x-scss","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["less"],"options":{"mode":"text/x-less","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["sass"],"options":{"mode":"text/x-sass","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["js","ts"],"options":{"mode":"text/javascript","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["json"],"options":{"mode":"application/ld+json","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["py"],"options":{"mode":"text/x-python","lineNumbers":true,"readOnly":false,"tabSize":4,"indentUnit":4,"indentAuto":true,"matchBrackets":true,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{"Shift-Tab":"indentLess","Tab":"indentMore"}}},{"extensions":["rb"],"options":{"mode":"text/x-ruby","lineNumbers":true,"readOnly":false,"tabSize":4,"indentUnit":4,"indentAuto":true,"matchBrackets":true,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{"Shift-Tab":"indentLess","Tab":"indentMore"}}},{"extensions":["sh"],"options":{"mode":"application/x-sh","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"extraKeys":{}}},{"extensions":["hl","config"],"options":{"mode":"hyperlambda","lineNumbers":true,"readOnly":false,"theme":"aista","autofocus":true,"styleActiveLine":true,"tabSize":3,"indentUnit":3,"indentAuto":true,"extraKeys":{"Shift-Tab":"indentLess","Tab":"indentMore","Ctrl-Space":"autocomplete"}}}]');var Z=c(4650);let e=(()=>{class f{constructor(_){this.ngZone=_,this.extensions=w,this.action=new s.x}getActions(_,d){let m=[];if(_){const g=_.substring(_.lastIndexOf(".")+1).toLowerCase();m=this.extensions.filter(u=>-1!==u.extensions.indexOf(g))}else d&&(m=this.extensions.filter(g=>-1!==g.extensions.indexOf(d)));if(0===m.length)return null;{const g=this.clone(m[0]);return g.options.extraKeys&&(g.options.extraKeys["Alt-M"]=u=>{u.setOption("fullScreen",!u.getOption("fullScreen"))},g.options.extraKeys["Alt-S"]=()=>{this.ngZone.run(()=>{this.action.next("save")})},g.options.extraKeys["Alt-D"]=()=>{this.ngZone.run(()=>{this.action.next("deleteFile")})},g.options.extraKeys["Alt-C"]=()=>{this.ngZone.run(()=>{this.action.next("close")})},g.options.extraKeys["Alt-R"]=()=>{this.ngZone.run(()=>{this.action.next("renameFile")})},g.options.extraKeys["Alt-L"]=()=>{this.ngZone.run(()=>{this.action.next("renameFolder")})},g.options.extraKeys["Alt-V"]=()=>{this.ngZone.run(()=>{this.action.next("insertSnippet")})},g.options.extraKeys["Alt-O"]=()=>{this.ngZone.run(()=>{this.action.next("macro")})},g.options.extraKeys["Alt-A"]=()=>{this.ngZone.run(()=>{this.action.next("newFile")})},g.options.extraKeys["Alt-B"]=()=>{this.ngZone.run(()=>{this.action.next("newFolder")})},g.options.extraKeys["Alt-X"]=()=>{this.ngZone.run(()=>{this.action.next("deleteFolder")})},g.options.extraKeys["Alt-P"]=()=>{this.ngZone.run(()=>{this.action.next("preview")})},g.options.extraKeys.F5=()=>{this.ngZone.run(()=>{this.action.next("execute")})},g.options.extraKeys.F1=()=>{this.ngZone.run(()=>{this.action.next("prompt")})},"sql"===d&&(g.options.extraKeys["Ctrl-Space"]=u=>{this.ngZone.run(()=>{u.showHint({hint:v().hint.sql,completeSingle:!1})})})),g.options}}clone(_){var d={};for(var m in _)d[m]="object"==typeof _[m]?this.clone(_[m]):_[m];return d}}return f.\u0275fac=function(_){return new(_||f)(Z.LFG(Z.R0b))},f.\u0275prov=Z.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},9627:(D,E,c)=>{"use strict";c.d(E,{c:()=>Z});var r=c(9646),v=c(9751),s=c(4650),w=c(9845);let Z=(()=>{class e{constructor(h){this.httpService=h,this._vocabulary=[]}get words(){return this._vocabulary}vocabulary(){return this._vocabulary.length>0&&(0,r.of)(this._vocabulary),new v.y(h=>{this.httpService.get("/magic/system/evaluator/vocabulary").subscribe({next:_=>{this._vocabulary=_,h.next(_),h.complete()},error:_=>{h.error(_),h.complete()}})})}}return e.\u0275fac=function(h){return new(h||e)(s.LFG(w.O))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},237:(D,E,c)=>{"use strict";c.r(E),c.d(E,{MachineLearningTrainingModule:()=>kt});var r=c(6895),v=c(2278),s=c(4006),w=c(7832),Z=c(9132),e=c(4650),f=c(3848),h=c(3546),_=c(6996),d=c(5938),m=c(3885),g=c(8588),u=c(4327),k=c.n(u),L=c(9845);let J=(()=>{class i{getQueryArgs(t){let n="";for(const o in t||{})if(Object.prototype.hasOwnProperty.call(t,o)){const a=t[o];null!=a&&""!==a&&(n+=""===n?"?":"&",o.endsWith(".like")&&-1===a.indexOf("%")?n+=o+"="+encodeURIComponent(a+"%"):n+=o+"="+encodeURIComponent(a))}return n}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),x=(()=>{class i{constructor(t,n,o){this.httpService=t,this.generalService=n,this.queryArgService=o}ml_training_snippets(t){return this.httpService.get("/magic/system/magic/ml_training_snippets"+this.queryArgService.getQueryArgs(t))}ml_training_snippets_count(t){return this.httpService.get("/magic/system/magic/ml_training_snippets-count"+this.queryArgService.getQueryArgs(t))}ml_training_snippets_update(t){return this.httpService.put("/magic/system/magic/ml_training_snippets",t)}ml_training_snippets_update_all(t){return this.httpService.put("/magic/system/magic/ml_training_snippets_all",t)}ml_training_snippets_export(t){this.httpService.download("/magic/system/magic/ml_training_snippets_export"+this.queryArgService.getQueryArgs(t)).subscribe({next:n=>{let a=n.headers.get("Content-Disposition").split(";")[1].trim().split("=")[1].replace(/"/g,"");const b=new Blob([n.body]);k()(b,a)},error:n=>{this.generalService.showFeedback(n?.error?.message??n,"errorMessage")}})}ml_training_snippets_create(t){return this.httpService.post("/magic/system/magic/ml_training_snippets",t)}ml_training_snippets_delete(t){return this.httpService.delete("/magic/system/magic/ml_training_snippets?id="+t)}ml_training_snippets_delete_all(t){return this.httpService.delete("/magic/system/magic/ml_training_snippets_all"+this.queryArgService.getQueryArgs(t))}ml_types(t){return this.httpService.get("/magic/system/magic/ml_types"+this.queryArgService.getQueryArgs(t))}ml_types_count(t){return this.httpService.get("/magic/system/magic/ml_types-count"+this.queryArgService.getQueryArgs(t))}ml_types_create(t){return this.httpService.post("/magic/system/magic/ml_types",t)}ml_types_update(t){return this.httpService.put("/magic/system/magic/ml_types",t)}ml_types_delete(t){return this.httpService.delete("/magic/system/magic/ml_types?type="+encodeURIComponent(t))}ml_requests(t){return this.httpService.get("/magic/system/magic/ml_requests"+this.queryArgService.getQueryArgs(t))}ml_requests_count(t){return this.httpService.get("/magic/system/magic/ml_requests-count"+this.queryArgService.getQueryArgs(t))}ml_requests_delete(t){return this.httpService.delete("/magic/system/magic/ml_requests?id="+t)}ml_requests_update(t){return this.httpService.put("/magic/system/magic/ml_requests",t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(L.O),e.LFG(m.m),e.LFG(J))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var T=c(7392),A=c(4859),y=c(9549),I=c(4144),M=c(6709),q=c(266),p=c(4385),U=c(3238),S=c(2677);function F(i,l){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function G(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"app-codemirror-hyperlambda",23),e.NdJ("modelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.model=o)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("model",t.model)}}function z(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"mat-form-field",25)(2,"span",26)(3,"mat-icon"),e._uU(4,"featured_play_list"),e.qZA(),e.TgZ(5,"span",8),e._uU(6,"|"),e.qZA()(),e.TgZ(7,"textarea",27),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.completion=o)}),e._uU(8,"        "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.completion)}}let j=(()=>{class i{constructor(t,n,o,a,b){this.dialogRef=t,this.data=n,this.generalService=o,this.codemirrorActionsService=a,this.machineLearningTrainingService=b,this.type=null,this.types=[],this.ready=!1}ngOnInit(){this.prompt=this.data?.prompt,this.completion=this.data?.completion,this.type=this.data?.type,this.pushed=this.data?.pushed>0,this.generalService.showLoading(),this.machineLearningTrainingService.ml_types().subscribe({next:t=>{this.generalService.hideLoading(),this.types=t.map(n=>n.type),this.data?.type||(this.type=this.types.pop()),this.typeChanged()},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to delete your snippet","errorMessage")}})}typeChanged(){const t=this.codemirrorActionsService.getActions(null,this.type);t&&(t.autofocus=!1,this.model={hyperlambda:this.data.completion,options:t},setTimeout(()=>{this.ready=!0},500))}save(){const t={prompt:this.prompt,completion:this.ready?this.model.hyperlambda:this.completion,type:this.type,pushed:this.pushed?1:0};this.data&&(t.id=this.data.id),this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.so),e.Y36(d.WI),e.Y36(m.m),e.Y36(g.C),e.Y36(x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-edit-training-snippet"]],decls:33,vars:10,consts:[["mat-dialog-title","",1,"mb-0"],[3,"ngSubmit"],["mat-dialog-content",""],[1,"text-muted","text-small","mb-3"],[1,"row"],[1,"col-lg-9","col-12","pe-lg-0"],[1,"w-100","standalone-field","me-2"],["matPrefix","","matTooltip","Prompt",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","cdkFocusInitial","","placeholder","Prompt","name","prompt","autocomplete","off",3,"ngModel","ngModelChange"],[1,"col-lg-3","col-12","ps-lg-1"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Type of snippet",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2","pe-2","min-width"],["placeholder","Type of snippet","name","type",3,"ngModel","disabled","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],["class","col-12 mb-0",4,"ngIf"],["mat-dialog-actions","",3,"align"],["name","pushed","labelPosition","before","color","primary",1,"me-2",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","type","submit"],[3,"value"],[1,"col-12"],[3,"model","modelChange"],[1,"col-12","mb-0"],[1,"w-100","custom-alignment"],["matPrefix","","matTooltip","Completion for prompt",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","name","txt_completion","placeholder","Completion","rows","18",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(3,"div",2)(4,"p",3),e._uU(5),e.qZA(),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"span",7)(10,"mat-icon"),e._uU(11,"help_outline"),e.qZA(),e.TgZ(12,"span",8),e._uU(13,"|"),e.qZA()(),e.TgZ(14,"input",9),e.NdJ("ngModelChange",function(a){return n.prompt=a}),e.qZA()()(),e.TgZ(15,"div",10)(16,"mat-form-field",11)(17,"span",12)(18,"mat-icon"),e._uU(19,"list"),e.qZA(),e.TgZ(20,"span",8),e._uU(21,"|"),e.qZA()(),e.TgZ(22,"mat-select",13),e.NdJ("ngModelChange",function(a){return n.type=a})("selectionChange",function(){return n.typeChanged()}),e.YNc(23,F,2,2,"mat-option",14),e.qZA()()()(),e.YNc(24,G,2,1,"div",15),e.YNc(25,z,9,1,"div",16),e.qZA(),e.TgZ(26,"div",17)(27,"mat-checkbox",18),e.NdJ("ngModelChange",function(a){return n.pushed=a}),e._uU(28,"Pushed"),e.qZA(),e.TgZ(29,"button",19),e._uU(30," Cancel "),e.qZA(),e.TgZ(31,"button",20),e._uU(32," Save "),e.qZA()()()),2&t&&(e.xp6(1),e.hij(" ",n.data.prompt?"Edit training snippet":"New training snippet","\n"),e.xp6(4),e.hij(" ",n.data.uri," "),e.xp6(9),e.Q6J("ngModel",n.prompt),e.xp6(8),e.Q6J("ngModel",n.type)("disabled",null==n.data?null:n.data.prompt),e.xp6(1),e.Q6J("ngForOf",n.types),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",!n.ready),e.xp6(1),e.Q6J("align","end"),e.xp6(1),e.Q6J("ngModel",n.pushed))},dependencies:[r.sg,r.O5,T.Hw,A.lW,y.KE,y.qo,I.Nt,M.oG,d.ZT,d.uh,d.xY,d.H8,q.gM,p.gD,U.ey,S.u,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F],encapsulation:2}),i})();var Q=c(9554),Y=c(8194);let $=(()=>{class i{constructor(t,n,o){this.generalService=t,this.data=n,this.dialogRef=o,this.CommonRegEx=Y.g,this.CommonErrorMessages=Q.v}scrape(){this.CommonRegEx.domain.test(this.url)?this.dialogRef.close(this.url):this.generalService.showFeedback("Not a valid URL","errorMessage")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.m),e.Y36(d.WI),e.Y36(d.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-spice"]],decls:18,vars:3,consts:[["mat-dialog-title","",1,"mb-0"],[3,"ngSubmit"],["mat-dialog-content",""],[1,"text-small","text-muted","mb-3"],[1,"standalone-field","w-100"],["matPrefix","","matTooltip","Website URL to scrape for training data",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","placeholder","Website URL","name","url","autocomplete","off",3,"ngModel","ngModelChange"],["mat-dialog-actions","",3,"align"],["mat-button","","type","button","mat-dialog-close",""],["type","submit","mat-flat-button","",1,"pe-3"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return n.scrape()}),e.TgZ(3,"div",2)(4,"p",3),e._uU(5," Spice up training model by importing a single web page, such as a single WikiPedia page, etc. "),e.qZA(),e.TgZ(6,"mat-form-field",4)(7,"span",5)(8,"mat-icon"),e._uU(9,"http"),e.qZA(),e.TgZ(10,"span",6),e._uU(11,"|"),e.qZA()(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(a){return n.url=a}),e.qZA()()(),e.TgZ(13,"div",8)(14,"button",9),e._uU(15," Cancel "),e.qZA(),e.TgZ(16,"button",10),e._uU(17," Scrape "),e.qZA()()()),2&t&&(e.xp6(1),e.hij("Spice up '",n.data.type,"' model"),e.xp6(11),e.Q6J("ngModel",n.url),e.xp6(1),e.Q6J("align","end"))},dependencies:[T.Hw,A.lW,y.KE,y.qo,I.Nt,d.ZT,d.uh,d.xY,d.H8,q.gM,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F]}),i})();var N=c(6147),C=c(671),O=c(6308),R=c(8739),K=c(316),H=c(7292);function V(i,l){1&i&&(e.TgZ(0,"th",31),e._uU(1," Prompt "),e.qZA())}function X(i,l){if(1&i&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.prompt," ")}}function ee(i,l){1&i&&(e.TgZ(0,"th",31),e._uU(1," URI "),e.qZA())}function te(i,l){if(1&i&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.uri," ")}}function ne(i,l){1&i&&(e.TgZ(0,"th",34),e._uU(1," Type "),e.qZA())}function ie(i,l){if(1&i&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function ae(i,l){1&i&&(e.TgZ(0,"th",34),e._uU(1," Created "),e.qZA())}function oe(i,l){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.ALo(2,"since"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.created)," ")}}function re(i,l){1&i&&(e.TgZ(0,"th",37),e._uU(1," Pushed "),e.qZA())}function se(i,l){if(1&i&&(e.TgZ(0,"td",38),e._UZ(1,"span"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Gre("status ",t.pushed>0?"pushed ":" ","me-1 small-table-column")}}function le(i,l){1&i&&(e.TgZ(0,"th",37),e._uU(1," Vectorised "),e.qZA())}function ce(i,l){if(1&i&&(e.TgZ(0,"td",38),e._UZ(1,"span"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Gre("status ",t.embedding?"pushed ":" ","me-1 small-table-column")}}function de(i,l){1&i&&(e.TgZ(0,"th",39),e._uU(1," Actions "),e.qZA())}function me(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"td",40)(1,"button",41),e.NdJ("click",function(o){const b=e.CHM(t).$implicit,P=e.oxw();return e.KtG(P.editSnippet(o,b))}),e._uU(2," Edit "),e.qZA(),e.TgZ(3,"button",42),e.NdJ("click",function(o){const b=e.CHM(t).$implicit,P=e.oxw();return e.KtG(P.delete(o,b))}),e._uU(4," Delete "),e.qZA()()}}function pe(i,l){1&i&&e._UZ(0,"tr",43)}function ge(i,l){1&i&&e._UZ(0,"tr",44)}function he(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",45)(1,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.untrainAll())}),e._uU(2," Mark as unpushed "),e.qZA(),e.TgZ(3,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.trainAll())}),e._uU(4," Mark as pushed "),e.qZA(),e.TgZ(5,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.export())}),e._uU(6," Export "),e.qZA(),e.TgZ(7,"button",49),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteAll())}),e._uU(8," Delete all "),e.qZA()()}}let ue=(()=>{class i{constructor(t,n,o,a){this.dialog=t,this.generalService=n,this.openAiService=o,this.machineLearningTrainingService=a,this.types=null,this.dataSource=null,this.count=0,this.filter={limit:10,offset:0,order:"created",direction:"desc"},this.displayedColumns=["prompt","uri","type","created","pushed","embedding","action"]}ngOnInit(){this.type&&""!==this.type&&(this.filter["ml_training_snippets.type.eq"]=this.type),this.generalService.showLoading(),this.getTypes(!0)}create(){0!==this.types.length?this.dialog.open(j,{width:"80vw",maxWidth:"850px",data:{type:this.type}}).afterClosed().subscribe(t=>{t&&this.machineLearningTrainingService.ml_training_snippets_create(t).subscribe({next:()=>{this.generalService.showFeedback("Snippet successfully created","successMessage"),this.getTrainingData(!0)},error:n=>this.generalService.showFeedback(n?.error?.message??"Something went wrong as we tried to create your snippet","errorMessage","Ok",1e4)})}):this.generalService.showFeedback("You need to create at least one type first","errorMessage")}spice(){this.type&&""!==this.type?this.dialog.open($,{width:"80vw",maxWidth:"850px",data:{type:this.type}}).afterClosed().subscribe(t=>{t&&this.openAiService.importPage(t,this.type,150).subscribe({next:()=>{this.generalService.hideLoading()},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to spice your model","errorMessage")}})}):this.generalService.showFeedback("You need to select a model first","errorMessage")}editSnippet(t,n){const o=n.embedding;this.dialog.open(j,{width:"80vw",maxWidth:"850px",data:n}).afterClosed().subscribe(a=>{a&&(this.generalService.showLoading(),a?.id?this.machineLearningTrainingService.ml_training_snippets_update(a).subscribe({next:()=>{o?this.openAiService.vectoriseSnippet(n.id).subscribe({next:()=>{this.generalService.showFeedback("Snippet successfully updated and re-vectorised","successMessage"),this.getTrainingData(!1)},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to vectorise your snippet","errorMessage")}}):(this.generalService.showFeedback("Snippet updated successfully","successMessage"),this.getTrainingData(!1))},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to update your snippet","errorMessage")}}):this.machineLearningTrainingService.ml_training_snippets_create(a))}),t.stopPropagation()}delete(t,n){this.dialog.open(_.z,{width:"500px",data:{title:"Delete snippet",description_extra:"Are you sure you want to delete this snippet?",action_btn:"Delete",close_btn:"Cancel",action_btn_color:"warn",bold_description:!0}}).afterClosed().subscribe(o=>{"confirm"===o&&(this.generalService.showLoading(),this.machineLearningTrainingService.ml_training_snippets_delete(n.id).subscribe({next:()=>{this.generalService.showFeedback("Snippet successfully deleted","successMessage"),this.getTrainingData(!0)},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to delete your snippet","errorMessage")}}))}),t.stopPropagation()}deleteAll(){this.dialog.open(_.z,{width:"500px",data:{title:"Delete all filtered snippets",description_extra:`Do you want to delete all filtered ${this.count} snippets?`,action_btn:"Delete",close_btn:"Cancel",action_btn_color:"warn",bold_description:!0}}).afterClosed().subscribe(t=>{if("confirm"===t){this.generalService.showLoading();const n={};this.filter["ml_training_snippets.prompt.like"]?.length>0&&(n["ml_training_snippets.prompt.like"]=this.filter["ml_training_snippets.prompt.like"]),this.filter["ml_training_snippets.uri.like"]?.length>0&&(n["ml_training_snippets.uri.like"]=this.filter["ml_training_snippets.uri.like"]),this.filter["ml_training_snippets.type.eq"]?.length>0&&(n["ml_training_snippets.type.eq"]=this.filter["ml_training_snippets.type.eq"]),this.machineLearningTrainingService.ml_training_snippets_delete_all(n).subscribe({next:()=>{this.generalService.showFeedback(`${this.count} snippets successfully deleted`,"successMessage"),this.getTrainingData(!0)},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to delete your snippets","errorMessage")}})}})}untrainAll(){this.dialog.open(_.z,{width:"500px",data:{title:`Mark ${this.count} snippets as unpushed`,description_extra:`Do you want to mark ${this.count} snippets as unpushed? This will include them in your next training session!`,action_btn:"Unpush",close_btn:"Cancel",action_btn_color:"warn",bold_description:!0}}).afterClosed().subscribe(t=>{if("confirm"===t){this.generalService.showLoading();const n={values:{pushed:0},filter:{}};this.filter["ml_training_snippets.prompt.like"]?.length>0&&(n.filter["ml_training_snippets.prompt.like"]=this.filter["ml_training_snippets.prompt.like"]),this.filter["ml_training_snippets.uri.like"]?.length>0&&(n.filter["ml_training_snippets.uri.like"]=this.filter["ml_training_snippets.uri.like"]),this.filter["ml_training_snippets.type.eq"]?.length>0&&(n.filter["ml_training_snippets.type.eq"]=this.filter["ml_training_snippets.type.eq"]),this.machineLearningTrainingService.ml_training_snippets_update_all(n).subscribe({next:o=>{this.generalService.showFeedback(`${o.affected} snippets successfully updated`,"successMessage"),this.getTrainingData(!0)},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to update your snippets","errorMessage")}})}})}trainAll(){this.dialog.open(_.z,{width:"500px",data:{title:`Mark ${this.count} snippets as pushed`,description_extra:`Do you want to mark ${this.count} snippets as pushed? This will exclude them from your next training session!`,action_btn:"Push",close_btn:"Cancel",action_btn_color:"warn",bold_description:!0}}).afterClosed().subscribe(t=>{if("confirm"===t){this.generalService.showLoading();const n={values:{pushed:1},filter:{}};this.filter["ml_training_snippets.prompt.like"]?.length>0&&(n.filter["ml_training_snippets.prompt.like"]=this.filter["ml_training_snippets.prompt.like"]),this.filter["ml_training_snippets.uri.like"]?.length>0&&(n.filter["ml_training_snippets.uri.like"]=this.filter["ml_training_snippets.uri.like"]),this.filter["ml_training_snippets.type.eq"]?.length>0&&(n.filter["ml_training_snippets.type.eq"]=this.filter["ml_training_snippets.type.eq"]),this.machineLearningTrainingService.ml_training_snippets_update_all(n).subscribe({next:o=>{this.generalService.showFeedback(`${o.affected} snippets successfully updated`,"successMessage"),this.getTrainingData(!0)},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to update your snippets","errorMessage")}})}})}export(){const t={};this.filter["ml_training_snippets.prompt.like"]&&(t["ml_training_snippets.prompt.like"]=this.filter["ml_training_snippets.prompt.like"]),this.filter["ml_training_snippets.uri.like"]&&(t["ml_training_snippets.uri.like"]=this.filter["ml_training_snippets.uri.like"]),this.filter["ml_training_snippets.type.eq"]&&(t["ml_training_snippets.type.eq"]=this.filter["ml_training_snippets.type.eq"]),this.machineLearningTrainingService.ml_training_snippets_export(t)}page(t){this.filter.offset=t.pageIndex*t.pageSize,this.getTrainingData(!1)}filterList(t){const n={limit:this.filter.limit,offset:0};this.filter.order&&(n.order=this.filter.order),this.filter.direction&&(n.direction=this.filter.direction),this.filter=n,t.searchKey&&(this.filter["ml_training_snippets.prompt.like"]="%"+t.searchKey+"%",this.filter["ml_training_snippets.uri.like"]=t.searchKey+"%"),t.type&&(this.filter["ml_training_snippets.type.eq"]=t.type),this.getTrainingData(!0)}sortData(t){if(""===t.direction)return delete this.filter.order,delete this.filter.direction,void this.getTrainingData(!1);this.filter.order=t.active,this.filter.direction=t.direction,this.getTrainingData(!1)}getTypes(t=!0){this.machineLearningTrainingService.ml_types().subscribe({next:n=>{this.types=(n=n||[]).map(o=>o.type),t?this.getTrainingData():this.generalService.hideLoading()},error:n=>{this.generalService.showFeedback(n,"errorMessage","Ok"),this.generalService.hideLoading()}})}getTrainingData(t=!0){this.machineLearningTrainingService.ml_training_snippets(this.filter).subscribe({next:n=>{if(this.dataSource=n||[],!t)return void this.generalService.hideLoading();const o={};for(const a in this.filter)"limit"!==a&&"offset"!==a&&"order"!==a&&"direction"!==a&&(o[a]=this.filter[a]);this.machineLearningTrainingService.ml_training_snippets_count(o).subscribe({next:a=>{this.count=a.count,this.generalService.hideLoading()},error:a=>{this.generalService.showFeedback(a,"errorMessage","Ok"),this.generalService.hideLoading()}})},error:n=>{this.generalService.showFeedback(n,"errorMessage","Ok"),this.generalService.hideLoading()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.uw),e.Y36(m.m),e.Y36(N.A),e.Y36(x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-training-data"]],decls:37,vars:12,consts:[[1,"row","fullPage"],[1,"mt-4","col-12"],[1,"row","align-items-center","me-1"],[1,"col-lg-5","col-12","mb-lg-0","mb-2"],[1,"mb-2","fw-bold"],[1,"text-muted"],[1,"col-lg-7","col-12"],["buttonText","Add","button2Text","Spice",3,"buttonDisabled","button2Disabled","type","types","filterList","button2Click","buttonClick","typeChange"],[1,"table-responsive","mt-4"],["mat-table","","multiTemplateDataRows","","matSort","","matSortActive","created","matSortDirection","desc",1,"w-100","borderless","hoverable",3,"dataSource","matSortChange"],["matColumnDef","prompt"],["mat-header-cell","","class","text-nowrap px-sm-3","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate px-sm-3",4,"matCellDef"],["matColumnDef","uri"],["mat-cell","","class","text-truncate-2 px-sm-3",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","class","pe-sm-3 small-table-column","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","pe-sm-3 small-table-column",4,"matCellDef"],["matColumnDef","created"],["mat-cell","","class","pe-sm-3 text-nowrap small-table-column",4,"matCellDef"],["matColumnDef","pushed"],["mat-header-cell","","class","px-sm-3 small-table-column","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","ps-3",4,"matCellDef"],["matColumnDef","embedding"],["matColumnDef","action"],["mat-header-cell","","class","ps-sm-3 small-table-column",4,"matHeaderCellDef"],["mat-cell","","class","ps-sm-3 text-nowrap small-table-column",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","page"],["class","mt-3 text-end",4,"ngIf"],["mat-header-cell","","mat-sort-header","",1,"text-nowrap","px-sm-3"],["mat-cell","",1,"text-truncate","px-sm-3"],["mat-cell","",1,"text-truncate-2","px-sm-3"],["mat-header-cell","","mat-sort-header","",1,"pe-sm-3","small-table-column"],["mat-cell","",1,"pe-sm-3","small-table-column"],["mat-cell","",1,"pe-sm-3","text-nowrap","small-table-column"],["mat-header-cell","","mat-sort-header","",1,"px-sm-3","small-table-column"],["mat-cell","",1,"ps-3"],["mat-header-cell","",1,"ps-sm-3","small-table-column"],["mat-cell","",1,"ps-sm-3","text-nowrap","small-table-column"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mt-3","text-end"],["matTooltip","Mark all filtered snippets as unpushed","mat-button","",3,"click"],["matTooltip","Mark all filtered snippets as pushed","mat-button","",3,"click"],["matTooltip","Exports all filtered training snippets as a CSV file","mat-button","",3,"click"],["color","warn","matTooltip","Delete all filtered snippets","mat-button","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Machine Learning training data"),e.qZA(),e.TgZ(6,"p",5),e._uU(7," This is your Machine Learning training data, that you can use to train your own AI model to answer questions related to your problem "),e.qZA()(),e.TgZ(8,"div",6)(9,"app-searchbox",7),e.NdJ("filterList",function(a){return n.filterList(a)})("button2Click",function(){return n.spice()})("buttonClick",function(){return n.create()})("typeChange",function(a){return n.type=a}),e.qZA()()(),e.TgZ(10,"div",8)(11,"table",9),e.NdJ("matSortChange",function(a){return n.sortData(a)}),e.ynx(12,10),e.YNc(13,V,2,0,"th",11),e.YNc(14,X,2,1,"td",12),e.BQk(),e.ynx(15,13),e.YNc(16,ee,2,0,"th",11),e.YNc(17,te,2,1,"td",14),e.BQk(),e.ynx(18,15),e.YNc(19,ne,2,0,"th",16),e.YNc(20,ie,2,1,"td",17),e.BQk(),e.ynx(21,18),e.YNc(22,ae,2,0,"th",16),e.YNc(23,oe,3,3,"td",19),e.BQk(),e.ynx(24,20),e.YNc(25,re,2,0,"th",21),e.YNc(26,se,2,3,"td",22),e.BQk(),e.ynx(27,23),e.YNc(28,le,2,0,"th",21),e.YNc(29,ce,2,3,"td",22),e.BQk(),e.ynx(30,24),e.YNc(31,de,2,0,"th",25),e.YNc(32,me,5,0,"td",26),e.BQk(),e.YNc(33,pe,1,0,"tr",27),e.YNc(34,ge,1,0,"tr",28),e.qZA()(),e.TgZ(35,"mat-paginator",29),e.NdJ("page",function(a){return n.page(a)}),e.qZA(),e.YNc(36,he,9,0,"div",30),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("buttonDisabled",!n.type)("button2Disabled",!n.type)("type",n.type)("types",n.types),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("length",n.count)("pageIndex",n.filter.offset/n.filter.limit)("pageSize",n.filter.limit),e.xp6(1),e.Q6J("ngIf",n.dataSource&&n.dataSource.length>0))},dependencies:[r.O5,A.lW,q.gM,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,O.YE,O.nU,R.NW,K.E,H.$],styles:[".table-responsive[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%]{max-width:30vw}.table-responsive[_ngcontent-%COMP%]   .text-truncate-2[_ngcontent-%COMP%]{max-width:15vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.table-responsive[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{min-width:7px;min-height:7px;width:7px;height:7px;border-radius:50%;display:inline-block;background-color:#e2b93b}.table-responsive[_ngcontent-%COMP%]   .status.pushed[_ngcontent-%COMP%]{background-color:#27ae60}a[_ngcontent-%COMP%]{text-decoration:none}"]}),i})();var _e=c(8670),fe=c(3436),B=c(455);function xe(i,l){if(1&i&&(e.TgZ(0,"mat-option",42)(1,"span",43,44),e._uU(3),e.qZA(),e.TgZ(4,"span",45),e._uU(5),e.qZA()()),2&i){const t=l.$implicit;e.Q6J("value",t),e.xp6(3),e.hij(" ",t.id," "),e.xp6(2),e.hij(" Owned by ",t.owned_by," ")}}function be(i,l){if(1&i&&(e.TgZ(0,"mat-option",42)(1,"span",43,44),e._uU(3),e.qZA(),e.TgZ(4,"span",45),e._uU(5),e.qZA()()),2&i){const t=l.$implicit;e.Q6J("value",t),e.xp6(3),e.hij(" ",t.id," "),e.xp6(2),e.hij(" Owned by ",t.owned_by," ")}}function Te(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",3)(1,"span",46)(2,"mat-icon"),e._uU(3,"help_outline"),e.qZA(),e.TgZ(4,"span",5),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",47),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.vector_model=o)}),e.TgZ(7,"mat-select-trigger"),e._uU(8),e.qZA(),e.YNc(9,be,6,3,"mat-option",16),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.vector_model)("disabled",t.isLoading),e.xp6(2),e.hij(" ",null==t.vector_model?null:t.vector_model.id," "),e.xp6(1),e.Q6J("ngForOf",t.models)}}function Ce(i,l){if(1&i&&(e.TgZ(0,"mat-option",50),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Me(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"span",48)(2,"mat-icon"),e._uU(3,"person"),e.qZA(),e.TgZ(4,"span",5),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"mat-select",49),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.flavor=o)})("selectionChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.flavorChanged())}),e.YNc(7,Ce,2,2,"mat-option",30),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.flavor)("disabled",t.isLoading),e.xp6(1),e.Q6J("ngForOf",t.flavors)}}function ve(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",3)(1,"span",51)(2,"mat-icon"),e._uU(3,"get_app"),e.qZA(),e.TgZ(4,"span",5),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"input",52),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.threshold=o)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("disabled",t.isLoading)("ngModel",t.threshold)}}function ye(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"span",53)(2,"mat-icon"),e._uU(3,"timeline"),e.qZA(),e.TgZ(4,"span",5),e._uU(5,"|"),e.qZA()(),e.TgZ(6,"input",54),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.max_context_tokens=o)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("disabled",t.isLoading)("ngModel",t.max_context_tokens)}}function we(i,l){if(1&i&&(e.TgZ(0,"mat-form-field",3)(1,"span",55)(2,"mat-icon"),e._uU(3,"timeline"),e.qZA(),e.TgZ(4,"span",5),e._uU(5,"|"),e.qZA()(),e._UZ(6,"input",56),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("disabled",!0)("value",t.getMessageTokens())}}function Ze(i,l){if(1&i&&(e.TgZ(0,"mat-option",50),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}let W=(()=>{class i{constructor(t,n,o,a,b){this.data=t,this.generalService=n,this.openAIService=o,this.roleService=a,this.dialogRef=b,this.isLoading=!1,this.advanced=!1,this.type=null,this.temperature=null,this.base_url=null,this.max_context_tokens=null,this.max_request_tokens=null,this.max_tokens=null,this.threshold=null,this.auth=[],this.supervised=!1,this.use_embeddings=!1,this.cached=!1,this.model=null,this.vector_model=null,this.models=[],this.roles=[],this.flavors=[{name:"Sales Executive",prefix:"Answer the following as if you are a Sales Executive in the subject: "},{name:"The CEO",prefix:"Answer the following as if you are the CEO of the company: "},{name:"The Expert",prefix:"Answer the following as if you are an expert in the subject: "},{name:"Explain as if I am 5",prefix:"Answer the following and explain it as if I am 5 years old: "},{name:"One liner",prefix:"Answer the following with one sentence: "},{name:"Two liner",prefix:"Answer the following with two sentences: "},{name:"Three liner",prefix:"Answer the following with three sentences: "},{name:"One paragraph",prefix:"Answer the following with one paragraph: "},{name:"Multilingual",prefix:"Answer the following question in the same language: "},{name:"Poet",prefix:"Answer the following with a poem: "},{name:"Donald Trump",prefix:"Answer the following in the style of Donald Trump: "},{name:"Joe Biden",prefix:"Answer the following in the style of Joe Biden: "},{name:"Snoop Dog",prefix:"Answer the following in the style of Snoop Dog: "},{name:"Bob Marley",prefix:"Answer the following in the style of Bob Marley: "},{name:"Pirate",prefix:"Answer the following in the style of a Pirate: "},{name:"Alien from Zorg",prefix:"Answer the following as if you are an alien from the planet Zorg who came to teach humans about superior technology: "},{name:"Reddit Troll",prefix:"Answer the following as if you are a Reddit troll: "}],this.flavor=null,this.CommonRegEx=Y.g,this.CommonErrorMessages=Q.v}ngOnInit(){this.isLoading=!0,this.type=this.data?.type,this.max_context_tokens=this.data?.max_context_tokens??1e3,this.max_request_tokens=this.data?.max_request_tokens??100,this.max_tokens=this.data?.max_tokens??500,this.temperature=this.data?.temperature??.3,this.base_url=this.data?.base_url??"",this.threshold=this.data?.threshold??.8,this.recaptcha=this.data?.recaptcha??.3,this.data&&(this.auth=this.data.auth?.split(",")),this.supervised=1===this.data?.supervised||!this.data,this.use_embeddings=1===this.data?.use_embeddings||!this.data,this.cached=1===this.data?.cached,this.prefix=this.data?.prefix??"",this.greeting=this.data?.greeting??"Hi there, how can I help you?",this.advanced=!!this.data,this.generalService.showLoading(),this.roleService.list("?limit=-1").subscribe({next:t=>{this.roles=t,this.openAIService.models().subscribe({next:n=>{this.models=n,this.models.sort((o,a)=>o.id<a.id?-1:o.id>a.id?1:0),this.model=this.data?.model?this.models.filter(o=>o.id===this.data.model)[0]:this.models.filter(o=>"gpt-3.5-turbo"===o.id)[0],this.vector_model=this.data?.vector_model?this.models.filter(o=>o.id===this.data.vector_model)[0]:this.models.filter(o=>"text-embedding-ada-002"===o.id)[0],this.generalService.hideLoading(),this.isLoading=!1},error:()=>{this.generalService.showFeedback("Something went wrong as we tried to retrieve your models","errorMessage"),this.generalService.hideLoading()}})},error:()=>{this.generalService.showFeedback("Something went wrong as we tried to retrieve roles","errorMessage"),this.generalService.hideLoading()}})}flavorChanged(){this.prefix=this.flavor.prefix,setTimeout(()=>this.flavor=null,1),this.generalService.showFeedback("Flavor was changed","successMessage")}modelChanged(){this.model?.id?.startsWith("gpt-")?this.prefix="":this.use_embeddings&&(this.prefix='Answer the following QUESTION while using the information in the following CONTEXT. If you cannot answer the question using the specified CONTEXT then answer "I don\'t know the answer, try to be more specific.".\r\n\r\nQUESTION: [QUESTION]\r\n\r\nCONTEXT: [CONTEXT]\r\n\r\nANSWER:')}supervisedChanged(){this.supervised||(this.cached=!1)}getMessageTokens(){let t=0;switch(this.model?.id??""){case"text-davinci-003":case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"text-davinci-002":t=4096;break;case"code-davinci-002":t=8e3;break;case"gpt-4":case"gpt-4-0314":t=8192;break;case"gpt-4-32k":case"gpt-4-32k-0314":t=32768;break;default:t=2049}return t-((this.max_tokens??0)+(this.max_request_tokens??0)+(this.use_embeddings?this.max_context_tokens??0:0))}save(){if(!this.type||this.type.length<2)return void this.generalService.showFeedback("You need to provide a type name","errorMessage");if(this.model?.id?.startsWith("gpt")&&this.getMessageTokens()<200)return void this.generalService.showFeedback("You must reserve at last 200 tokens for messages to effectively utilise GPT models","errorMessage");const t={type:this.type,max_context_tokens:this.max_context_tokens,max_request_tokens:this.max_request_tokens,max_tokens:this.max_tokens,temperature:this.temperature,base_url:this.base_url,model:this.model.id,supervised:this.supervised?1:0,recaptcha:this.recaptcha,auth:this.auth?.length>0?this.auth.join(","):null,cached:this.cached?1:0,prefix:this.prefix,greeting:this.greeting,use_embeddings:this.use_embeddings,threshold:this.threshold};this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.WI),e.Y36(m.m),e.Y36(N.A),e.Y36(fe.N),e.Y36(d.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-edit-model"]],decls:110,vars:66,consts:[["mat-dialog-title","",1,"mb-3"],[3,"ngSubmit"],["mat-dialog-content",""],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Type name",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","required","","placeholder","Type name ...","spellcheck","false","name","type","autocomplete","off",3,"disabled","pattern","ngModel","ngModelChange"],[1,"w-100","custom-alignment"],["matPrefix","","matTooltip","Prefix inserted before all prompts",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Prefix ...","spellcheck","true","rows","4","name","prefix",3,"disabled","ngModel","ngModelChange"],["matPrefix","","matTooltip","Greeting to welcome user with",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Greeting ...","spellcheck","true","rows","4","name","greeting",3,"disabled","ngModel","ngModelChange"],[1,"row"],[1,"col-12","d-flex","justify-content-md-between","align-items-md-center","align-items-end","flex-md-row"],["matPrefix","","matTooltip","Completion model",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Completion model ...","name","model",3,"ngModel","disabled","ngModelChange","selectionChange"],["class","multiline-mat-option",3,"value",4,"ngFor","ngForOf"],["class","w-100 standalone-field",4,"ngIf"],["matPrefix","","matTooltip","Website",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Website ...","name","base_url","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["class","w-100 standalone-field me-2",4,"ngIf"],["matPrefix","","matTooltip","Temperature",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Temperature ...","type","number","min","0","max","1","step","0.1","name","temperature","autocomplete","off",3,"disabled","ngModel","ngModelChange"],[1,"w-100","standalone-field","me-2"],["matPrefix","","matTooltip","Max request tokens",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Max request tokens ...","type","number","min","1","max","8000","name","max_request_tokens","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["matPrefix","","matTooltip","Max response tokens",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Max response tokens ...","type","number","min","1","max","8000","name","max_tokens","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["matPrefix","","matTooltip","Authorisation requirements",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Add roles ...","multiple","","name","auth","disableOptionCentering","","panelClass","custom-select-option",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matPrefix","","matTooltip","reCAPTCHA value",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","reCAPTCHA ...","type","number","min","0","max","1","step","0.1","name","recaptcha","autocomplete","off",3,"disabled","ngModel","ngModelChange"],[1,"row","mt-2","mb-2"],[1,"col-12","text-end"],["name","supervised","labelPosition","before","color","primary",1,"me-4",3,"ngModel","disabled","ngModelChange","change"],["name","cached","labelPosition","before","color","primary",1,"me-4",3,"ngModel","disabled","ngModelChange"],["name","use_embeddings","labelPosition","before","color","primary",1,"me-4",3,"ngModel","disabled","ngModelChange"],["mat-dialog-actions","",3,"align"],["labelPosition","before","name","advanced",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","type","submit",3,"disabled"],[1,"multiline-mat-option",3,"value"],[1,"d-block","name-line"],["typeName",""],[1,"d-block","description-line"],["matPrefix","","matTooltip","Vector model",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Vector model ...","name","vector_model",3,"ngModel","disabled","ngModelChange"],["matPrefix","","matTooltip","Flavor",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Flavor ...","name","flavor",3,"ngModel","disabled","ngModelChange","selectionChange"],[3,"value"],["matPrefix","","matTooltip","Threshold for vectors",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Threshold ...","type","number","min","0.5","max","1","step","0.01","name","threshold","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["matPrefix","","matTooltip","Max context tokens",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Max context tokens ...","type","number","min","1","max","8000","name","max_context_tokens","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["matPrefix","","matTooltip","Max message tokens",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Max message tokens ...","type","number","min","1","max","8000","name","max_message_tokens","autocomplete","off",3,"disabled","value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"h3",0),e._uU(1),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"span",4)(6,"mat-icon"),e._uU(7,"edit"),e.qZA(),e.TgZ(8,"span",5),e._uU(9,"|"),e.qZA()(),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(a){return n.type=a}),e.qZA(),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()(),e.TgZ(13,"mat-form-field",7)(14,"span",8)(15,"mat-icon"),e._uU(16,"face"),e.qZA(),e.TgZ(17,"span",5),e._uU(18,"|"),e.qZA()(),e.TgZ(19,"textarea",9),e.NdJ("ngModelChange",function(a){return n.prefix=a}),e._uU(20,"      "),e.qZA()(),e.TgZ(21,"mat-form-field",7)(22,"span",10)(23,"mat-icon"),e._uU(24,"edit"),e.qZA(),e.TgZ(25,"span",5),e._uU(26,"|"),e.qZA()(),e.TgZ(27,"textarea",11),e.NdJ("ngModelChange",function(a){return n.greeting=a}),e._uU(28,"      "),e.qZA()(),e.TgZ(29,"div",12)(30,"div",13)(31,"mat-form-field",3)(32,"span",14)(33,"mat-icon"),e._uU(34,"help_outline"),e.qZA(),e.TgZ(35,"span",5),e._uU(36,"|"),e.qZA()(),e.TgZ(37,"mat-select",15),e.NdJ("ngModelChange",function(a){return n.model=a})("selectionChange",function(){return n.modelChanged()}),e.TgZ(38,"mat-select-trigger"),e._uU(39),e.qZA(),e.YNc(40,xe,6,3,"mat-option",16),e.qZA()(),e.YNc(41,Te,10,4,"mat-form-field",17),e.qZA()(),e.TgZ(42,"div",12)(43,"div",13)(44,"mat-form-field",3)(45,"span",18)(46,"mat-icon"),e._uU(47,"http"),e.qZA(),e.TgZ(48,"span",5),e._uU(49,"|"),e.qZA()(),e.TgZ(50,"input",19),e.NdJ("ngModelChange",function(a){return n.base_url=a}),e.qZA()(),e.YNc(51,Me,8,3,"mat-form-field",20),e.TgZ(52,"mat-form-field",3)(53,"span",21)(54,"mat-icon"),e._uU(55,"opacity"),e.qZA(),e.TgZ(56,"span",5),e._uU(57,"|"),e.qZA()(),e.TgZ(58,"input",22),e.NdJ("ngModelChange",function(a){return n.temperature=a}),e.qZA()(),e.YNc(59,ve,7,2,"mat-form-field",17),e.qZA()(),e.TgZ(60,"div",12)(61,"div",13),e.YNc(62,ye,7,2,"mat-form-field",20),e.TgZ(63,"mat-form-field",23)(64,"span",24)(65,"mat-icon"),e._uU(66,"timeline"),e.qZA(),e.TgZ(67,"span",5),e._uU(68,"|"),e.qZA()(),e.TgZ(69,"input",25),e.NdJ("ngModelChange",function(a){return n.max_request_tokens=a}),e.qZA()(),e.TgZ(70,"mat-form-field",3)(71,"span",26)(72,"mat-icon"),e._uU(73,"timeline"),e.qZA(),e.TgZ(74,"span",5),e._uU(75,"|"),e.qZA()(),e.TgZ(76,"input",27),e.NdJ("ngModelChange",function(a){return n.max_tokens=a}),e.qZA()(),e.YNc(77,we,7,2,"mat-form-field",17),e.qZA()(),e.TgZ(78,"div",12)(79,"div",13)(80,"mat-form-field",23)(81,"span",28)(82,"mat-icon"),e._uU(83,"shield"),e.qZA(),e.TgZ(84,"span",5),e._uU(85,"|"),e.qZA()(),e.TgZ(86,"mat-select",29),e.NdJ("ngModelChange",function(a){return n.auth=a}),e.YNc(87,Ze,2,2,"mat-option",30),e.qZA()(),e.TgZ(88,"mat-form-field",3)(89,"span",31)(90,"mat-icon"),e._uU(91,"verified_user"),e.qZA(),e.TgZ(92,"span",5),e._uU(93,"|"),e.qZA()(),e.TgZ(94,"input",32),e.NdJ("ngModelChange",function(a){return n.recaptcha=a}),e.qZA()()()(),e.TgZ(95,"div",33)(96,"div",34)(97,"mat-checkbox",35),e.NdJ("ngModelChange",function(a){return n.supervised=a})("change",function(){return n.supervisedChanged()}),e._uU(98,"Supervised"),e.qZA(),e.TgZ(99,"mat-checkbox",36),e.NdJ("ngModelChange",function(a){return n.cached=a}),e._uU(100,"Cached"),e.qZA(),e.TgZ(101,"mat-checkbox",37),e.NdJ("ngModelChange",function(a){return n.use_embeddings=a}),e._uU(102,"Vectors"),e.qZA()()()(),e.TgZ(103,"div",38)(104,"mat-slide-toggle",39),e.NdJ("ngModelChange",function(a){return n.advanced=a}),e._uU(105," Advanced "),e.qZA(),e.TgZ(106,"button",40),e._uU(107," Cancel "),e.qZA(),e.TgZ(108,"button",41),e._uU(109," Save "),e.qZA()()()),2&t){let o;e.xp6(1),e.hij(" ",n.data?"'"+n.data.type+"' model configuration":"New model configuration","\n"),e.xp6(3),e.ekj("d-none",n.data),e.xp6(6),e.Q6J("disabled",n.data||n.isLoading)("pattern",n.CommonRegEx.appNameWithUppercaseHyphen)("ngModel",n.type),e.xp6(2),e.Oqu(n.CommonErrorMessages.appNameWithUppercaseHyphen),e.xp6(1),e.ekj("d-none",!n.advanced||!n.use_embeddings),e.xp6(6),e.Q6J("disabled",n.isLoading)("ngModel",n.prefix),e.xp6(2),e.ekj("d-none",!n.advanced||!n.use_embeddings),e.xp6(6),e.Q6J("disabled",n.isLoading)("ngModel",n.greeting),e.xp6(2),e.ekj("d-none",!n.advanced),e.xp6(2),e.ekj("me-2",n.use_embeddings),e.xp6(6),e.Q6J("ngModel",n.model)("disabled",n.isLoading),e.xp6(2),e.hij(" ",null==n.model?null:n.model.id," "),e.xp6(1),e.Q6J("ngForOf",n.models),e.xp6(1),e.Q6J("ngIf",n.use_embeddings),e.xp6(1),e.ekj("d-none",!n.advanced),e.xp6(2),e.ekj("me-2",n.use_embeddings),e.xp6(6),e.Q6J("disabled",n.isLoading)("ngModel",n.base_url),e.xp6(1),e.Q6J("ngIf",n.use_embeddings&&(null==n.model||null==n.model.id?null:n.model.id.startsWith("gpt"))),e.xp6(1),e.ekj("me-2",n.use_embeddings),e.xp6(6),e.Q6J("disabled",n.isLoading)("ngModel",n.temperature),e.xp6(1),e.Q6J("ngIf",n.use_embeddings),e.xp6(1),e.ekj("d-none",!n.advanced),e.xp6(2),e.Q6J("ngIf",n.use_embeddings),e.xp6(7),e.Q6J("disabled",n.isLoading)("ngModel",n.max_request_tokens),e.xp6(1),e.ekj("me-2",null!==(o=null==n.model||null==n.model.id?null:n.model.id.startsWith("gpt"))&&void 0!==o&&o),e.xp6(6),e.Q6J("disabled",n.isLoading)("ngModel",n.max_tokens),e.xp6(1),e.Q6J("ngIf",null==n.model||null==n.model.id?null:n.model.id.startsWith("gpt")),e.xp6(1),e.ekj("d-none",!n.advanced),e.xp6(2),e.ekj("d-none",!n.advanced),e.xp6(6),e.Q6J("disabled",n.isLoading)("ngModel",n.auth),e.xp6(1),e.Q6J("ngForOf",n.roles),e.xp6(7),e.Q6J("disabled",n.isLoading)("ngModel",n.recaptcha),e.xp6(1),e.ekj("d-none",!n.advanced),e.xp6(2),e.Q6J("ngModel",n.supervised)("disabled",n.isLoading),e.xp6(2),e.Q6J("ngModel",n.cached)("disabled",!n.supervised||n.isLoading||(null==n.model||null==n.model.id?null:n.model.id.startsWith("gpt"))),e.xp6(2),e.Q6J("ngModel",n.use_embeddings)("disabled",n.isLoading),e.xp6(2),e.Q6J("align","end"),e.xp6(1),e.Q6J("ngModel",n.advanced),e.xp6(4),e.Q6J("disabled",n.isLoading)}},dependencies:[r.sg,r.O5,T.Hw,A.lW,y.TO,y.KE,y.qo,I.Nt,M.oG,d.ZT,d.uh,d.xY,d.H8,q.gM,p.gD,p.$L,U.ey,B.Rr,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.c5,s.qQ,s.Fd,s.On,s.F],encapsulation:2}),i})();var Le=c(6620);function Ae(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"form",9),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.importUrl())}),e.TgZ(1,"div",10)(2,"p",11),e._uU(3," Crawl and scrape the specified website for training data "),e.qZA(),e.TgZ(4,"mat-form-field",12)(5,"span",13)(6,"mat-icon"),e._uU(7,"http"),e.qZA(),e.TgZ(8,"span",14),e._uU(9,"|"),e.qZA()(),e.TgZ(10,"input",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.url=o)}),e.qZA(),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",10)(14,"div",16)(15,"mat-form-field",17)(16,"span",18)(17,"mat-icon"),e._uU(18,"hourglass_empty"),e.qZA(),e.TgZ(19,"span",14),e._uU(20,"|"),e.qZA()(),e.TgZ(21,"input",19),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.delay=o)}),e.qZA()(),e.TgZ(22,"mat-form-field",17)(23,"span",20)(24,"mat-icon"),e._uU(25,"exit_to_app"),e.qZA(),e.TgZ(26,"span",14),e._uU(27,"|"),e.qZA()(),e.TgZ(28,"input",21),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.max=o)}),e.qZA()(),e.TgZ(29,"mat-form-field",17)(30,"span",22)(31,"mat-icon"),e._uU(32,"timeline"),e.qZA(),e.TgZ(33,"span",14),e._uU(34,"|"),e.qZA()(),e.TgZ(35,"input",23),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.threshold=o)}),e.qZA()(),e.TgZ(36,"button",24),e._uU(37," Crawl "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("ngModel",t.url)("pattern",t.CommonRegEx.domain),e.xp6(2),e.Oqu(t.CommonErrorMessages.domain),e.xp6(9),e.Q6J("ngModel",t.delay),e.xp6(7),e.Q6J("ngModel",t.max),e.xp6(7),e.Q6J("ngModel",t.threshold)}}function Se(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(24);return e.KtG(o.click())}),e.TgZ(1,"i"),e._uU(2,"Drag & drop your training data here, CSV, XML, JSON or YAML"),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"span",40),e._uU(5,"Choose a file"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.uploading)}}function ke(i,l){if(1&i&&(e.TgZ(0,"p",43),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE("Uploading ",t.uploadIndex+1," of ",t.files.length,"...")}}function qe(i,l){1&i&&(e.TgZ(0,"p",43),e._uU(1,"Done!"),e.qZA())}function Ue(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",41),e._uU(2),e.qZA(),e.YNc(3,ke,2,2,"p",42),e.YNc(4,qe,2,0,"p",42),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.getFileName()),e.xp6(1),e.Q6J("ngIf",t.uploading),e.xp6(1),e.Q6J("ngIf",!t.uploading)}}function Ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",10)(2,"p",11),e._uU(3," Upload XML, JSON, YAML or CSV files as training data "),e.qZA(),e.TgZ(4,"div",25)(5,"div",26)(6,"mat-form-field",27)(7,"span",28)(8,"mat-icon"),e._uU(9,"help_outline"),e.qZA(),e.TgZ(10,"span",14),e._uU(11,"|"),e.qZA()(),e.TgZ(12,"input",29),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.prompt=o)}),e.qZA()()(),e.TgZ(13,"div",26)(14,"mat-form-field",30)(15,"span",31)(16,"mat-icon"),e._uU(17,"edit"),e.qZA(),e.TgZ(18,"span",14),e._uU(19,"|"),e.qZA()(),e.TgZ(20,"input",32),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.completion=o)}),e.qZA()()()()(),e.TgZ(21,"div",33)(22,"div",34)(23,"input",35,36),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.trainingFileModel=o)})("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.getFile(o))}),e.qZA(),e.YNc(25,Se,6,1,"button",37),e.YNc(26,Ue,5,3,"ng-container",38),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(12),e.Q6J("disabled",t.uploading)("ngModel",t.prompt),e.xp6(8),e.Q6J("disabled",t.uploading)("ngModel",t.completion),e.xp6(3),e.Q6J("ngModel",t.trainingFileModel),e.xp6(2),e.Q6J("ngIf",""===t.trainingFileModel),e.xp6(1),e.Q6J("ngIf",""!==t.trainingFileModel)}}let Je=(()=>{class i{constructor(t,n,o,a){this.data=t,this.matDialog=n,this.generalService=o,this.openAIService=a,this.uploading=!1,this.trainingFileModel="",this.url=null,this.delay=2,this.max=200,this.prompt="prompt",this.completion="completion",this.advanced=!1,this.threshold=150,this.uploadIndex=0,this.uploadCount=0,this.files=null,this.summarize=!0,this.CommonRegEx=Y.g,this.CommonErrorMessages=Q.v}importUrl(){if(!this.url||0===this.url.length||this.delay<1||this.max>2500||this.threshold<25||!this.CommonRegEx.domain.test(this.url))return void this.generalService.showFeedback("Not valid input","errorMessage");this.url.endsWith("/")&&(this.url=this.url.substring(0,this.url.length-1));const t=this.url.split("://");"http"===t[0]||"https"===t[0]||2===t.length?t[1].includes("/")?this.generalService.showFeedback("For now we only support domains","errorMessage"):this.matDialog.close({crawl:this.url,delay:1e3*this.delay,max:this.max,threshold:this.threshold,summarize:this.summarize}):this.generalService.showFeedback("Provide a domain name with its http(s) prefix","errorMessage")}getFile(t){!t||!t.target.files||0===t.target.files.length||(this.uploading=!0,this.uploadIndex=0,this.uploadCount=0,this.files=t.target.files,this.uploadCurrentFile())}getFileName(){return!this.files||0===this.files.length||this.uploadIndex>=this.files.length?"":this.files[this.uploadIndex].name}uploadCurrentFile(){const t=new FormData;t.append("file",this.files[this.uploadIndex],this.files[this.uploadIndex].name),t.append("type",this.data.type),t.append("prompt",this.prompt),t.append("completion",this.completion),this.openAIService.uploadTrainingFile(t).subscribe({next:n=>{this.uploadCount+=n.count,setTimeout(()=>{if(this.uploadIndex+=1,this.uploadIndex>=this.files.length)return this.generalService.showFeedback(`${this.uploadCount} training snippets successfully imported`,"successMessage"),this.uploading=!1,this.trainingFileModel="",this.uploadIndex=0,this.files=null,void this.matDialog.close();this.uploadCurrentFile()},100)},error:n=>{this.uploading=!1,this.trainingFileModel="",this.generalService.showFeedback(n?.error?.message,"errorMessage","Ok"),this.generalService.hideLoading()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.WI),e.Y36(d.so),e.Y36(m.m),e.Y36(N.A))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-import"]],decls:15,vars:9,consts:[["mat-dialog-title","",1,"mb-0"],[1,"d-md-inline","d-none"],["mat-dialog-content","",1,"content"],["class","row",3,"ngSubmit",4,"ngIf"],["class","row",4,"ngIf"],["mat-dialog-actions","",3,"align"],["labelPosition","before","matTooltip","Summarize training snippets that are too long to be effectively used",1,"me-2",3,"disabled","ngModel","ngModelChange"],["labelPosition","before",1,"me-2",3,"disabled","ngModel","ngModelChange"],["mat-button","","mat-dialog-close","",3,"disabled"],[1,"row",3,"ngSubmit"],[1,"col-12"],[1,"text-muted","text-small","mb-3"],[1,"standalone-field","w-100"],["matPrefix","","matTooltip","Root URL to crawl for training data",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","placeholder","Website URL","name","url","autocomplete","off",3,"ngModel","pattern","ngModelChange"],[1,"d-flex","justify-content-md-between","align-items-md-center","align-items-end","flex-md-row","w-100"],[1,"standalone-field","me-2","w-100"],["matPrefix","","matTooltip","Delay in seconds between pages",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Delay","type","number","min","1","max","30","step","1","name","delay","autocomplete","off",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Maximum number of URLs to crawl",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Max URLs","type","number","min","1","max","5000","step","1","name","max","autocomplete","off",3,"ngModel","ngModelChange"],["matPrefix","","matTooltip","Minimum character count for completions",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Text length threshold","type","number","min","25","max","500","step","25","name","threshold","autocomplete","off",3,"ngModel","ngModelChange"],["matTooltip","Start crawling website","mat-flat-button","","color","primary",1,"px-3"],[1,"row"],[1,"col-md-6","col-12"],[1,"w-100","standalone-field","me-2"],["matPrefix","","matTooltip","Prompt field",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Prompt field","autocomplete","off",3,"disabled","ngModel","ngModelChange"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Completion field",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Completion field","autocomplete","off",3,"disabled","ngModel","ngModelChange"],[1,"col-12","mt-2"],[1,"drop-container","pointer","border-color"],["type","file","name","trainingFileModel","multiple","","accept",".csv,.xml,.yaml,.yml,.json",1,"w-100","h-100","hide","pointer",3,"ngModel","ngModelChange","change"],["upload",""],["mat-button","","class","w-100 pt-2",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["mat-button","",1,"w-100","pt-2",3,"disabled","click"],[1,"text-primary"],[1,"mb-0","mt-3","text-center"],["class","text-center mt-3",4,"ngIf"],[1,"text-center","mt-3"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"Import "),e.TgZ(2,"span",1),e._uU(3,"training data"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div",2),e.YNc(6,Ae,38,6,"form",3),e.YNc(7,Ee,27,7,"div",4),e.qZA(),e.TgZ(8,"div",5)(9,"mat-slide-toggle",6),e.NdJ("ngModelChange",function(a){return n.summarize=a}),e._uU(10," Summarize "),e.qZA(),e.TgZ(11,"mat-slide-toggle",7),e.NdJ("ngModelChange",function(a){return n.advanced=a}),e._uU(12," Advanced "),e.qZA(),e.TgZ(13,"button",8),e._uU(14," Cancel "),e.qZA()()),2&t&&(e.xp6(4),e.hij(" for '",n.data.type,"' model"),e.xp6(2),e.Q6J("ngIf",!n.advanced),e.xp6(1),e.Q6J("ngIf",n.advanced),e.xp6(1),e.Q6J("align","end"),e.xp6(1),e.Q6J("disabled",n.uploading)("ngModel",n.summarize),e.xp6(2),e.Q6J("disabled",n.uploading)("ngModel",n.advanced),e.xp6(2),e.Q6J("disabled",n.uploading))},dependencies:[r.O5,T.Hw,A.lW,y.TO,y.KE,y.qo,I.Nt,d.ZT,d.uh,d.xY,d.H8,q.gM,B.Rr,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.c5,s.qQ,s.Fd,s.On,s.F],styles:[".content[_ngcontent-%COMP%]{height:190px}.drop-container[_ngcontent-%COMP%]{position:relative;height:100px;border-style:dashed;border-width:1px;border-radius:8px;border-color:#0080ff;background-color:#f5f5f5;align-items:center;justify-content:center;display:block}.hide[_ngcontent-%COMP%]{opacity:0;position:absolute;left:0;right:0;z-index:1}"]}),i})();var De=c(2729);function Ie(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"p",13),e._uU(2," Test your model here by asking it questions and sanity check its result "),e.qZA(),e.TgZ(3,"app-codemirror-hyperlambda",14),e.NdJ("modelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.model=o)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("model",t.model)}}function Ne(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"p",13),e._uU(2," Test your model here by asking it questions and sanity check its result "),e.qZA(),e.TgZ(3,"mat-form-field",16)(4,"span",17)(5,"mat-icon"),e._uU(6,"edit"),e.qZA(),e.TgZ(7,"span",7),e._uU(8,"|"),e.qZA()(),e.TgZ(9,"textarea",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.completion=o)}),e._uU(10,"      "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("disabled",t.isLoading)("ngModel",t.completion)}}let Oe=(()=>{class i{constructor(t,n,o,a,b,P){this.data=t,this.generalService=n,this.configService=o,this.machineLearningTrainingService=a,this.codemirrorActionsService=b,this.openAIService=P,this.prompt="",this.completion="",this.isLoading=!1,this.ready=!1}ngOnInit(){this.generalService.showLoading(),this.configService.getGibberish(20,30).subscribe({next:n=>{this.session=n.result,this.generalService.hideLoading()},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong while trying to create a session identifier","errorMessage")}});const t=this.codemirrorActionsService.getActions(null,this.data.type);t&&(t.autofocus=!1,this.model={hyperlambda:this.data.completion,options:t},setTimeout(()=>{this.ready=!0},500))}submit(){this.generalService.showLoading(),this.isLoading=!0,this.openAIService.query(this.prompt,this.data.type,!0,this.session,this.data.model).subscribe({next:t=>{if(this.generalService.hideLoading(),this.model){if(t.references?.length>0){for(var n of(t.result+="\r\n/*",t.references))t.result+=`\r\n * ${n.uri} - ${n.prompt}`;t.result+="\r\n */\r\n"}this.model.hyperlambda=t.result}else{if(t.references?.length>0)for(var n of(t.result+="\r\n",t.references))t.result+=`\r\n* ${n.uri} - ${n.prompt}`;t.db_time&&(t.result+="\r\n\r\n ==> "+t.db_time+" seconds fetching embeddings"),this.completion=t.result}this.isLoading=!1,setTimeout(()=>{const o=document.getElementsByName("prompt")[0];o.focus(),o.select()},100)},error:()=>{this.generalService.hideLoading(),this.isLoading=!1,this.generalService.showFeedback("Something went wrong as we tried to query OpenAI","errorMessage")}})}train(){this.generalService.showLoading(),this.machineLearningTrainingService.ml_training_snippets_create({prompt:this.prompt,completion:this.model?.hyperlambda??this.completion,type:this.data.type}).subscribe({next:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Training snippet successfully saved","successMessage");const t=document.getElementsByName("prompt")[0];t.select(),t.focus()},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to train on your snippet","errorMessage")}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.WI),e.Y36(m.m),e.Y36(De.E),e.Y36(x),e.Y36(g.C),e.Y36(N.A))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-test"]],decls:19,vars:8,consts:[["mat-dialog-title","",1,"mb-0"],["mat-dialog-content",""],["class","col-12 mb-2",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"d-flex","justify-content-md-between","align-items-md-center","align-items-end","flex-md-row","w-100",3,"ngSubmit"],[1,"w-100","standalone-field","me-2"],["matPrefix","","matTooltip","Prompt",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","placeholder","Prompt","name","prompt","cdkFocusInitial","","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["mat-button","","type","button","mat-dialog-close","",3,"disabled"],["mat-button","","type","button",3,"disabled","click"],["mat-button","","type","submit",3,"disabled"],[1,"col-12","mb-2"],[1,"text-muted","text-small","mb-3"],[3,"model","modelChange"],[1,"col-12"],[1,"w-100","custom-alignment"],["matPrefix","","matTooltip","Completion",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Completion","rows","20",3,"disabled","ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,Ie,4,1,"div",2),e.YNc(4,Ne,11,2,"div",3),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return n.submit()}),e.TgZ(6,"mat-form-field",5)(7,"span",6)(8,"mat-icon"),e._uU(9,"help_outline"),e.qZA(),e.TgZ(10,"span",7),e._uU(11,"|"),e.qZA()(),e.TgZ(12,"input",8),e.NdJ("ngModelChange",function(a){return n.prompt=a}),e.qZA()(),e.TgZ(13,"button",9),e._uU(14," Close "),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return n.train()}),e._uU(16," Train "),e.qZA(),e.TgZ(17,"button",11),e._uU(18," Submit "),e.qZA()()()),2&t&&(e.xp6(1),e.hij("Test your '",n.data.type,"' model"),e.xp6(2),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",!n.ready),e.xp6(8),e.Q6J("disabled",n.isLoading)("ngModel",n.prompt),e.xp6(1),e.Q6J("disabled",n.isLoading),e.xp6(2),e.Q6J("disabled",n.isLoading),e.xp6(2),e.Q6J("disabled",n.isLoading))},dependencies:[r.O5,T.Hw,A.lW,y.KE,y.qo,I.Nt,d.ZT,d.uh,d.xY,q.gM,S.u,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F],styles:[".mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}"]}),i})();function Fe(i,l){1&i&&(e.TgZ(0,"mat-error",24),e._uU(1," No training data, you need to create or import training data first. "),e.qZA())}function Pe(i,l){if(1&i&&(e.TgZ(0,"mat-option",25)(1,"span",26,27),e._uU(3),e.qZA(),e.TgZ(4,"span",28),e._uU(5),e.qZA()()),2&i){const t=l.$implicit;e.Q6J("value",t),e.xp6(3),e.hij(" ",t.id," "),e.xp6(2),e.hij(" Owned by ",t.owned_by," ")}}let Qe=(()=>{class i{constructor(t,n,o,a,b){this.data=t,this.generalService=n,this.openAIService=o,this.machineLearningTrainingService=a,this.dialogRef=b,this.count=0,this.epochs=null,this.batch_size=null,this.learning_rate_multiplier=null,this.prompt_loss_weight=null,this.model=null,this.models=[]}ngOnInit(){this.generalService.showLoading(),this.machineLearningTrainingService.ml_training_snippets_count({"ml_training_snippets.type.eq":this.data.type,"ml_training_snippets.pushed.eq":0}).subscribe({next:t=>{this.count=t.count,0!==this.count?this.openAIService.models().subscribe({next:n=>{const o=["ada","babbage","curie","davinci"];this.models=n.filter(a=>"system"!==a.owned_by&&!a.owned_by.startsWith("openai")||o.includes(a.id)),this.model=this.data?.model?this.models.filter(a=>a.id===this.data.model).pop():this.models.filter(a=>"curie"===a.id)[0],this.generalService.hideLoading()},error:()=>{this.generalService.showFeedback("Something went wrong as we tried to retrieve models","errorMessage"),this.generalService.hideLoading()}}):this.generalService.hideLoading()},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to start training","errorMessage")}})}save(){this.dialogRef.close({type:this.data.type,model:this.model.id,epochs:this.epochs,batch_size:this.batch_size,learning_rate_multiplier:this.learning_rate_multiplier,prompt_loss_weight:this.prompt_loss_weight})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.WI),e.Y36(m.m),e.Y36(N.A),e.Y36(x),e.Y36(d.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-train"]],decls:56,vars:16,consts:[["mat-dialog-title","",1,"mb-3"],[3,"ngSubmit"],["mat-dialog-content",""],["class","mb-2",4,"ngIf"],[1,"text-muted"],[1,"row"],[1,"col-12"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Base model to train from",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Base model","name","model",3,"ngModel","ngModelChange"],["class","multiline-mat-option",3,"value",4,"ngFor","ngForOf"],[1,"col-12","d-flex","justify-content-md-between","align-items-md-center","align-items-end","flex-md-row"],[1,"w-100","standalone-field","me-2"],["matPrefix","","matTooltip","Epochs or full cycles through the training set",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Epochs","type","number","min","1","max","10","step","1","name","epochs","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["matPrefix","","matTooltip","Batch size or training examples used during a forward and backward pass",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Batch size","type","number","min","1","max","256","step","1","name","batch_size","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["matPrefix","","matTooltip","Learning rate multiplier",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Learning rate multiplier","type","number","min","0","max","1","step","0.01","name","learning_rate_multiplier","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["matPrefix","","matTooltip","Prompt loss weight",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Prompt loss weight","type","number","min","0","max","1","step","0.01","name","prompt_loss_weight","autocomplete","off",3,"disabled","ngModel","ngModelChange"],["mat-dialog-actions","",3,"align"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","type","submit",3,"disabled"],[1,"mb-2"],[1,"multiline-mat-option",3,"value"],[1,"d-block","name-line"],["typeName",""],[1,"d-block","description-line"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(3,"div",2),e.YNc(4,Fe,2,0,"mat-error",3),e.TgZ(5,"p",4),e._uU(6," Notice, it is highly unlikely that you want to use the train feature. 99.9% of use cases achieve better results by using the vectorise function as an alternative. "),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"span",8)(11,"mat-icon"),e._uU(12,"help_outline"),e.qZA(),e.TgZ(13,"span",4),e._uU(14,"|"),e.qZA()(),e.TgZ(15,"mat-select",9),e.NdJ("ngModelChange",function(a){return n.model=a}),e.TgZ(16,"mat-select-trigger"),e._uU(17),e.qZA(),e.YNc(18,Pe,6,3,"mat-option",10),e.qZA()()()(),e.TgZ(19,"div",5)(20,"div",11)(21,"mat-form-field",12)(22,"span",13)(23,"mat-icon"),e._uU(24,"autorenew"),e.qZA(),e.TgZ(25,"span",4),e._uU(26,"|"),e.qZA()(),e.TgZ(27,"input",14),e.NdJ("ngModelChange",function(a){return n.epochs=a}),e.qZA()(),e.TgZ(28,"mat-form-field",7)(29,"span",15)(30,"mat-icon"),e._uU(31,"swap_horiz"),e.qZA(),e.TgZ(32,"span",4),e._uU(33,"|"),e.qZA()(),e.TgZ(34,"input",16),e.NdJ("ngModelChange",function(a){return n.batch_size=a}),e.qZA()()()(),e.TgZ(35,"div",5)(36,"div",11)(37,"mat-form-field",12)(38,"span",17)(39,"mat-icon"),e._uU(40,"timeline"),e.qZA(),e.TgZ(41,"span",4),e._uU(42,"|"),e.qZA()(),e.TgZ(43,"input",18),e.NdJ("ngModelChange",function(a){return n.learning_rate_multiplier=a}),e.qZA()(),e.TgZ(44,"mat-form-field",7)(45,"span",19)(46,"mat-icon"),e._uU(47,"trending_down"),e.qZA(),e.TgZ(48,"span",4),e._uU(49,"|"),e.qZA()(),e.TgZ(50,"input",20),e.NdJ("ngModelChange",function(a){return n.prompt_loss_weight=a}),e.qZA()()()()(),e.TgZ(51,"div",21)(52,"button",22),e._uU(53," Cancel "),e.qZA(),e.TgZ(54,"button",23),e._uU(55," Start "),e.qZA()()()),2&t&&(e.xp6(1),e.AsE("Train your '",n.data.type,"' model on ",n.count," snippets"),e.xp6(3),e.Q6J("ngIf",0===n.count),e.xp6(11),e.Q6J("ngModel",n.model),e.xp6(2),e.hij(" ",null==n.model?null:n.model.id," "),e.xp6(1),e.Q6J("ngForOf",n.models),e.xp6(9),e.Q6J("disabled",0===n.count)("ngModel",n.epochs),e.xp6(7),e.Q6J("disabled",0===n.count)("ngModel",n.batch_size),e.xp6(9),e.Q6J("disabled",0===n.count)("ngModel",n.learning_rate_multiplier),e.xp6(7),e.Q6J("disabled",0===n.count)("ngModel",n.prompt_loss_weight),e.xp6(1),e.Q6J("align","end"),e.xp6(3),e.Q6J("disabled",0===n.count))},dependencies:[r.sg,r.O5,T.Hw,A.lW,y.TO,y.KE,y.qo,I.Nt,d.ZT,d.uh,d.xY,d.H8,q.gM,p.gD,p.$L,U.ey,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.Fd,s.On,s.F],encapsulation:2}),i})();var Ye=c(9311);function Re(i,l){1&i&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",4),e.BQk())}function Ke(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5)(2,"div",6)(3,"h3",7),e._uU(4,"Machine Learning"),e.qZA(),e.TgZ(5,"p",8),e._uU(6," To get started with Machine Learning you'll need an OpenAI API key. Get your API key "),e.TgZ(7,"a",9),e._uU(8,"here"),e.qZA(),e._uU(9,". "),e.qZA(),e.TgZ(10,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.configure())}),e.TgZ(11,"div",11)(12,"mat-icon"),e._uU(13,"key"),e.qZA(),e.TgZ(14,"p",12),e._uU(15,"OpenAI API key"),e.qZA()()()()(),e.BQk()}}function je(i,l){if(1&i&&(e.TgZ(0,"div",2),e.YNc(1,Re,2,0,"ng-container",3),e.YNc(2,Ke,16,0,"ng-container",3),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoadingKey),e.xp6(1),e.Q6J("ngIf",!t.isLoadingKey)}}function He(i,l){1&i&&(e.TgZ(0,"th",32),e._uU(1," Type "),e.qZA())}function Be(i,l){if(1&i&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function We(i,l){1&i&&(e.TgZ(0,"th",34),e._uU(1," Vector model "),e.qZA())}function Ge(i,l){if(1&i&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.vector_model," ")}}function ze(i,l){1&i&&(e.TgZ(0,"th",34),e._uU(1," Transformer model "),e.qZA())}function $e(i,l){if(1&i&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.model," ")}}function Ve(i,l){1&i&&(e.TgZ(0,"th",36),e._uU(1," Actions "),e.qZA())}function Xe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"td",37)(1,"button",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw(2);return e.KtG(b.import(a))}),e._uU(2," Import "),e.qZA(),e.TgZ(3,"button",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw(2);return e.KtG(b.vectorise(a))}),e._uU(4," Vectorise "),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw(2);return e.KtG(b.test(a))}),e._uU(6," Test "),e.qZA(),e.TgZ(7,"button",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw(2);return e.KtG(b.embed(a))}),e._uU(8," Embed "),e.qZA(),e.TgZ(9,"button",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw(2);return e.KtG(b.edit(a))}),e._uU(10," Configure "),e.qZA(),e.TgZ(11,"button",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw(2);return e.KtG(b.train(a))}),e._uU(12," Train "),e.qZA(),e.TgZ(13,"button",39),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw(2);return e.KtG(b.delete(a))}),e._uU(14," Delete "),e.qZA()()}}function et(i,l){1&i&&e._UZ(0,"tr",40)}function tt(i,l){1&i&&e._UZ(0,"tr",41)}function nt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",13)(2,"div",14)(3,"h3",7),e._uU(4," Machine Learning models "),e.qZA(),e.TgZ(5,"p",8),e._uU(6," These are your Machine Learning models that you can configure and train specifically to solve your problems "),e.qZA()(),e.TgZ(7,"div",15)(8,"app-searchbox",16),e.NdJ("filterList",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.filterList(o))})("buttonClick",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addType())}),e.qZA()(),e.TgZ(9,"div",17)(10,"table",18),e.NdJ("matSortChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.sortData(o))}),e.ynx(11,19),e.YNc(12,He,2,0,"th",20),e.YNc(13,Be,2,1,"td",21),e.BQk(),e.ynx(14,22),e.YNc(15,We,2,0,"th",23),e.YNc(16,Ge,2,1,"td",24),e.BQk(),e.ynx(17,25),e.YNc(18,ze,2,0,"th",23),e.YNc(19,$e,2,1,"td",24),e.BQk(),e.ynx(20,26),e.YNc(21,Ve,2,0,"th",27),e.YNc(22,Xe,15,0,"td",28),e.BQk(),e.YNc(23,et,1,0,"tr",29),e.YNc(24,tt,1,0,"tr",30),e.qZA()()(),e.TgZ(25,"mat-paginator",31),e.NdJ("page",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.page(o))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("dataSource",t.types),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",t.count)("pageIndex",t.filter.offset/t.filter.limit)("pageSize",t.filter.limit)}}let it=(()=>{class i{constructor(t,n,o,a){this.dialog=t,this.openAIService=n,this.generalService=o,this.machineLearningTrainingService=a,this.isConfigured=!1,this.isConfiguredChange=new e.vpe,this.importing=!1,this.count=0,this.filter={limit:10,offset:0},this.isLoadingKey=!1,this.displayedColumns=["type","model","vector_model","action"],this.types=null}ngOnInit(){this.isLoadingKey=!0,this.getConfiguredStatus()}filterList(t){this.filter={limit:this.filter.limit,offset:0},t.searchKey&&(this.filter["ml_types.type.like"]="%"+t.searchKey+"%"),this.getModels(!0)}page(t){this.filter.offset=t.pageIndex*t.pageSize,this.getModels(!1)}sortData(t){if(""===t.direction)return delete this.filter.order,delete this.filter.direction,void this.getModels();this.filter.order=t.active,this.filter.direction=t.direction,this.getModels()}configure(){this.dialog.open(_e.n,{width:"80vw",maxWidth:"550px"}).afterClosed().subscribe(t=>{t?.configured&&(this.isConfigured=!0,this.isConfiguredChange.emit(this.isConfigured),this.getModels())})}addType(){this.dialog.open(W,{width:"80vw",maxWidth:"750px"}).afterClosed().subscribe(t=>{t&&(this.generalService.showLoading(),this.machineLearningTrainingService.ml_types_create(t).subscribe({next:()=>{this.getModels(),this.generalService.showFeedback("Model successfully saved","successMessage")},error:n=>{this.generalService.hideLoading(),this.generalService.showFeedback(n?.error?.message??"Something went wrong","errorMessage","Ok",1e4)}}))})}import(t){this.dialog.open(Je,{width:"80vw",maxWidth:"850px",data:t}).afterClosed().subscribe(n=>{n?.crawl&&(this.generalService.showLoading(),this.openAIService.importUrl(n.crawl,t.type,n.delay,n.max,n.threshold,n.summarize).subscribe({next:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Crawling started, you will be notified when it is finished","successMessage")},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to start training","errorMessage")}}))})}train(t){this.dialog.open(Qe,{width:"80vw",maxWidth:"550px",data:t}).afterClosed().subscribe(n=>{n&&(this.generalService.showLoading(),this.openAIService.start_training(n).subscribe({next:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Training successfully started","successMessage")},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to start training","errorMessage")}}))})}vectorise(t){this.generalService.showLoading(),this.machineLearningTrainingService.ml_training_snippets_count({"ml_training_snippets.type.eq":t.type,not_embedded:!0}).subscribe({next:n=>{this.generalService.hideLoading(),0!==n.count?this.dialog.open(_.z,{width:"500px",data:{title:"Confirm operation",description_extra:`Do you want to vectorise the model called; <span class="fw-bold">${t.type}</span><br/>It has ${n.count} snippets`,action_btn:"Vectorise",close_btn:"Cancel",bold_description:!0}}).afterClosed().subscribe(o=>{"confirm"===o&&this.openAIService.vectorise(t.type).subscribe({next:()=>{this.generalService.showFeedback("Started creating embeddings of model","successMessage"),this.generalService.hideLoading()},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to create embeddings for model","errorMessage")}})}):this.generalService.showFeedback("Model have no snippets that are not already vectorised","successMessage")},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to create embeddings for model","errorMessage")}})}test(t){this.dialog.open(Oe,{width:"80vw",maxWidth:"850px",data:t})}edit(t){this.dialog.open(W,{width:"80vw",maxWidth:"750px",data:t}).afterClosed().subscribe(n=>{n&&(this.generalService.showLoading(),this.machineLearningTrainingService.ml_types_update(n).subscribe({next:()=>{this.getModels(),this.generalService.showFeedback("Model successfully saved","successMessage")},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to edit your snippet","errorMessage")}}))})}delete(t){this.dialog.open(_.z,{width:"500px",data:{title:"Delete type",description_extra:`You are deleting the following type: <br/> <span class="fw-bold">${t.type}</span> <br/><br/>This will delete all data associated with your model, including training data. Do you want to continue?`,action_btn:"Delete",close_btn:"Cancel",action_btn_color:"warn",bold_description:!0,extra:{details:t.type,action:"confirmInput",fieldToBeTypedTitle:"model type name",fieldToBeTypedValue:t.type,icon:"database"}}}).afterClosed().subscribe(n=>{"confirm"===n&&(this.generalService.showLoading(),this.machineLearningTrainingService.ml_types_delete(t.type).subscribe({next:()=>{this.generalService.showFeedback("Model successfully deleted","successMessage"),this.getModels()},error:o=>{this.generalService.showFeedback(o,"errorMessage","Ok"),this.generalService.hideLoading()}}))})}embed(t){this.dialog.open(Le.A,{width:"80vw",maxWidth:"650px",data:{type:t.type,noClose:!0,model:t.model}})}getModels(t=!0){this.generalService.showLoading(),this.machineLearningTrainingService.ml_types(this.filter).subscribe({next:n=>{if(this.types=n||[],!t)return void this.generalService.hideLoading();const o={};for(const a in this.filter)"limit"!==a&&"offset"!==a&&"order"!==a&&"direction"!==a&&(o[a]=this.filter[a]);this.machineLearningTrainingService.ml_types_count(o).subscribe({next:a=>{this.count=a.count,this.generalService.hideLoading()},error:a=>{this.generalService.showFeedback(a,"errorMessage","Ok"),this.generalService.hideLoading()}})},error:n=>{this.generalService.showFeedback(n,"errorMessage","Ok"),this.generalService.hideLoading()}})}getConfiguredStatus(){this.openAIService.isConfigured().subscribe({next:t=>{if(!t.result)return this.isLoadingKey=!1,void this.generalService.hideLoading();this.isConfigured=!0,this.isConfiguredChange.emit(this.isConfigured),this.getModels()},error:t=>{this.generalService.showFeedback(t,"errorMessage","Ok"),this.generalService.hideLoading()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.uw),e.Y36(N.A),e.Y36(m.m),e.Y36(x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-models"]],inputs:{isConfigured:"isConfigured"},outputs:{isConfiguredChange:"isConfiguredChange"},decls:3,vars:2,consts:[[1,"row","fullPage"],["class","col-12 mt-4",4,"ngIf"],[1,"col-12","mt-4"],[4,"ngIf"],["amount","5","colClass","col-12","blockHeight","45px","hasShadow","false"],[1,"row","ms-1"],[1,"col-12"],[1,"fw-bold","mb-2"],[1,"text-muted"],["href","https://beta.openai.com/account/api-keys","target","_blank"],["mat-flat-button","",1,"mt-2",3,"click"],[1,"d-flex","flex-nowrap","align-items-center","ps-1"],[1,"my-0","mx-2","text-truncate","url-text"],[1,"row","align-items-center","me-1"],[1,"col-lg-5","col-12","mb-lg-0","mb-2"],[1,"col-lg-7","col-12"],["buttonText","Add",3,"filterList","buttonClick"],[1,"table-responsive","mt-4","col-12"],["mat-table","","matSort","",1,"w-100","borderless","hoverable",3,"dataSource","matSortChange"],["matColumnDef","type"],["mat-header-cell","","class","text-nowrap px-sm-3","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate px-sm-3",4,"matCellDef"],["matColumnDef","vector_model"],["mat-header-cell","","class","pe-sm-3 text-nowrap small-table-column","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","pe-sm-3 text-nowrap small-table-column",4,"matCellDef"],["matColumnDef","model"],["matColumnDef","action"],["mat-header-cell","","class","ps-sm-3 small-table-column",4,"matHeaderCellDef"],["mat-cell","","class","ps-sm-3 text-nowrap small-table-column",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","page"],["mat-header-cell","","mat-sort-header","",1,"text-nowrap","px-sm-3"],["mat-cell","",1,"text-truncate","px-sm-3"],["mat-header-cell","","mat-sort-header","",1,"pe-sm-3","text-nowrap","small-table-column"],["mat-cell","",1,"pe-sm-3","text-nowrap","small-table-column"],["mat-header-cell","",1,"ps-sm-3","small-table-column"],["mat-cell","",1,"ps-sm-3","text-nowrap","small-table-column"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,je,3,2,"div",1),e.YNc(2,nt,26,7,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.isConfigured),e.xp6(1),e.Q6J("ngIf",n.isConfigured))},dependencies:[r.O5,T.Hw,A.lW,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,O.YE,O.nU,R.NW,Ye.J,K.E],styles:[".status[_ngcontent-%COMP%]{min-width:7px;min-height:7px;width:7px;height:7px;border-radius:50%;background-color:#828282;display:inline-block}.status.unsupervised[_ngcontent-%COMP%]{background-color:#e2b93b}.status.supervised[_ngcontent-%COMP%]{background-color:#27ae60}.status.uncached[_ngcontent-%COMP%]{background-color:#e2b93b}.status.cached[_ngcontent-%COMP%]{background-color:#27ae60}"]}),i})();function at(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"app-codemirror-hyperlambda",15),e.NdJ("modelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.model=o)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("model",t.model)}}function ot(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",16)(1,"mat-form-field",17)(2,"span",18)(3,"mat-icon"),e._uU(4,"featured_play_list"),e.qZA(),e.TgZ(5,"span",5),e._uU(6,"|"),e.qZA()(),e.TgZ(7,"textarea",19),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.data.completion=o)}),e._uU(8,"        "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.data.completion)}}let rt=(()=>{class i{constructor(t,n,o,a,b){this.generalService=t,this.machineLearningTrainingService=n,this.dialogRef=o,this.codemirrorActionsService=a,this.data=b,this.train=!1,this.cached=!1,this.ready=!1}ngOnInit(){const t=this.codemirrorActionsService.getActions(null,this.data.type);t&&(t.autofocus=!1,this.model={hyperlambda:this.data.completion,options:t},setTimeout(()=>{this.ready=!0},500))}save(){this.train?this.machineLearningTrainingService.ml_training_snippets_create({prompt:this.data.prompt,completion:this.ready?this.model.hyperlambda:this.data.completion,type:this.data.type}).subscribe({next:()=>{this.saveImplementation()},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to create training data","errorMessage")}}):this.saveImplementation()}saveImplementation(){this.dialogRef.close({id:this.data.id,prompt:this.data.prompt,completion:this.ready?this.model.hyperlambda:this.data.completion,type:this.data.type,cached:this.data.cached})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.m),e.Y36(x),e.Y36(d.so),e.Y36(g.C),e.Y36(d.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-edit-cache"]],decls:22,vars:6,consts:[["mat-dialog-title","",1,"mb-3"],[3,"ngSubmit"],["mat-dialog-content",""],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Prompt",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","cdkFocusInitial","","placeholder","Prompt","name","prompt","autocomplete","off",3,"ngModel","ngModelChange"],["class","col-12",4,"ngIf"],["class","col-12 mb-0",4,"ngIf"],["mat-dialog-actions","",3,"align"],["name","cached","labelPosition","before","color","primary",1,"me-3",3,"ngModel","ngModelChange"],["name","train","labelPosition","before","color","primary",1,"me-3",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","type","submit"],[1,"col-12"],[3,"model","modelChange"],[1,"col-12","mb-0"],[1,"w-100","custom-alignment"],["matPrefix","","matTooltip","Completion for prompt",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","name","txt_completion","placeholder","Completion","rows","18",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"Request"),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"span",4)(6,"mat-icon"),e._uU(7,"help_outline"),e.qZA(),e.TgZ(8,"span",5),e._uU(9,"|"),e.qZA()(),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(a){return n.data.prompt=a}),e.qZA()(),e.YNc(11,at,2,1,"div",7),e.YNc(12,ot,9,1,"div",8),e.qZA(),e.TgZ(13,"div",9)(14,"mat-checkbox",10),e.NdJ("ngModelChange",function(a){return n.data.cached=a}),e._uU(15," Cache "),e.qZA(),e.TgZ(16,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return n.train=a}),e._uU(17," Train "),e.qZA(),e.TgZ(18,"button",12),e._uU(19," Cancel "),e.qZA(),e.TgZ(20,"button",13),e._uU(21," Save "),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("ngModel",n.data.prompt),e.xp6(1),e.Q6J("ngIf",n.ready),e.xp6(1),e.Q6J("ngIf",!n.ready),e.xp6(1),e.Q6J("align","end"),e.xp6(1),e.Q6J("ngModel",n.data.cached),e.xp6(2),e.Q6J("ngModel",n.train))},dependencies:[r.O5,T.Hw,A.lW,y.KE,y.qo,I.Nt,M.oG,d.ZT,d.uh,d.xY,d.H8,q.gM,S.u,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F],encapsulation:2}),i})();function st(i,l){1&i&&(e.TgZ(0,"th",27),e._uU(1," Prompt "),e.qZA())}function lt(i,l){if(1&i&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.prompt," ")}}function ct(i,l){1&i&&(e.TgZ(0,"th",29),e._uU(1," Created "),e.qZA())}function dt(i,l){if(1&i&&(e.TgZ(0,"td",30),e._uU(1),e.ALo(2,"since"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.created)," ")}}function mt(i,l){1&i&&(e.TgZ(0,"th",29),e._uU(1," Type "),e.qZA())}function pt(i,l){if(1&i&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function gt(i,l){1&i&&(e.TgZ(0,"th",32),e._uU(1," Reason "),e.qZA())}function ht(i,l){if(1&i&&(e.TgZ(0,"td",33),e._UZ(1,"span"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Gre("status ","stop"===t.finish_reason?"success ":" ","me-1 small-table-column")}}function ut(i,l){1&i&&(e.TgZ(0,"th",34),e._uU(1," Actions "),e.qZA())}function _t(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"td",35)(1,"button",36),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw();return e.KtG(b.showDetails(a))}),e._uU(2," Edit "),e.qZA(),e.TgZ(3,"button",37),e.NdJ("click",function(){const a=e.CHM(t).$implicit,b=e.oxw();return e.KtG(b.delete(a))}),e._uU(4," Delete "),e.qZA()()}}function ft(i,l){1&i&&e._UZ(0,"tr",38)}function xt(i,l){1&i&&e._UZ(0,"tr",39)}let bt=(()=>{class i{constructor(t,n,o){this.dialog=t,this.generalService=n,this.machineLearningTrainingService=o,this.type=null,this.dataSource=null,this.count=0,this.types=null,this.displayedColumns=["prompt","type","created","finish_reason","action"],this.filter={limit:10,offset:0,order:"created",direction:"desc"}}ngOnInit(){this.getTypes(!0)}filterList(t){const n={limit:this.filter.limit,offset:0};this.filter.order&&(n.order=this.filter.order),this.filter.direction&&(n.direction=this.filter.direction),this.filter=n,t.searchKey&&(this.filter["ml_requests.prompt.like"]="%"+t.searchKey+"%"),t.type&&(this.filter["ml_requests.type.eq"]=t.type),this.getRequests(!0)}sortData(t){if(""===t.direction)return delete this.filter.order,delete this.filter.direction,void this.getRequests(!1);this.filter.order=t.active,this.filter.direction=t.direction,this.getRequests(!1)}page(t){this.filter.offset=t.pageIndex*t.pageSize,this.getRequests(!1)}showDetails(t){this.dialog.open(rt,{width:"80vw",maxWidth:"850px",data:{id:t.id,prompt:t.prompt,completion:t.completion,type:t.type,cached:t.cached}}).afterClosed().subscribe(n=>{n&&(this.generalService.showLoading(),this.machineLearningTrainingService.ml_requests_update(n).subscribe({next:()=>{this.generalService.showFeedback("Request updated successfully","successMessage"),this.getRequests()},error:()=>{this.generalService.hideLoading(),this.generalService.showFeedback("Something went wrong as we tried to update your request","errorMessage")}}))})}delete(t){this.dialog.open(_.z,{width:"500px",data:{title:"Delete request",description_extra:"Are you sure you want to delete this request?",action_btn:"Delete",close_btn:"Cancel",action_btn_color:"warn",bold_description:!0}}).afterClosed().subscribe(n=>{"confirm"===n&&(this.generalService.showLoading(),this.machineLearningTrainingService.ml_requests_delete(t.id).subscribe({next:()=>{this.generalService.showFeedback("Request successfully deleted","successMessage"),this.getRequests(!0)},error:o=>{this.generalService.showFeedback(o,"errorMessage","Ok"),this.generalService.hideLoading()}}))})}getTypes(t=!0){this.machineLearningTrainingService.ml_types().subscribe({next:n=>{this.types=(n=n||[]).map(o=>o.type),t?this.getRequests():this.generalService.hideLoading()},error:n=>{this.generalService.showFeedback(n,"errorMessage","Ok"),this.generalService.hideLoading()}})}getRequests(t=!0){this.machineLearningTrainingService.ml_requests(this.filter).subscribe({next:n=>{if(this.dataSource=n||[],!t)return void this.generalService.hideLoading();const o={};for(const a in this.filter)"limit"!==a&&"offset"!==a&&"order"!==a&&"direction"!==a&&(o[a]=this.filter[a]);this.machineLearningTrainingService.ml_requests_count(o).subscribe({next:a=>{this.count=a.count,this.generalService.hideLoading()},error:a=>{this.generalService.showFeedback(a,"errorMessage","Ok"),this.generalService.hideLoading()}})},error:n=>{this.generalService.showFeedback(n,"errorMessage","Ok"),this.generalService.hideLoading()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.uw),e.Y36(m.m),e.Y36(x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning-history"]],decls:30,vars:9,consts:[[1,"row","fullPage"],[1,"mt-4","col-12"],[1,"row","align-items-center","me-1"],[1,"col-lg-5","col-12","mb-lg-0","mb-2"],[1,"mb-2","fw-bold"],[1,"text-muted"],[1,"col-lg-7","col-12"],[3,"type","types","filterList","typeChange"],[1,"table-responsive","mt-4"],["mat-table","","matSort","","matSortActive","created","matSortDirection","desc",1,"w-100","borderless","hoverable",3,"dataSource","matSortChange"],["matColumnDef","prompt"],["mat-header-cell","","class","text-nowrap text-truncate px-sm-3","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","text-nowrap text-truncate px-sm-3",4,"matCellDef"],["matColumnDef","created"],["mat-header-cell","","class","pe-sm-3 small-table-column","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","pe-sm-3 text-nowrap small-table-column",4,"matCellDef"],["matColumnDef","type"],["mat-cell","","class","pe-sm-3 small-table-column",4,"matCellDef"],["matColumnDef","finish_reason"],["mat-header-cell","","class","px-sm-3 small-table-column","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","ps-3",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","class","ps-sm-3 small-table-column",4,"matHeaderCellDef"],["mat-cell","","class","ps-sm-3 text-nowrap small-table-column",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","page"],["mat-header-cell","","mat-sort-header","",1,"text-nowrap","text-truncate","px-sm-3"],["mat-cell","",1,"text-nowrap","text-truncate","px-sm-3"],["mat-header-cell","","mat-sort-header","",1,"pe-sm-3","small-table-column"],["mat-cell","",1,"pe-sm-3","text-nowrap","small-table-column"],["mat-cell","",1,"pe-sm-3","small-table-column"],["mat-header-cell","","mat-sort-header","",1,"px-sm-3","small-table-column"],["mat-cell","",1,"ps-3"],["mat-header-cell","",1,"ps-sm-3","small-table-column"],["mat-cell","",1,"ps-sm-3","text-nowrap","small-table-column"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Machine Learning history"),e.qZA(),e.TgZ(6,"p",5),e._uU(7," These are questions and answers having been asked towards your AI models and might also serve as a cache depending upon how your model is configured "),e.qZA()(),e.TgZ(8,"div",6)(9,"app-searchbox",7),e.NdJ("filterList",function(a){return n.filterList(a)})("typeChange",function(a){return n.type=a}),e.qZA()()(),e.TgZ(10,"div",8)(11,"table",9),e.NdJ("matSortChange",function(a){return n.sortData(a)}),e.ynx(12,10),e.YNc(13,st,2,0,"th",11),e.YNc(14,lt,2,1,"td",12),e.BQk(),e.ynx(15,13),e.YNc(16,ct,2,0,"th",14),e.YNc(17,dt,3,3,"td",15),e.BQk(),e.ynx(18,16),e.YNc(19,mt,2,0,"th",14),e.YNc(20,pt,2,1,"td",17),e.BQk(),e.ynx(21,18),e.YNc(22,gt,2,0,"th",19),e.YNc(23,ht,2,3,"td",20),e.BQk(),e.ynx(24,21),e.YNc(25,ut,2,0,"th",22),e.YNc(26,_t,5,0,"td",23),e.BQk(),e.YNc(27,ft,1,0,"tr",24),e.YNc(28,xt,1,0,"tr",25),e.qZA()(),e.TgZ(29,"mat-paginator",26),e.NdJ("page",function(a){return n.page(a)}),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("type",n.type)("types",n.types),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("length",n.count)("pageIndex",n.filter.offset/n.filter.limit)("pageSize",n.filter.limit))},dependencies:[A.lW,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,O.YE,O.nU,R.NW,K.E,H.$],styles:[".table-responsive[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%]{max-width:30vw}.table-responsive[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{min-width:7px;min-height:7px;width:7px;height:7px;border-radius:50%;display:inline-block;background-color:#e2b93b}.table-responsive[_ngcontent-%COMP%]   .status.success[_ngcontent-%COMP%]{background-color:#27ae60}"]}),i})();function Tt(i,l){1&i&&e._uU(0," Models ")}function Ct(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"app-machine-learning-models",5),e.NdJ("isConfiguredChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.isConfigured=o)})("trainModel",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.trainModel(o))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("isConfigured",t.isConfigured)}}function Mt(i,l){1&i&&e._uU(0," Training data ")}function vt(i,l){1&i&&e._UZ(0,"app-machine-learning-training-data")}function yt(i,l){1&i&&e._uU(0," History ")}function wt(i,l){1&i&&e._UZ(0,"app-machine-learning-history")}const Zt=[{path:"",component:(()=>{class i{constructor(){this.isConfigured=!1}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-machine-learning"]],decls:13,vars:2,consts:[["mat-stretch-tabs","","dynamicHeight","","animationDuration","0ms"],["tabs",""],["mat-tab-label",""],["matTabContent",""],[3,"disabled"],[3,"isConfigured","isConfiguredChange","trainModel"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"mat-tab-group",0,1)(4,"mat-tab"),e.YNc(5,Tt,1,0,"ng-template",2),e.YNc(6,Ct,1,1,"ng-template",3),e.qZA(),e.TgZ(7,"mat-tab",4),e.YNc(8,Mt,1,0,"ng-template",2),e.YNc(9,vt,1,0,"ng-template",3),e.qZA(),e.TgZ(10,"mat-tab",4),e.YNc(11,yt,1,0,"ng-template",2),e.YNc(12,wt,1,0,"ng-template",3),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("disabled",!n.isConfigured),e.xp6(3),e.Q6J("disabled",!n.isConfigured))},dependencies:[f.SP,f.uD,f.uX,f.Vc,h.a8,h.dn,ue,it,bt]}),i})()}];let Lt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[Z.Bz.forChild(Zt),Z.Bz]}),i})();var At=c(1717),St=c(1075);let kt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[r.ez,Lt,v.q,At.h,s.u5,w.K,St.m]}),i})()},1717:(D,E,c)=>{"use strict";c.d(E,{h:()=>Z});var r=c(6895),v=c(4006),s=c(1103),w=c(4650);let Z=(()=>{class e{}return e.\u0275fac=function(h){return new(h||e)},e.\u0275mod=w.oAB({type:e}),e.\u0275inj=w.cJS({imports:[r.ez,s.k,v.u5]}),e})()},4327:function(D,E){var v;void 0!==(v=function(){"use strict";function w(d,m,g){var u=new XMLHttpRequest;u.open("GET",d),u.responseType="blob",u.onload=function(){_(u.response,m,g)},u.onerror=function(){console.error("could not download file")},u.send()}function Z(d){var m=new XMLHttpRequest;m.open("HEAD",d,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function e(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(m)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,h=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(d,m,g){var u=f.URL||f.webkitURL,k=document.createElement("a");k.download=m=m||d.name||"download",k.rel="noopener","string"==typeof d?(k.href=d,k.origin===location.origin?e(k):Z(k.href)?w(d,m,g):e(k,k.target="_blank")):(k.href=u.createObjectURL(d),setTimeout(function(){u.revokeObjectURL(k.href)},4e4),setTimeout(function(){e(k)},0))}:"msSaveOrOpenBlob"in navigator?function(d,m,g){if(m=m||d.name||"download","string"!=typeof d)navigator.msSaveOrOpenBlob(function s(d,m){return typeof m>"u"?m={autoBom:!1}:"object"!=typeof m&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\ufeff",d],{type:d.type}):d}(d,g),m);else if(Z(d))w(d,m,g);else{var u=document.createElement("a");u.href=d,u.target="_blank",setTimeout(function(){e(u)})}}:function(d,m,g,u){if((u=u||open("","_blank"))&&(u.document.title=u.document.body.innerText="downloading..."),"string"==typeof d)return w(d,m,g);var k="application/octet-stream"===d.type,L=/constructor/i.test(f.HTMLElement)||f.safari,J=/CriOS\/[\d]+/.test(navigator.userAgent);if((J||k&&L||h)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var y=x.result;y=J?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=y:location=y,u=null},x.readAsDataURL(d)}else{var T=f.URL||f.webkitURL,A=T.createObjectURL(d);u?u.location=A:location.href=A,u=null,setTimeout(function(){T.revokeObjectURL(A)},4e4)}});f.saveAs=_.saveAs=_,D.exports=_}.apply(E,[]))&&(D.exports=v)}}]);