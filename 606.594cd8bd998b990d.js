"use strict";(self.webpackChunkmagic=self.webpackChunkmagic||[]).push([[606],{7832:(E,h,l)=>{l.d(h,{K:()=>r});var t=l(6895),u=l(2278),e=l(4006),C=l(1103),f=l(4650);let r=(()=>{class p{}return p.\u0275fac=function(b){return new(b||p)},p.\u0275mod=f.oAB({type:p}),p.\u0275inj=f.cJS({imports:[t.ez,u.q,e.u5,e.UX,C.k]}),p})()},9311:(E,h,l)=>{l.d(h,{J:()=>f});var t=l(4650),u=l(6895);const e=function(r){return{height:r}};function C(r,p){if(1&r&&(t.TgZ(0,"div"),t._UZ(1,"div",2),t.qZA()),2&r){const s=t.oxw();t.Tol(s.colClass),t.xp6(1),t.ekj("mat-elevation-z1",s.hasShadow),t.Q6J("ngStyle",t.VKq(5,e,s.blockHeight))}}let f=(()=>{class r{constructor(){this.amount=2,this.colClass="col-12",this.blockHeight="375px",this.hasShadow=!0,this.itemsArray=[]}ngOnInit(){for(let s=0;s<this.amount;s++)this.itemsArray.push("item"+s)}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-loading-skeleton"]],inputs:{amount:"amount",colClass:"colClass",blockHeight:"blockHeight",hasShadow:"hasShadow"},decls:2,vars:1,consts:[[1,"row"],[3,"class",4,"ngFor","ngForOf"],[1,"block","mb-3",3,"ngStyle"]],template:function(s,b){1&s&&(t.TgZ(0,"div",0),t.YNc(1,C,2,7,"div",1),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",b.itemsArray))},dependencies:[u.sg,u.PC],styles:[".block[_ngcontent-%COMP%]{background:#eee;background:linear-gradient(90deg,#ffffff 8%,#f2f2f2 18%,#fafafa 33%);background-size:200% 100%;animation:1s shine linear infinite;border-radius:5px;border:1px solid rgba(217,217,217,.05)}@keyframes shine{to{background-position-x:-200%}}"]}),r})()},316:(E,h,l)=>{l.d(h,{E:()=>w});var t=l(4650),u=l(4006),e=l(8372),C=l(1884),f=l(6895),r=l(7392),p=l(4859),s=l(9549),b=l(4144),g=l(6709),D=l(266),y=l(4385),Z=l(3238);function L(c,d){if(1&c){const a=t.EpF();t.TgZ(0,"mat-checkbox",10),t.NdJ("ngModelChange",function(m){t.CHM(a);const M=t.oxw();return t.KtG(M.checked=m)})("change",function(){t.CHM(a);const m=t.oxw();return t.KtG(m.filter())}),t._uU(1),t.qZA()}if(2&c){const a=t.oxw();t.Q6J("ngModel",a.checked),t.xp6(1),t.hij(" ",a.checkBoxText," ")}}function O(c,d){if(1&c&&(t.TgZ(0,"mat-option",15)(1,"span",17),t._uU(2),t.qZA()()),2&c){const a=d.$implicit;t.Q6J("value",a),t.xp6(2),t.Oqu(a)}}function A(c,d){if(1&c){const a=t.EpF();t.TgZ(0,"mat-form-field",11)(1,"span",12)(2,"mat-icon"),t._uU(3,"filter_list"),t.qZA(),t.TgZ(4,"span",13),t._uU(5,"|"),t.qZA()(),t.TgZ(6,"mat-select",14),t.NdJ("ngModelChange",function(m){t.CHM(a);const M=t.oxw();return t.KtG(M.type=m)})("selectionChange",function(){t.CHM(a);const m=t.oxw();return m.filter(),t.KtG(m.typeChanged())}),t.TgZ(7,"mat-option",15),t._uU(8," Remove filter "),t.qZA(),t.YNc(9,O,3,2,"mat-option",16),t.qZA()()}if(2&c){const a=t.oxw();t.xp6(6),t.Q6J("ngModel",a.type),t.xp6(1),t.Q6J("value",null),t.xp6(2),t.Q6J("ngForOf",a.types)}}function S(c,d){if(1&c){const a=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(a);const m=t.oxw();return t.KtG(m.removeSearchTerm())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function k(c,d){if(1&c&&(t.TgZ(0,"mat-icon"),t._uU(1),t.qZA()),2&c){const a=t.oxw(2);t.xp6(1),t.Oqu(a.buttonIcon)}}function I(c,d){if(1&c){const a=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(a);const m=t.oxw();return t.KtG(m.buttonClicked())}),t.YNc(1,k,2,1,"mat-icon",20),t._uU(2),t.qZA()}if(2&c){const a=t.oxw();t.Q6J("disabled",a.buttonDisabled),t.xp6(1),t.Q6J("ngIf",a.buttonIcon),t.xp6(1),t.hij(" ",a.buttonText," ")}}function P(c,d){if(1&c){const a=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(a);const m=t.oxw();return t.KtG(m.button2Clicked())}),t._uU(1),t.qZA()}if(2&c){const a=t.oxw();t.Q6J("disabled",a.button2Disabled),t.xp6(1),t.hij(" ",a.button2Text," ")}}let w=(()=>{class c{constructor(){this.filterList=new t.vpe,this.buttonClick=new t.vpe,this.button2Click=new t.vpe,this.typeChange=new t.vpe,this.checkBoxText=null,this.buttonText=null,this.button2Text=null,this.buttonIcon=null,this.buttonDisabled=!1,this.button2Disabled=!1,this.checked=!1}ngOnInit(){this.filterControl=new u.NI(""),this.filterControl.valueChanges.pipe((0,e.b)(400),(0,C.x)()).subscribe(()=>{this.filter()})}removeSearchTerm(){this.filterControl.setValue("")}filter(){const a={};this.filterControl.value?.length>0&&(a.searchKey=this.filterControl.value),this.type&&(a.type=this.type),this.checkBoxText&&(a.checked=this.checked),this.filterList.emit(a)}typeChanged(){this.typeChange?.emit(this.type)}buttonClicked(){this.buttonClick.emit()}button2Clicked(){this.button2Click.emit()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-searchbox"]],inputs:{types:"types",type:"type",checkBoxText:"checkBoxText",buttonText:"buttonText",button2Text:"button2Text",buttonIcon:"buttonIcon",buttonDisabled:"buttonDisabled",button2Disabled:"button2Disabled"},outputs:{filterList:"filterList",buttonClick:"buttonClick",button2Click:"button2Click",typeChange:"typeChange"},decls:14,vars:6,consts:[[1,"d-flex","justify-content-md-between","align-items-md-center","align-items-end","flex-md-row","w-100"],["color","primary","class","mt-md-0 mt-1 me-3",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","w-100 standalone-field me-3",4,"ngIf"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Search for item(s)",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","placeholder","Search ...","autocomplete","off",3,"formControl"],["input",""],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","class","ms-3",3,"disabled","click",4,"ngIf"],["color","primary",1,"mt-md-0","mt-1","me-3",3,"ngModel","ngModelChange","change"],[1,"w-100","standalone-field","me-3"],["matPrefix","","matTooltip","Filter on type",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted","ms-1"],["placeholder","Type ...",3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"d-block","name-line"],["mat-icon-button","","matSuffix","",3,"click"],["mat-flat-button","","color","primary",1,"ms-3",3,"disabled","click"],[4,"ngIf"]],template:function(a,_){if(1&a&&(t.TgZ(0,"div",0),t.YNc(1,L,2,2,"mat-checkbox",1),t.YNc(2,A,10,3,"mat-form-field",2),t.TgZ(3,"mat-form-field",3)(4,"span",4)(5,"mat-icon"),t._uU(6,"search"),t.qZA(),t.TgZ(7,"span",5),t._uU(8,"|"),t.qZA()(),t._UZ(9,"input",6,7),t.YNc(11,S,3,0,"button",8),t.qZA(),t.YNc(12,I,3,3,"button",9),t.YNc(13,P,2,2,"button",9),t.qZA()),2&a){const m=t.MAs(10);t.xp6(1),t.Q6J("ngIf",_.checkBoxText),t.xp6(1),t.Q6J("ngIf",(null==_.types?null:_.types.length)>0),t.xp6(7),t.Q6J("formControl",_.filterControl),t.xp6(2),t.Q6J("ngIf",""!==m.value),t.xp6(1),t.Q6J("ngIf",_.buttonText||_.buttonIcon),t.xp6(1),t.Q6J("ngIf",_.button2Text)}},dependencies:[f.sg,f.O5,r.Hw,p.lW,s.KE,s.qo,s.R9,b.Nt,g.oG,D.gM,y.gD,Z.ey,u.Fj,u.JJ,u.On,u.oH],encapsulation:2}),c})()},8606:(E,h,l)=>{l.r(h),l.d(h,{LogModule:()=>F});var t=l(6895),u=l(5424),e=l(4650),C=l(5938),f=l(3885),r=l(6949),p=l(9311),s=l(316),b=l(4859),g=l(671),D=l(3546),y=l(8739),Z=l(7292);function L(n,i){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",10),e.BQk()),2&n&&(e.xp6(1),e.Q6J("amount",1)("colClass","col-12")("blockHeight","41px")("hasShadow",!1))}function O(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"app-searchbox",11),e.NdJ("filterList",function(x){e.CHM(o);const v=e.oxw();return e.KtG(v.filterList(x))}),e.qZA()}}function A(n,i){1&n&&(e.ynx(0),e._UZ(1,"app-loading-skeleton",10),e.BQk()),2&n&&(e.xp6(1),e.Q6J("amount",6)("colClass","col-12")("blockHeight","40px")("hasShadow",!1))}function S(n,i){1&n&&(e.TgZ(0,"th",32),e._uU(1," Content "),e.qZA())}function k(n,i){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&n){const o=i.$implicit;e.xp6(1),e.hij(" ",null==o?null:o.content," ")}}function I(n,i){1&n&&(e.TgZ(0,"th",34),e._uU(1," Date & time "),e.qZA())}function P(n,i){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"since"),e.qZA()),2&n){const o=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==o?null:o.created)," ")}}function w(n,i){1&n&&(e.TgZ(0,"th",36),e._uU(1," ID "),e.qZA())}function c(n,i){if(1&n&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&n){const o=i.$implicit;e.xp6(1),e.hij(" ",o.id," ")}}function d(n,i){1&n&&(e.TgZ(0,"th",38),e._uU(1," Type "),e.qZA())}function a(n,i){if(1&n&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&n){const o=i.$implicit;e.ekj("text-danger","error"===(null==o?null:o.type)),e.xp6(1),e.hij(" ",null==o?null:o.type," ")}}function _(n,i){1&n&&(e.TgZ(0,"th",40),e._uU(1," Actions "),e.qZA())}function m(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"td",41)(1,"button",42),e.NdJ("click",function(){const v=e.CHM(o).$implicit,j=e.oxw(2);return e.KtG(j.showDetails(v))}),e._uU(2," Details "),e.qZA()()}if(2&n){const o=i.$implicit;e.ekj("text-danger","error"===(null==o?null:o.type))}}function M(n,i){1&n&&e._UZ(0,"tr",43)}function J(n,i){1&n&&e._UZ(0,"tr",44)}function K(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"div",12)(1,"table",13),e.ynx(2,14),e.YNc(3,S,2,0,"th",15),e.YNc(4,k,2,1,"td",16),e.BQk(),e.ynx(5,17),e.YNc(6,I,2,0,"th",18),e.YNc(7,P,3,3,"td",19),e.BQk(),e.ynx(8,20),e.YNc(9,w,2,0,"th",21),e.YNc(10,c,2,1,"td",22),e.BQk(),e.ynx(11,23),e.YNc(12,d,2,0,"th",24),e.YNc(13,a,2,3,"td",25),e.BQk(),e.ynx(14,26),e.YNc(15,_,2,0,"th",27),e.YNc(16,m,3,2,"td",28),e.BQk(),e.YNc(17,M,1,0,"tr",29),e.YNc(18,J,1,0,"tr",30),e.qZA()(),e.TgZ(19,"mat-paginator",31),e.NdJ("page",function(x){e.CHM(o);const v=e.oxw();return e.KtG(v.page(x))}),e.qZA()}if(2&n){const o=e.oxw();e.xp6(1),e.Q6J("dataSource",o.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.count)("pageIndex",o.pageOffset.length)("pageSize",o.pageSize)}}let N=(()=>{class n{constructor(o,T,x){this.dialog=o,this.generalService=T,this.logService=x,this.filter="",this.isLoading=!0,this.displayedColumns=["content","date","id","type","action"],this.dataSource=[],this.count=0,this.pageSize=10,this.pageOffset=[]}ngOnInit(){this.getItems(),this.getCount()}page(o){o.previousPageIndex<o.pageIndex?this.pageOffset.push(this.dataSource[this.dataSource.length-1].id):this.pageOffset.pop(),this.getItems()}showDetails(o){this.dialog.open(u.K,{width:"700px",data:o})}filterList(o){this.filter=o.searchKey,this.pageOffset=[],this.getItems(),this.getCount()}getItems(){this.logService.list(this.pageOffset.length>0?this.pageOffset[this.pageOffset.length-1]:null,this.pageSize,this.filter).subscribe({next:o=>{this.dataSource=o||[],this.isLoading=!1},error:o=>{this.generalService.showFeedback(o?.error?.message??o,"errorMessage")}})}getCount(){this.logService.count(this.filter).subscribe({next:o=>{this.count=o.count},error:o=>this.generalService.showFeedback(o?.error?.message??o,"errorMessage")})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(C.uw),e.Y36(f.m),e.Y36(r.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-log"]],decls:15,vars:4,consts:[[1,"row","fullPage"],[1,"col-12"],[1,"h-100"],[1,"row","align-items-center"],[1,"col-xxl-8","col-xl-7","col-lg-6","col-12","mb-lg-0","mb-2"],[1,"my-0","fw-bold"],[1,"col-xxl-4","col-xl-5","col-lg-6","col-12"],[4,"ngIf","ngIfElse"],["loaded",""],["dataReady",""],[3,"amount","colClass","blockHeight","hasShadow"],[3,"filterList"],[1,"table-responsive","mt-4"],["mat-table","",1,"w-100","borderless","hoverable",3,"dataSource"],["matColumnDef","content"],["mat-header-cell","","class","px-sm-3",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate px-sm-3",4,"matCellDef"],["matColumnDef","date"],["mat-header-cell","","class","text-nowrap px-sm-3 small-table-column",4,"matHeaderCellDef"],["mat-cell","","class","text-nowrap px-sm-3 small-table-column",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","pe-sm-3 small-table-column",4,"matHeaderCellDef"],["mat-cell","","class","pe-sm-3 small-table-column",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","class","px-sm-3 small-table-column",4,"matHeaderCellDef"],["mat-cell","","class","px-sm-3 small-table-column",3,"text-danger",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","class","ps-sm-3 small-table-column",4,"matHeaderCellDef"],["mat-cell","","class","ps-sm-3 text-nowrap small-table-column",3,"text-danger",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","page"],["mat-header-cell","",1,"px-sm-3"],["mat-cell","",1,"text-truncate","px-sm-3"],["mat-header-cell","",1,"text-nowrap","px-sm-3","small-table-column"],["mat-cell","",1,"text-nowrap","px-sm-3","small-table-column"],["mat-header-cell","",1,"pe-sm-3","small-table-column"],["mat-cell","",1,"pe-sm-3","small-table-column"],["mat-header-cell","",1,"px-sm-3","small-table-column"],["mat-cell","",1,"px-sm-3","small-table-column"],["mat-header-cell","",1,"ps-sm-3","small-table-column"],["mat-cell","",1,"ps-sm-3","text-nowrap","small-table-column"],["mat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,T){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-content",2)(4,"div",3)(5,"div",4)(6,"h3",5),e._uU(7,"System log"),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,L,2,4,"ng-container",7),e.YNc(10,O,1,0,"ng-template",null,8,e.W1O),e.qZA()(),e.YNc(12,A,2,4,"ng-container",7),e.YNc(13,K,20,7,"ng-template",null,9,e.W1O),e.qZA()()()()),2&o){const x=e.MAs(11),v=e.MAs(14);e.xp6(9),e.Q6J("ngIf",T.isLoading)("ngIfElse",x),e.xp6(3),e.Q6J("ngIf",T.isLoading)("ngIfElse",v)}},dependencies:[t.O5,p.J,s.E,b.lW,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,D.a8,D.dn,y.NW,Z.$],styles:[".table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px #f5f5f5;-webkit-box-shadow:inset 0 0 6px #f5f5f5;background-color:#f5f5f5}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;background-color:#f5f5f5}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#bdbdbd;border-radius:10px}.table-responsive[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%]{max-width:30vw}"]}),n})();var U=l(9132);const R=[{path:"",component:N}];let Q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[U.Bz.forChild(R),U.Bz]}),n})();var H=l(7832),Y=l(2278),W=l(1075),B=l(4006);let F=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[t.ez,Q,H.K,Y.q,W.m,B.u5,B.UX]}),n})()}}]);