"use strict";(self.webpackChunkmagic=self.webpackChunkmagic||[]).push([[892],{9554:(g,c,a)=>{a.d(c,{v:()=>m});const m={name:"Name must be minimum 2 characters long",backendname:"Alphanumeric characters between 2 to 20 (no space).",username:"Alphanumeric between 2 and 20 characters (no space)",email:"Email must be a valid email address",confirmEmail:"Email addresses must match",confirmPassword:"Passwords must match",currentPassword:"Your password is incorrect",cloudletName:"Minimum of 5 characters, only lowercase and numbers",phone:"e.g. 1111111111",subject:"2 to 30 letters, without special characters",message:"Message cannot be less than 3 characters",appNames:"Only lowercase alphanumeric characters, dot (.), - or _ please",appNamesWithUppercaseDot:"Only alphanumeric characters, dot (.), - or _ please",appNamesWithDot:"Only lowercase alphanumeric characters, and - or _ please",appNameWithUppercase:"Accepts alphanumeric characters and _",appNameWithUppercaseHyphen:"Accepts alphanumeric characters, - and _",domain:"Domain is not valid",backend:"Backend URL must contain http://",password:"Minimum 12 characters",recaptcha:"Not valid reCAPTCHA secret or key"}},8194:(g,c,a)=>{a.d(c,{g:()=>m});const m={phone:/^[0-9 ]*$/,name:/^[a-z0-9]{2,20}$/,subject:/^.{4,1000}$/,appNames:/^[a-z0-9_.-]+$/,appNamesWithDot:/^[a-z0-9_.-]+$/,appNamesWithUppercaseDot:/^[a-zA-Z0-9_.-]+$/,appNameWithUppercase:/^[a-zA-Z0-9_]+$/,appNameWithUppercaseHyphen:/^[a-zA-Z0-9_-]+$/,domain:/(^https?:\/\/)([\w\-])+\.{1}([a-zA-Z]{2,63})([\/\w-]*)*\/?\??([^#\n\r]*)?#?([^\n\r]*)/,backend:/^https?:\/\/([\w\-.])+(:[0-9]*)?(\.\w+)?$/,email:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,password:/^.{12,}$/,recaptcha:/^([a-zA-Z-_0-9]{20,100})$/}},8892:(g,c,a)=>{a.r(c),a.d(c,{ProfileModule:()=>J});var m=a(6895),f=a(9554),v=a(8194),e=a(4650),u=a(9132),w=a(3773),M=a(3278),Z=a(8710),P=a(3885),T=a(7392),A=a(4859),d=a(9549),C=a(4144),b=a(266),U=a(4385),y=a(3238),h=a(3546),l=a(4006);function x(s,i){1&s&&e._UZ(0,"mat-hint",30)}function S(s,i){if(1&s&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&s){const n=i.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}const p=function(){return{standalone:!0}},N=[{path:"",component:(()=>{class s{constructor(n,t,o,r,k){this.router=n,this.themeService=t,this.userService=o,this.backendService=r,this.generalService=k,this.selectedTheme=null,this.user={},this.password="",this.confirmPassword="",this.showPassword=!1,this.CommonRegEx=v.g,this.CommonErrorMessages=f.v}ngOnInit(){this.getUsername()}save(){""!==this.user.name?this.userService.editExtra({user:this.user.username,type:"name",value:this.user.name}).subscribe({next:()=>{this.generalService.showFeedback("Details saved successfully","successMessage")},error:t=>this.generalService.showFeedback(t?.error?.message??t,"errorMessage")}):this.generalService.showFeedback("Please provide a full name","errorMessage")}savePassword(){""!==this.password?this.password.length<12?this.generalService.showFeedback("Not a valid password","errorMessage"):""!==this.confirmPassword?this.confirmPassword===this.password?this.backendService.changePassword(this.password).subscribe({next:()=>{this.generalService.showFeedback("Please sign in with your new password","successMessage","Ok",5e3),this.backendService.logout(!1),this.router.navigate(["/authentication"])},error:n=>this.generalService.showFeedback(n?.error?.message??n,"errorMessage")}):this.generalService.showFeedback("Passwords do not match","errorMessage"):this.generalService.showFeedback("Please confirm the new password","errorMessage"):this.generalService.showFeedback("Please provide a new password","errorMessage")}getUsername(){this.user.username=this.backendService.active.token._username,this.getUser()}getUser(){this.userService.list(`?username.like=${encodeURIComponent(this.user.username)}%`).subscribe({next:n=>{if(n){let t={};n.map(o=>{o.extra&&(o.extra.forEach(r=>{t[r.type]=r.value}),t.username=o.username)}),this.user=t}},error:n=>this.generalService.showFeedback(n,"errorMessage")})}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(u.F0),e.Y36(w.f),e.Y36(M.K),e.Y36(Z.v),e.Y36(P.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile"]],decls:90,vars:23,consts:[[1,"row","profile"],[1,"col-12"],[1,"row","equal-height"],[1,"fw-bold"],[1,"col-lg","col-sm-6","col-12","mb-sm-0","mb-3"],[1,"w-100","standalone-field"],["matPrefix","","matTooltip","Full name",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],[1,"text-muted"],["matInput","","placeholder","Full name","type","text","spellcheck","false","name","name",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-lg","col-sm-6","col-12"],["matPrefix","","matTooltip","Username",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Username","type","text","disabled","",3,"ngModel","ngModelOptions"],[1,"col-lg","col-sm-6","col-12","mt-lg-0","mt-3"],["matPrefix","","matTooltip","Email address",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Email address","type","email","disabled","",3,"ngModel","ngModelOptions"],[1,"col-lg-2","col-sm-6","col-12","d-flex","align-items-stretch","mt-lg-0","mt-3"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"click"],[1,"col-12","mt-4"],["matPrefix","","matTooltip","New password",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Password","spellcheck","false","name","password","autocomplete","new-password",3,"type","ngModel","ngModelOptions","pattern","ngModelChange"],["matSuffix","","mat-icon-button","","type","button","tabIndex","-1",3,"click"],["matPrefix","","matTooltip","Repeat new password",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["matInput","","placeholder","Confirm password","spellcheck","false",3,"type","ngModel","ngModelOptions","ngModelChange"],["confirm",""],["class","text-danger",4,"ngIf"],[1,"col-xl-2","col-lg-3","col-sm-6","col-12","d-flex","align-items-stretch","mt-lg-0","mt-3"],["matPrefix","","matTooltip","Active theme",1,"d-flex","flex-nowrap","align-items-center","justify-content-between","me-2"],["placeholder","Theme",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-xl-2","col-lg-3","col-sm-6","col-12","mt-lg-0","mt-3"],[1,"text-danger"],[3,"value"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-content")(4,"form")(5,"div",2)(6,"div",1)(7,"h3",3),e._uU(8,"Profile details"),e.qZA()(),e.TgZ(9,"div",4)(10,"mat-form-field",5)(11,"span",6)(12,"mat-icon"),e._uU(13,"person"),e.qZA(),e.TgZ(14,"span",7),e._uU(15,"|"),e.qZA()(),e.TgZ(16,"input",8),e.NdJ("ngModelChange",function(r){return t.user.name=r}),e.qZA()()(),e.TgZ(17,"div",9)(18,"mat-form-field",5)(19,"span",10)(20,"mat-icon"),e._uU(21,"person"),e.qZA(),e.TgZ(22,"span",7),e._uU(23,"|"),e.qZA()(),e._UZ(24,"input",11),e.qZA()(),e.TgZ(25,"div",12)(26,"mat-form-field",5)(27,"span",13)(28,"mat-icon"),e._uU(29,"mail"),e.qZA(),e.TgZ(30,"span",7),e._uU(31,"|"),e.qZA()(),e._UZ(32,"input",14),e.qZA()(),e.TgZ(33,"div",15)(34,"button",16),e.NdJ("click",function(){return t.save()}),e._uU(35," Save "),e.qZA()()()()()()(),e.TgZ(36,"div",17)(37,"mat-card")(38,"mat-card-content")(39,"form")(40,"div",2)(41,"div",1)(42,"h3",3),e._uU(43,"Change password"),e.qZA()(),e.TgZ(44,"div",4)(45,"mat-form-field",5)(46,"span",18)(47,"mat-icon"),e._uU(48,"password"),e.qZA(),e.TgZ(49,"span",7),e._uU(50,"|"),e.qZA()(),e.TgZ(51,"input",19),e.NdJ("ngModelChange",function(r){return t.password=r}),e.qZA(),e.TgZ(52,"mat-error"),e._uU(53),e.qZA(),e.TgZ(54,"button",20),e.NdJ("click",function(){return t.showPassword=!t.showPassword}),e.TgZ(55,"mat-icon"),e._uU(56),e.qZA()()()(),e.TgZ(57,"div",9)(58,"mat-form-field",5)(59,"span",21)(60,"mat-icon"),e._uU(61,"password"),e.qZA(),e.TgZ(62,"span",7),e._uU(63,"|"),e.qZA()(),e.TgZ(64,"input",22,23),e.NdJ("ngModelChange",function(r){return t.confirmPassword=r}),e.qZA(),e.YNc(66,x,1,0,"mat-hint",24),e.qZA()(),e._UZ(67,"div",12),e.TgZ(68,"div",25)(69,"button",16),e.NdJ("click",function(){return t.savePassword()}),e._uU(70,"Change password "),e.qZA()()()()()()(),e.TgZ(71,"div",17)(72,"mat-card")(73,"mat-card-content")(74,"div",2)(75,"div",1)(76,"h3",3),e._uU(77,"Theme"),e.qZA()(),e.TgZ(78,"div",4)(79,"mat-form-field",5)(80,"span",26)(81,"mat-icon"),e._uU(82,"remove_red_eye"),e.qZA(),e.TgZ(83,"span",7),e._uU(84,"|"),e.qZA()(),e.TgZ(85,"mat-select",27),e.NdJ("ngModelChange",function(r){return t.themeService.theme=r}),e.YNc(86,S,2,2,"mat-option",28),e.qZA()()(),e._UZ(87,"div",12)(88,"div",12)(89,"div",29),e.qZA()()()()()),2&n){const o=e.MAs(65);e.xp6(16),e.Q6J("ngModel",t.user.name)("ngModelOptions",e.DdM(18,p)),e.xp6(8),e.Q6J("ngModel",t.user.username)("ngModelOptions",e.DdM(19,p)),e.xp6(8),e.Q6J("ngModel",t.user.email)("ngModelOptions",e.DdM(20,p)),e.xp6(19),e.Q6J("type",t.showPassword?"text":"password")("ngModel",t.password)("ngModelOptions",e.DdM(21,p))("pattern",t.CommonRegEx.password),e.xp6(2),e.Oqu(t.CommonErrorMessages.password),e.xp6(3),e.Oqu(t.showPassword?"visibility_off":"visibility"),e.xp6(8),e.Q6J("type",t.showPassword?"text":"password")("ngModel",t.confirmPassword)("ngModelOptions",e.DdM(22,p)),e.xp6(2),e.Q6J("ngIf",o.value!==t.password),e.xp6(19),e.Q6J("ngModel",t.themeService.theme),e.xp6(1),e.Q6J("ngForOf",t.themeService.themes)}},dependencies:[m.sg,m.O5,T.Hw,A.lW,d.TO,d.KE,d.bx,d.qo,d.R9,C.Nt,b.gM,U.gD,y.ey,h.a8,h.dn,l._Y,l.Fj,l.JJ,l.JL,l.c5,l.On,l.F],styles:[".profile[_ngcontent-%COMP%]   .equal-height[_ngcontent-%COMP%]     .mat-form-field-wrapper{margin:0}"]}),s})()}];let O=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u.Bz.forChild(N),u.Bz]}),s})();var F=a(2278);let J=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[m.ez,O,F.q,l.u5]}),s})()}}]);